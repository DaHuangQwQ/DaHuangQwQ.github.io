import{_ as a,c as s,o as i,V as t}from"./chunks/framework.WykxUCM3.js";const g=JSON.parse('{"title":"P_3369_模板_普通平衡树","description":"","frontmatter":{},"headers":[],"relativePath":"cpp/1984-01/P_3369_模板_普通平衡树.md","filePath":"cpp/1984-01/P_3369_模板_普通平衡树.md"}'),d={name:"cpp/1984-01/P_3369_模板_普通平衡树.md"},h=t(`<h1 id="p-3369-模板-普通平衡树" tabindex="-1" data-v-d9171af7>P_3369_模板_普通平衡树 <a class="header-anchor" href="#p-3369-模板-普通平衡树" aria-label="Permalink to &quot;P_3369_模板_普通平衡树&quot;" data-v-d9171af7>​</a></h1><div class="language-cpp vp-adaptive-theme" data-v-d9171af7><button title="Copy Code" class="copy" data-v-d9171af7></button><span class="lang" data-v-d9171af7>cpp</span><pre class="shiki shiki-themes github-light github-dark vp-code" data-v-d9171af7><code data-v-d9171af7><span class="line" data-v-d9171af7><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-d9171af7>#include</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;" data-v-d9171af7> &lt;iostream&gt;</span></span>
<span class="line" data-v-d9171af7><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-d9171af7>using</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-d9171af7> namespace</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-d9171af7> std</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7>;</span></span>
<span class="line" data-v-d9171af7></span>
<span class="line" data-v-d9171af7><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-d9171af7>#define</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-d9171af7> ls</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7>(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;" data-v-d9171af7>x</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7>) tr[x].s[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-d9171af7>0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7>]</span></span>
<span class="line" data-v-d9171af7><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-d9171af7>#define</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-d9171af7> rs</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7>(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;" data-v-d9171af7>x</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7>) tr[x].s[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-d9171af7>1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7>]</span></span>
<span class="line" data-v-d9171af7><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-d9171af7>const</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-d9171af7> int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7> N</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-d9171af7>=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-d9171af7>1100010</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7>, INF</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-d9171af7>=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7>(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-d9171af7>1</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-d9171af7>&lt;&lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-d9171af7>30</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7>)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-d9171af7>+</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-d9171af7>1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7>;</span></span>
<span class="line" data-v-d9171af7><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-d9171af7>struct</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-d9171af7> node</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7>{</span></span>
<span class="line" data-v-d9171af7><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-d9171af7>  int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7> s[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-d9171af7>2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7>];</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;" data-v-d9171af7> //左右儿子</span></span>
<span class="line" data-v-d9171af7><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-d9171af7>  int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7> p;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;" data-v-d9171af7> //父亲</span></span>
<span class="line" data-v-d9171af7><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-d9171af7>  int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7> v;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;" data-v-d9171af7> //节点权值</span></span>
<span class="line" data-v-d9171af7><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-d9171af7>  int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7> cnt;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;" data-v-d9171af7> //权值出现次数</span></span>
<span class="line" data-v-d9171af7><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-d9171af7>  int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7> siz;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;" data-v-d9171af7> //子树大小</span></span>
<span class="line" data-v-d9171af7><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-d9171af7>  void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-d9171af7> init</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7>(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-d9171af7>int</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;" data-v-d9171af7> p1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7>,</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-d9171af7>int</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;" data-v-d9171af7> v1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7>){</span></span>
<span class="line" data-v-d9171af7><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7>    p</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-d9171af7>=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7>p1, v</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-d9171af7>=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7>v1;</span></span>
<span class="line" data-v-d9171af7><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7>    cnt</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-d9171af7>=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7>siz</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-d9171af7>=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-d9171af7>1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7>;</span></span>
<span class="line" data-v-d9171af7><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7>  }</span></span>
<span class="line" data-v-d9171af7><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7>}tr[N];</span></span>
<span class="line" data-v-d9171af7><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-d9171af7>int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7> root;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;" data-v-d9171af7> //根节点编号</span></span>
<span class="line" data-v-d9171af7><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-d9171af7>int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7> idx;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;" data-v-d9171af7> //节点个数</span></span>
<span class="line" data-v-d9171af7></span>
<span class="line" data-v-d9171af7><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-d9171af7>void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-d9171af7> pushup</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7>(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-d9171af7>int</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;" data-v-d9171af7> x</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7>){</span></span>
<span class="line" data-v-d9171af7><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7>  tr[x].siz</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-d9171af7>=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7>tr[</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-d9171af7>ls</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7>(x)].siz</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-d9171af7>+</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7>tr[</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-d9171af7>rs</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7>(x)].siz</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-d9171af7>+</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7>tr[x].cnt;</span></span>
<span class="line" data-v-d9171af7><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7>}</span></span>
<span class="line" data-v-d9171af7><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-d9171af7>void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-d9171af7> rotate</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7>(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-d9171af7>int</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;" data-v-d9171af7> x</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7>){</span></span>
<span class="line" data-v-d9171af7><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-d9171af7>  int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7> y</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-d9171af7>=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7>tr[x].p, z</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-d9171af7>=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7>tr[y].p;</span></span>
<span class="line" data-v-d9171af7><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-d9171af7>  int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7> k </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-d9171af7>=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7> tr[y].s[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-d9171af7>1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7>]</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-d9171af7>==</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7>x;</span></span>
<span class="line" data-v-d9171af7><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7>  tr[z].s[tr[z].s[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-d9171af7>1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7>]</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-d9171af7>==</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7>y] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-d9171af7>=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7>x;</span></span>
<span class="line" data-v-d9171af7><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7>  tr[x].p </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-d9171af7>=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7> z;  </span></span>
<span class="line" data-v-d9171af7><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7>  tr[y].s[k] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-d9171af7>=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7> tr[x].s[k</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-d9171af7>^</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-d9171af7>1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7>];</span></span>
<span class="line" data-v-d9171af7><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7>  tr[tr[x].s[k</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-d9171af7>^</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-d9171af7>1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7>]].p </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-d9171af7>=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7> y;</span></span>
<span class="line" data-v-d9171af7><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7>  tr[x].s[k</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-d9171af7>^</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-d9171af7>1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7>] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-d9171af7>=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7> y;</span></span>
<span class="line" data-v-d9171af7><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7>  tr[y].p </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-d9171af7>=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7> x;</span></span>
<span class="line" data-v-d9171af7><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-d9171af7>  pushup</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7>(y), </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-d9171af7>pushup</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7>(x);</span></span>
<span class="line" data-v-d9171af7><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7>}</span></span>
<span class="line" data-v-d9171af7><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-d9171af7>void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-d9171af7> splay</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7>(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-d9171af7>int</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;" data-v-d9171af7> x</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7>, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-d9171af7>int</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;" data-v-d9171af7> k</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7>){</span></span>
<span class="line" data-v-d9171af7><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-d9171af7>  while</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7>(tr[x].p</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-d9171af7>!=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7>k){</span></span>
<span class="line" data-v-d9171af7><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-d9171af7>    int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7> y</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-d9171af7>=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7>tr[x].p, z</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-d9171af7>=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7>tr[y].p;</span></span>
<span class="line" data-v-d9171af7><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-d9171af7>    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7>(z</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-d9171af7>!=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7>k)</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;" data-v-d9171af7>   // 折转底，直转中</span></span>
<span class="line" data-v-d9171af7><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7>      (</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-d9171af7>ls</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7>(y)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-d9171af7>==</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7>x)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-d9171af7>^</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7>(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-d9171af7>ls</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7>(z)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-d9171af7>==</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7>y)</span></span>
<span class="line" data-v-d9171af7><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-d9171af7>        ?</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-d9171af7> rotate</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7>(x) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-d9171af7>:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-d9171af7> rotate</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7>(y);</span></span>
<span class="line" data-v-d9171af7><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-d9171af7>    rotate</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7>(x);</span></span>
<span class="line" data-v-d9171af7><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7>  }</span></span>
<span class="line" data-v-d9171af7><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-d9171af7>  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7>(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-d9171af7>!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7>k) root</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-d9171af7>=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7>x;</span></span>
<span class="line" data-v-d9171af7><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7>}</span></span>
<span class="line" data-v-d9171af7><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-d9171af7>void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-d9171af7> insert</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7>(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-d9171af7>int</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;" data-v-d9171af7> v</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7>){</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;" data-v-d9171af7> //插入</span></span>
<span class="line" data-v-d9171af7><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-d9171af7>  int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7> x</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-d9171af7>=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7>root, p</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-d9171af7>=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-d9171af7>0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7>;</span></span>
<span class="line" data-v-d9171af7><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-d9171af7>  while</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7>(x </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-d9171af7>&amp;&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7> tr[x].v</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-d9171af7>!=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7>v)</span></span>
<span class="line" data-v-d9171af7><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7>    p</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-d9171af7>=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7>x, x</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-d9171af7>=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7>tr[x].s[v</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-d9171af7>&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7>tr[x].v];</span></span>
<span class="line" data-v-d9171af7><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-d9171af7>  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7>(x) tr[x].cnt</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-d9171af7>++</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7>;</span></span>
<span class="line" data-v-d9171af7><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-d9171af7>  else</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7>{</span></span>
<span class="line" data-v-d9171af7><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7>    x</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-d9171af7>=++</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7>idx;</span></span>
<span class="line" data-v-d9171af7><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-d9171af7>    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7>(p) tr[p].s[v</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-d9171af7>&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7>tr[p].v]</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-d9171af7>=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7>x;</span></span>
<span class="line" data-v-d9171af7><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7>    tr[x].</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-d9171af7>init</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7>(p,v);</span></span>
<span class="line" data-v-d9171af7><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7>  }</span></span>
<span class="line" data-v-d9171af7><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-d9171af7>  splay</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7>(x, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-d9171af7>0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7>);</span></span>
<span class="line" data-v-d9171af7><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7>}</span></span>
<span class="line" data-v-d9171af7><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-d9171af7>void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-d9171af7> find</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7>(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-d9171af7>int</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;" data-v-d9171af7> v</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7>){</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;" data-v-d9171af7> //找到v并转到根</span></span>
<span class="line" data-v-d9171af7><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-d9171af7>  int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7> x</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-d9171af7>=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7>root;</span></span>
<span class="line" data-v-d9171af7><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-d9171af7>  while</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7>(tr[x].s[v</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-d9171af7>&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7>tr[x].v]</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-d9171af7>&amp;&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7>v</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-d9171af7>!=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7>tr[x].v) </span></span>
<span class="line" data-v-d9171af7><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7>    x</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-d9171af7>=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7>tr[x].s[v</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-d9171af7>&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7>tr[x].v]; </span></span>
<span class="line" data-v-d9171af7><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-d9171af7>  splay</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7>(x, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-d9171af7>0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7>);</span></span>
<span class="line" data-v-d9171af7><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7>}</span></span>
<span class="line" data-v-d9171af7><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-d9171af7>int</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-d9171af7> getpre</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7>(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-d9171af7>int</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;" data-v-d9171af7> v</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7>){</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;" data-v-d9171af7> //前驱</span></span>
<span class="line" data-v-d9171af7><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-d9171af7>  find</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7>(v);</span></span>
<span class="line" data-v-d9171af7><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-d9171af7>  int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7> x</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-d9171af7>=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7>root;</span></span>
<span class="line" data-v-d9171af7><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-d9171af7>  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7>(tr[x].v</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-d9171af7>&lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7>v) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-d9171af7>return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7> x;</span></span>
<span class="line" data-v-d9171af7><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7>  x</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-d9171af7>=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-d9171af7>ls</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7>(x);</span></span>
<span class="line" data-v-d9171af7><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-d9171af7>  while</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7>(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-d9171af7>rs</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7>(x)) x</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-d9171af7>=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-d9171af7>rs</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7>(x);</span></span>
<span class="line" data-v-d9171af7><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-d9171af7>  splay</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7>(x, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-d9171af7>0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7>);</span></span>
<span class="line" data-v-d9171af7><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-d9171af7>  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7> x;</span></span>
<span class="line" data-v-d9171af7><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7>}</span></span>
<span class="line" data-v-d9171af7><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-d9171af7>int</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-d9171af7> getsuc</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7>(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-d9171af7>int</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;" data-v-d9171af7> v</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7>){</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;" data-v-d9171af7> //后继</span></span>
<span class="line" data-v-d9171af7><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-d9171af7>  find</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7>(v);</span></span>
<span class="line" data-v-d9171af7><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-d9171af7>  int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7> x</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-d9171af7>=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7>root;</span></span>
<span class="line" data-v-d9171af7><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-d9171af7>  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7>(tr[x].v</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-d9171af7>&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7>v) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-d9171af7>return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7> x;</span></span>
<span class="line" data-v-d9171af7><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7>  x</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-d9171af7>=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-d9171af7>rs</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7>(x);</span></span>
<span class="line" data-v-d9171af7><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-d9171af7>  while</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7>(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-d9171af7>ls</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7>(x)) x</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-d9171af7>=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-d9171af7>ls</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7>(x);</span></span>
<span class="line" data-v-d9171af7><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-d9171af7>  splay</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7>(x, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-d9171af7>0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7>);</span></span>
<span class="line" data-v-d9171af7><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-d9171af7>  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7> x;</span></span>
<span class="line" data-v-d9171af7><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7>}</span></span>
<span class="line" data-v-d9171af7><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-d9171af7>void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-d9171af7> del</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7>(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-d9171af7>int</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;" data-v-d9171af7> v</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7>){</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;" data-v-d9171af7> //删除</span></span>
<span class="line" data-v-d9171af7><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-d9171af7>  int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7> pre</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-d9171af7>=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-d9171af7>getpre</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7>(v);</span></span>
<span class="line" data-v-d9171af7><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-d9171af7>  int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7> suc</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-d9171af7>=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-d9171af7>getsuc</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7>(v);</span></span>
<span class="line" data-v-d9171af7><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-d9171af7>  splay</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7>(pre,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-d9171af7>0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7>), </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-d9171af7>splay</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7>(suc,pre);</span></span>
<span class="line" data-v-d9171af7><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-d9171af7>  int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7> del</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-d9171af7>=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7>tr[suc].s[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-d9171af7>0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7>];</span></span>
<span class="line" data-v-d9171af7><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-d9171af7>  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7>(tr[del].cnt</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-d9171af7>&gt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-d9171af7>1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7>)</span></span>
<span class="line" data-v-d9171af7><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7>    tr[del].cnt</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-d9171af7>--</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7>, </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-d9171af7>splay</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7>(del,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-d9171af7>0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7>);</span></span>
<span class="line" data-v-d9171af7><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-d9171af7>  else</span></span>
<span class="line" data-v-d9171af7><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7>    tr[suc].s[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-d9171af7>0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7>]</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-d9171af7>=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-d9171af7>0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7>, </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-d9171af7>splay</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7>(suc,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-d9171af7>0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7>);</span></span>
<span class="line" data-v-d9171af7><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7>}</span></span>
<span class="line" data-v-d9171af7><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-d9171af7>int</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-d9171af7> getrank</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7>(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-d9171af7>int</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;" data-v-d9171af7> v</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7>){</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;" data-v-d9171af7> //排名</span></span>
<span class="line" data-v-d9171af7><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-d9171af7>  insert</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7>(v);</span></span>
<span class="line" data-v-d9171af7><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-d9171af7>  int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7> res</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-d9171af7>=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7>tr[tr[root].s[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-d9171af7>0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7>]].siz;</span></span>
<span class="line" data-v-d9171af7><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-d9171af7>  del</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7>(v);</span></span>
<span class="line" data-v-d9171af7><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-d9171af7>  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7> res;</span></span>
<span class="line" data-v-d9171af7><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7>}</span></span>
<span class="line" data-v-d9171af7><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-d9171af7>int</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-d9171af7> getval</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7>(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-d9171af7>int</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;" data-v-d9171af7> k</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7>){</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;" data-v-d9171af7> //数值</span></span>
<span class="line" data-v-d9171af7><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-d9171af7>    int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7> x</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-d9171af7>=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7>root;</span></span>
<span class="line" data-v-d9171af7><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-d9171af7>    while</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7>(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-d9171af7>true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7>){</span></span>
<span class="line" data-v-d9171af7><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-d9171af7>        if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7>(k</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-d9171af7>&lt;=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7>tr[</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-d9171af7>ls</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7>(x)].siz) x</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-d9171af7>=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-d9171af7>ls</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7>(x);</span></span>
<span class="line" data-v-d9171af7><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-d9171af7>        else</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-d9171af7> if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7>(k</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-d9171af7>&lt;=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7>tr[</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-d9171af7>ls</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7>(x)].siz</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-d9171af7>+</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7>tr[x].cnt) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-d9171af7>break</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7>;</span></span>
<span class="line" data-v-d9171af7><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-d9171af7>        else</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7> k</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-d9171af7>-=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7>tr[</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-d9171af7>ls</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7>(x)].siz</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-d9171af7>+</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7>tr[x].cnt, x</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-d9171af7>=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-d9171af7>rs</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7>(x);</span></span>
<span class="line" data-v-d9171af7><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7>    }</span></span>
<span class="line" data-v-d9171af7><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-d9171af7>    splay</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7>(x, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-d9171af7>0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7>);</span></span>
<span class="line" data-v-d9171af7><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-d9171af7>    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7> tr[x].v;</span></span>
<span class="line" data-v-d9171af7><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7>}</span></span>
<span class="line" data-v-d9171af7><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-d9171af7>int</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-d9171af7> main</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7>(){</span></span>
<span class="line" data-v-d9171af7><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-d9171af7>  insert</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7>(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-d9171af7>-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7>INF);</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-d9171af7>insert</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7>(INF);</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;" data-v-d9171af7> //哨兵</span></span>
<span class="line" data-v-d9171af7><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-d9171af7>  int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7> n;</span></span>
<span class="line" data-v-d9171af7><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7>  cin </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-d9171af7>&gt;&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7> n;</span></span>
<span class="line" data-v-d9171af7><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-d9171af7>  while</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7>(n</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-d9171af7>--</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7>){</span></span>
<span class="line" data-v-d9171af7><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-d9171af7>    int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7> op,x; cin </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-d9171af7>&gt;&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7> op </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-d9171af7>&gt;&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7> x;</span></span>
<span class="line" data-v-d9171af7><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-d9171af7>    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7>(op</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-d9171af7>==</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-d9171af7>1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7>) </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-d9171af7>insert</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7>(x);</span></span>
<span class="line" data-v-d9171af7><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-d9171af7>    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7>(op</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-d9171af7>==</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-d9171af7>2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7>) </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-d9171af7>del</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7>(x);</span></span>
<span class="line" data-v-d9171af7><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-d9171af7>    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7>(op</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-d9171af7>==</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-d9171af7>3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7>) cout </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-d9171af7>&lt;&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-d9171af7> getrank</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7>(x) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-d9171af7>&lt;&lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7> endl;</span></span>
<span class="line" data-v-d9171af7><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-d9171af7>    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7>(op</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-d9171af7>==</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-d9171af7>4</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7>) cout </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-d9171af7>&lt;&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-d9171af7> getval</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7>(x</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-d9171af7>+</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-d9171af7>1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7>) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-d9171af7>&lt;&lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7> endl;</span></span>
<span class="line" data-v-d9171af7><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-d9171af7>    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7>(op</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-d9171af7>==</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-d9171af7>5</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7>) cout </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-d9171af7>&lt;&lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7> tr[</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-d9171af7>getpre</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7>(x)].v </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-d9171af7>&lt;&lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7> endl;</span></span>
<span class="line" data-v-d9171af7><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-d9171af7>    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7>(op</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-d9171af7>==</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-d9171af7>6</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7>) cout </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-d9171af7>&lt;&lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7> tr[</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-d9171af7>getsuc</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7>(x)].v </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-d9171af7>&lt;&lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7> endl;</span></span>
<span class="line" data-v-d9171af7><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7>  }</span></span>
<span class="line" data-v-d9171af7><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-d9171af7>  return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-d9171af7> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7>;</span></span>
<span class="line" data-v-d9171af7><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-d9171af7>}</span></span></code></pre></div>`,2),k=[h];function n(l,p,E,e,v,f){return i(),s("div",null,k)}const y=a(d,[["render",n],["__scopeId","data-v-d9171af7"]]);export{g as __pageData,y as default};
