import{_ as a,c as s,o as i,V as e}from"./chunks/framework.jgiY9GFO.js";const g=JSON.parse('{"title":"P_3391_模板_文艺平衡树","description":"","frontmatter":{},"headers":[],"relativePath":"cpp/1984-01/P_3391_模板_文艺平衡树.md","filePath":"cpp/1984-01/P_3391_模板_文艺平衡树.md"}'),t={name:"cpp/1984-01/P_3391_模板_文艺平衡树.md"},n=e(`<h1 id="p-3391-模板-文艺平衡树" tabindex="-1" data-v-2e65c05e>P_3391_模板_文艺平衡树 <a class="header-anchor" href="#p-3391-模板-文艺平衡树" aria-label="Permalink to &quot;P_3391_模板_文艺平衡树&quot;" data-v-2e65c05e>​</a></h1><div class="language-cpp vp-adaptive-theme" data-v-2e65c05e><button title="Copy Code" class="copy" data-v-2e65c05e></button><span class="lang" data-v-2e65c05e>cpp</span><pre class="shiki shiki-themes github-light github-dark vp-code" data-v-2e65c05e><code data-v-2e65c05e><span class="line" data-v-2e65c05e><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-2e65c05e>#include</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;" data-v-2e65c05e> &lt;iostream&gt;</span></span>
<span class="line" data-v-2e65c05e><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-2e65c05e>#define</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-2e65c05e> ll</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-2e65c05e> long</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-2e65c05e> long</span></span>
<span class="line" data-v-2e65c05e><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-2e65c05e>#define</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-2e65c05e> ls</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e>(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;" data-v-2e65c05e>x</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e>) tr[x].s[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-2e65c05e>0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e>]</span></span>
<span class="line" data-v-2e65c05e><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-2e65c05e>#define</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-2e65c05e> rs</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e>(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;" data-v-2e65c05e>x</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e>) tr[x].s[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-2e65c05e>1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e>]</span></span>
<span class="line" data-v-2e65c05e><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-2e65c05e>using</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-2e65c05e> namespace</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-2e65c05e> std</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e>;</span></span>
<span class="line" data-v-2e65c05e><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-2e65c05e>const</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-2e65c05e> int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e> N </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-2e65c05e>=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-2e65c05e> 1000010</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e>,INF</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-2e65c05e>=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e>(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-2e65c05e>1</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-2e65c05e>&lt;&lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-2e65c05e>30</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e>)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-2e65c05e>+</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-2e65c05e>1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e>;</span></span>
<span class="line" data-v-2e65c05e><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-2e65c05e>int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e> n,m, root, idx;</span></span>
<span class="line" data-v-2e65c05e><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-2e65c05e>struct</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-2e65c05e> node</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e>{</span></span>
<span class="line" data-v-2e65c05e><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-2e65c05e>    int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e> s[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-2e65c05e>2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e>];</span></span>
<span class="line" data-v-2e65c05e><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-2e65c05e>    int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e> val, p, cnt, size, tag;</span></span>
<span class="line" data-v-2e65c05e><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-2e65c05e>    void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-2e65c05e> init</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e>(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-2e65c05e>int</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;" data-v-2e65c05e> _p</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e>, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-2e65c05e>int</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;" data-v-2e65c05e> _val</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e>){</span></span>
<span class="line" data-v-2e65c05e><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e>        p </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-2e65c05e>=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e> _p;</span></span>
<span class="line" data-v-2e65c05e><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e>        val </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-2e65c05e>=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e> _val;</span></span>
<span class="line" data-v-2e65c05e><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e>        cnt </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-2e65c05e>=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e> size </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-2e65c05e>=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-2e65c05e> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e>;</span></span>
<span class="line" data-v-2e65c05e><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e>    }</span></span>
<span class="line" data-v-2e65c05e><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e>} tr[N];</span></span>
<span class="line" data-v-2e65c05e></span>
<span class="line" data-v-2e65c05e><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-2e65c05e>inline</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-2e65c05e> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-2e65c05e> pushdown</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e>(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-2e65c05e>int</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;" data-v-2e65c05e> x</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e>){</span></span>
<span class="line" data-v-2e65c05e><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-2e65c05e>    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e>(x</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-2e65c05e>&amp;&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e>tr[x].tag){</span></span>
<span class="line" data-v-2e65c05e><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e>    	tr[</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-2e65c05e>rs</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e>(x)].tag</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-2e65c05e>^=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-2e65c05e>1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e>;</span></span>
<span class="line" data-v-2e65c05e><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e>    	tr[</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-2e65c05e>ls</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e>(x)].tag</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-2e65c05e>^=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-2e65c05e>1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e>;</span></span>
<span class="line" data-v-2e65c05e><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-2e65c05e>    	swap</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e>(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-2e65c05e>rs</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e>(x),</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-2e65c05e>ls</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e>(x));</span></span>
<span class="line" data-v-2e65c05e><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e>    	tr[x].tag</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-2e65c05e>=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-2e65c05e>0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e>;</span></span>
<span class="line" data-v-2e65c05e><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e>    }	</span></span>
<span class="line" data-v-2e65c05e><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e>}</span></span>
<span class="line" data-v-2e65c05e></span>
<span class="line" data-v-2e65c05e><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-2e65c05e>void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-2e65c05e> pushup</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e>(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-2e65c05e>int</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;" data-v-2e65c05e> x</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e>){</span></span>
<span class="line" data-v-2e65c05e><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e>    tr[x].size </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-2e65c05e>=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e> tr[</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-2e65c05e>ls</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e>(x)].size </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-2e65c05e>+</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e> tr[</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-2e65c05e>rs</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e>(x)].size </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-2e65c05e>+</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e> tr[x].cnt;</span></span>
<span class="line" data-v-2e65c05e><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e>}</span></span>
<span class="line" data-v-2e65c05e><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-2e65c05e>void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-2e65c05e> rotate</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e>(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-2e65c05e>int</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;" data-v-2e65c05e> x</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e>){</span></span>
<span class="line" data-v-2e65c05e><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-2e65c05e>    int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e> y </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-2e65c05e>=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e> tr[x].p;</span></span>
<span class="line" data-v-2e65c05e><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-2e65c05e>    int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e> z </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-2e65c05e>=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e> tr[y].p;</span></span>
<span class="line" data-v-2e65c05e><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-2e65c05e>    pushdown</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e>(x),</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-2e65c05e>pushdown</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e>(y);</span></span>
<span class="line" data-v-2e65c05e><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-2e65c05e>    int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e> k </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-2e65c05e>=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-2e65c05e> rs</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e>(y) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-2e65c05e>==</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e> x;</span></span>
<span class="line" data-v-2e65c05e><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e>    tr[z].s[</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-2e65c05e>rs</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e>(z) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-2e65c05e>==</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e> y] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-2e65c05e>=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e> x;</span></span>
<span class="line" data-v-2e65c05e><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e>    tr[x].p </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-2e65c05e>=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e> z;</span></span>
<span class="line" data-v-2e65c05e><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e>    tr[y].s[k] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-2e65c05e>=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e> tr[x].s[k</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-2e65c05e>^</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-2e65c05e>1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e>];</span></span>
<span class="line" data-v-2e65c05e><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e>    tr[tr[x].s[k</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-2e65c05e>^</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-2e65c05e>1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e>]] .p </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-2e65c05e>=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e> y;</span></span>
<span class="line" data-v-2e65c05e><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e>    tr[x].s[k</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-2e65c05e>^</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-2e65c05e>1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e>] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-2e65c05e>=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e> y;</span></span>
<span class="line" data-v-2e65c05e><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e>    tr[y].p </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-2e65c05e>=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e> x;</span></span>
<span class="line" data-v-2e65c05e><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-2e65c05e>    pushup</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e>(y);</span></span>
<span class="line" data-v-2e65c05e><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-2e65c05e>    pushup</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e>(x);</span></span>
<span class="line" data-v-2e65c05e><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e>}</span></span>
<span class="line" data-v-2e65c05e></span>
<span class="line" data-v-2e65c05e><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-2e65c05e>void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-2e65c05e> splay</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e>(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-2e65c05e>int</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;" data-v-2e65c05e> x</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e>, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-2e65c05e>int</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;" data-v-2e65c05e> k</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e>){</span></span>
<span class="line" data-v-2e65c05e><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-2e65c05e>    while</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e>(tr[x].p </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-2e65c05e>!=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e> k){</span></span>
<span class="line" data-v-2e65c05e><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-2e65c05e>        int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e> y </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-2e65c05e>=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e> tr[x].p;</span></span>
<span class="line" data-v-2e65c05e><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-2e65c05e>        int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e> z </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-2e65c05e>=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e> tr[y].p;</span></span>
<span class="line" data-v-2e65c05e><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-2e65c05e>        if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e>(z </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-2e65c05e>!=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e> k)</span></span>
<span class="line" data-v-2e65c05e><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e>            (</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-2e65c05e>ls</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e>(y) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-2e65c05e>==</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e> x) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-2e65c05e>^</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e> (</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-2e65c05e>ls</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e>(z) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-2e65c05e>==</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e> y) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-2e65c05e>?</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-2e65c05e> rotate</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e>(x) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-2e65c05e>:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-2e65c05e> rotate</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e>(y);</span></span>
<span class="line" data-v-2e65c05e><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-2e65c05e>        rotate</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e>(x);</span></span>
<span class="line" data-v-2e65c05e><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e>    }</span></span>
<span class="line" data-v-2e65c05e><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-2e65c05e>    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e>(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-2e65c05e>!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e>k) root </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-2e65c05e>=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e> x;</span></span>
<span class="line" data-v-2e65c05e><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e>}</span></span>
<span class="line" data-v-2e65c05e></span>
<span class="line" data-v-2e65c05e><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-2e65c05e>void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-2e65c05e> insert</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e>(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-2e65c05e>int</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;" data-v-2e65c05e> v</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e>){</span></span>
<span class="line" data-v-2e65c05e><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-2e65c05e>    int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e> x </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-2e65c05e>=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e> root, p </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-2e65c05e>=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-2e65c05e> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e>;</span></span>
<span class="line" data-v-2e65c05e><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-2e65c05e>    while</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e>(x </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-2e65c05e>&amp;&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e> tr[x].val </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-2e65c05e>!=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e> v){</span></span>
<span class="line" data-v-2e65c05e><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e>        p </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-2e65c05e>=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e> x;</span></span>
<span class="line" data-v-2e65c05e><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e>        x </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-2e65c05e>=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e> tr[x].s[v </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-2e65c05e>&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e> tr[x].val];</span></span>
<span class="line" data-v-2e65c05e><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e>    }</span></span>
<span class="line" data-v-2e65c05e><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-2e65c05e>    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e>(x) tr[x].cnt</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-2e65c05e>++</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e>;</span></span>
<span class="line" data-v-2e65c05e><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-2e65c05e>    else</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e>{</span></span>
<span class="line" data-v-2e65c05e><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e>        x </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-2e65c05e>=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-2e65c05e> ++</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e>idx;</span></span>
<span class="line" data-v-2e65c05e><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-2e65c05e>        if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e>(p) tr[p].s[v </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-2e65c05e>&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e> tr[p].val] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-2e65c05e>=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e> x;</span></span>
<span class="line" data-v-2e65c05e><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e>        tr[x].</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-2e65c05e>init</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e>(p,v);</span></span>
<span class="line" data-v-2e65c05e><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e>    }</span></span>
<span class="line" data-v-2e65c05e><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-2e65c05e>    splay</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e>(x, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-2e65c05e>0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e>);</span></span>
<span class="line" data-v-2e65c05e><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e>}</span></span>
<span class="line" data-v-2e65c05e></span>
<span class="line" data-v-2e65c05e><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-2e65c05e>void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-2e65c05e> find</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e>(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-2e65c05e>int</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;" data-v-2e65c05e> v</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e>){</span></span>
<span class="line" data-v-2e65c05e><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-2e65c05e>    int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e> x </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-2e65c05e>=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e> root;</span></span>
<span class="line" data-v-2e65c05e><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-2e65c05e>    while</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e>(tr[x].s[v </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-2e65c05e>&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e> tr[x].val] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-2e65c05e>&amp;&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e> v </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-2e65c05e>!=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e> tr[x].val)</span></span>
<span class="line" data-v-2e65c05e><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e>        x </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-2e65c05e>=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e> tr[x].s[v </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-2e65c05e>&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e> tr[x].val];</span></span>
<span class="line" data-v-2e65c05e><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-2e65c05e>    splay</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e>(x, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-2e65c05e>0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e>);</span></span>
<span class="line" data-v-2e65c05e><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e>}</span></span>
<span class="line" data-v-2e65c05e></span>
<span class="line" data-v-2e65c05e><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-2e65c05e>int</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-2e65c05e> getval</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e>(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-2e65c05e>int</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;" data-v-2e65c05e> k</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e>)</span></span>
<span class="line" data-v-2e65c05e><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e>{</span></span>
<span class="line" data-v-2e65c05e><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-2e65c05e>    int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e> u </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-2e65c05e>=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e> root;</span></span>
<span class="line" data-v-2e65c05e><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-2e65c05e>    while</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e> (</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-2e65c05e>true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e>)</span></span>
<span class="line" data-v-2e65c05e><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e>    {</span></span>
<span class="line" data-v-2e65c05e><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-2e65c05e>        pushdown</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e>(u);</span></span>
<span class="line" data-v-2e65c05e><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-2e65c05e>        if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e> (tr[tr[u].s[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-2e65c05e>0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e>]].size </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-2e65c05e>&gt;=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e> k) u </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-2e65c05e>=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e> tr[u].s[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-2e65c05e>0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e>];</span></span>
<span class="line" data-v-2e65c05e><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-2e65c05e>        else</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-2e65c05e> if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e> (tr[tr[u].s[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-2e65c05e>0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e>]].size </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-2e65c05e>+</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-2e65c05e> 1</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-2e65c05e> ==</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e> k) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-2e65c05e>return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e> u;</span></span>
<span class="line" data-v-2e65c05e><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-2e65c05e>        else</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e> k </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-2e65c05e>-=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e> tr[tr[u].s[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-2e65c05e>0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e>]].size </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-2e65c05e>+</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-2e65c05e> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e>, u </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-2e65c05e>=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e> tr[u].s[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-2e65c05e>1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e>];</span></span>
<span class="line" data-v-2e65c05e><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e>    }</span></span>
<span class="line" data-v-2e65c05e><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-2e65c05e>    return</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-2e65c05e> -</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-2e65c05e>1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e>;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;" data-v-2e65c05e>//找不到返回-1</span></span>
<span class="line" data-v-2e65c05e><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e>}</span></span>
<span class="line" data-v-2e65c05e></span>
<span class="line" data-v-2e65c05e><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-2e65c05e>inline</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-2e65c05e> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-2e65c05e> reverse</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e>(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-2e65c05e>int</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;" data-v-2e65c05e> x</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e>,</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-2e65c05e>int</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;" data-v-2e65c05e> y</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e>){</span></span>
<span class="line" data-v-2e65c05e><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-2e65c05e>	int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e> l </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-2e65c05e>=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e> x,r </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-2e65c05e>=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e> y </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-2e65c05e>+</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-2e65c05e> 2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e>;</span></span>
<span class="line" data-v-2e65c05e><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e>	l</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-2e65c05e>=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-2e65c05e>getval</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e>(l),r</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-2e65c05e>=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-2e65c05e>getval</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e>(r);</span></span>
<span class="line" data-v-2e65c05e><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;" data-v-2e65c05e>    // cout &lt;&lt; l &lt;&lt; &quot; &quot; &lt;&lt; r &lt;&lt; endl;</span></span>
<span class="line" data-v-2e65c05e><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-2e65c05e>	splay</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e>(l,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-2e65c05e>0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e>);</span></span>
<span class="line" data-v-2e65c05e><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-2e65c05e>	splay</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e>(r,l);</span></span>
<span class="line" data-v-2e65c05e><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-2e65c05e>	int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e> pos</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-2e65c05e>=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e>tr[root].s[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-2e65c05e>1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e>];</span></span>
<span class="line" data-v-2e65c05e><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e>	pos</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-2e65c05e>=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e>tr[pos].s[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-2e65c05e>0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e>];</span></span>
<span class="line" data-v-2e65c05e><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e>	tr[pos].tag</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-2e65c05e>^=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-2e65c05e>1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e>;</span></span>
<span class="line" data-v-2e65c05e><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e>}</span></span>
<span class="line" data-v-2e65c05e></span>
<span class="line" data-v-2e65c05e><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-2e65c05e>inline</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-2e65c05e> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-2e65c05e> dfs</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e>(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-2e65c05e>int</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;" data-v-2e65c05e> x</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e>){</span></span>
<span class="line" data-v-2e65c05e><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-2e65c05e>	pushdown</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e>(x);</span></span>
<span class="line" data-v-2e65c05e><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-2e65c05e>	if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e>(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-2e65c05e>ls</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e>(x))</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-2e65c05e>dfs</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e>(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-2e65c05e>ls</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e>(x));</span></span>
<span class="line" data-v-2e65c05e><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-2e65c05e>	if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e>(tr[x].val</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-2e65c05e>!=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-2e65c05e> -</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e>INF </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-2e65c05e>&amp;&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e> tr[x].val</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-2e65c05e>!=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e>INF){</span></span>
<span class="line" data-v-2e65c05e><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e>		cout </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-2e65c05e>&lt;&lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e> tr[x].val </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-2e65c05e>&lt;&lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;" data-v-2e65c05e> &quot; &quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e>;</span></span>
<span class="line" data-v-2e65c05e><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e>	}</span></span>
<span class="line" data-v-2e65c05e><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-2e65c05e>	if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e>(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-2e65c05e>rs</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e>(x))</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-2e65c05e>dfs</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e>(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-2e65c05e>rs</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e>(x));</span></span>
<span class="line" data-v-2e65c05e><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e>}</span></span>
<span class="line" data-v-2e65c05e></span>
<span class="line" data-v-2e65c05e><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-2e65c05e>int</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-2e65c05e> main</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e>(){</span></span>
<span class="line" data-v-2e65c05e><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-2e65c05e>    insert</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e>(INF);</span></span>
<span class="line" data-v-2e65c05e><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-2e65c05e>    insert</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e>(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-2e65c05e>-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e>INF);</span></span>
<span class="line" data-v-2e65c05e><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e>    cin </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-2e65c05e>&gt;&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e> n </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-2e65c05e>&gt;&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e> m;</span></span>
<span class="line" data-v-2e65c05e><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-2e65c05e>    for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e>(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-2e65c05e>int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e> i </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-2e65c05e>=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-2e65c05e> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e>;i </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-2e65c05e>&lt;=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e> n;i</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-2e65c05e>++</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e>) </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-2e65c05e>insert</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e>(i);</span></span>
<span class="line" data-v-2e65c05e><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-2e65c05e>    while</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e>(m</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-2e65c05e>--</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e>){</span></span>
<span class="line" data-v-2e65c05e><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-2e65c05e>        int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e> u,v; cin </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-2e65c05e>&gt;&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e> u </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-2e65c05e>&gt;&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e> v;</span></span>
<span class="line" data-v-2e65c05e><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-2e65c05e>        reverse</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e>(u, v);</span></span>
<span class="line" data-v-2e65c05e><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e>    }</span></span>
<span class="line" data-v-2e65c05e><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-2e65c05e>    dfs</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e>(root);</span></span>
<span class="line" data-v-2e65c05e><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-2e65c05e>    return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-2e65c05e> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e>;</span></span>
<span class="line" data-v-2e65c05e><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-2e65c05e>}</span></span></code></pre></div>`,2),h=[n];function k(l,p,d,E,c,v){return i(),s("div",null,h)}const y=a(t,[["render",k],["__scopeId","data-v-2e65c05e"]]);export{g as __pageData,y as default};
