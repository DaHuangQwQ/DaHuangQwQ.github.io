import{_ as s,c as i,a2 as t,o as d}from"./chunks/framework.BQmytedh.js";const v=JSON.parse('{"title":"P_3369_模板_普通平衡树","description":"","frontmatter":{},"headers":[],"relativePath":"cpp/1984-01/P_3369_模板_普通平衡树.md","filePath":"cpp/1984-01/P_3369_模板_普通平衡树.md"}'),h={name:"cpp/1984-01/P_3369_模板_普通平衡树.md"};function k(n,a,e,l,p,E){return d(),i("div",null,a[0]||(a[0]=[t(`<h1 id="p-3369-模板-普通平衡树" tabindex="-1" data-v-62cade5a>P_3369_模板_普通平衡树 <a class="header-anchor" href="#p-3369-模板-普通平衡树" aria-label="Permalink to &quot;P_3369_模板_普通平衡树&quot;" data-v-62cade5a>​</a></h1><div class="language-cpp vp-adaptive-theme" data-v-62cade5a><button title="Copy Code" class="copy" data-v-62cade5a></button><span class="lang" data-v-62cade5a>cpp</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" data-v-62cade5a><code data-v-62cade5a><span class="line" data-v-62cade5a><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-62cade5a>#include</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;" data-v-62cade5a> &lt;iostream&gt;</span></span>
<span class="line" data-v-62cade5a><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-62cade5a>using</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-62cade5a> namespace</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-62cade5a> std</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a>;</span></span>
<span class="line" data-v-62cade5a></span>
<span class="line" data-v-62cade5a><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-62cade5a>#define</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-62cade5a> ls</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a>(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;" data-v-62cade5a>x</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a>) tr[x].s[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-62cade5a>0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a>]</span></span>
<span class="line" data-v-62cade5a><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-62cade5a>#define</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-62cade5a> rs</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a>(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;" data-v-62cade5a>x</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a>) tr[x].s[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-62cade5a>1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a>]</span></span>
<span class="line" data-v-62cade5a><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-62cade5a>const</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-62cade5a> int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a> N</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-62cade5a>=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-62cade5a>1100010</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a>, INF</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-62cade5a>=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a>(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-62cade5a>1</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-62cade5a>&lt;&lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-62cade5a>30</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a>)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-62cade5a>+</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-62cade5a>1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a>;</span></span>
<span class="line" data-v-62cade5a><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-62cade5a>struct</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-62cade5a> node</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a>{</span></span>
<span class="line" data-v-62cade5a><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-62cade5a>  int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a> s[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-62cade5a>2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a>];</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;" data-v-62cade5a> //左右儿子</span></span>
<span class="line" data-v-62cade5a><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-62cade5a>  int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a> p;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;" data-v-62cade5a> //父亲</span></span>
<span class="line" data-v-62cade5a><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-62cade5a>  int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a> v;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;" data-v-62cade5a> //节点权值</span></span>
<span class="line" data-v-62cade5a><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-62cade5a>  int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a> cnt;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;" data-v-62cade5a> //权值出现次数</span></span>
<span class="line" data-v-62cade5a><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-62cade5a>  int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a> siz;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;" data-v-62cade5a> //子树大小</span></span>
<span class="line" data-v-62cade5a><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-62cade5a>  void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-62cade5a> init</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a>(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-62cade5a>int</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;" data-v-62cade5a> p1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a>,</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-62cade5a>int</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;" data-v-62cade5a> v1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a>){</span></span>
<span class="line" data-v-62cade5a><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a>    p</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-62cade5a>=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a>p1, v</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-62cade5a>=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a>v1;</span></span>
<span class="line" data-v-62cade5a><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a>    cnt</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-62cade5a>=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a>siz</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-62cade5a>=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-62cade5a>1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a>;</span></span>
<span class="line" data-v-62cade5a><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a>  }</span></span>
<span class="line" data-v-62cade5a><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a>}tr[N];</span></span>
<span class="line" data-v-62cade5a><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-62cade5a>int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a> root;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;" data-v-62cade5a> //根节点编号</span></span>
<span class="line" data-v-62cade5a><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-62cade5a>int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a> idx;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;" data-v-62cade5a> //节点个数</span></span>
<span class="line" data-v-62cade5a></span>
<span class="line" data-v-62cade5a><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-62cade5a>void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-62cade5a> pushup</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a>(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-62cade5a>int</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;" data-v-62cade5a> x</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a>){</span></span>
<span class="line" data-v-62cade5a><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a>  tr[x].siz</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-62cade5a>=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a>tr[</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-62cade5a>ls</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a>(x)].siz</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-62cade5a>+</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a>tr[</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-62cade5a>rs</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a>(x)].siz</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-62cade5a>+</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a>tr[x].cnt;</span></span>
<span class="line" data-v-62cade5a><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a>}</span></span>
<span class="line" data-v-62cade5a><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-62cade5a>void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-62cade5a> rotate</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a>(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-62cade5a>int</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;" data-v-62cade5a> x</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a>){</span></span>
<span class="line" data-v-62cade5a><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-62cade5a>  int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a> y</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-62cade5a>=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a>tr[x].p, z</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-62cade5a>=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a>tr[y].p;</span></span>
<span class="line" data-v-62cade5a><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-62cade5a>  int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a> k </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-62cade5a>=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a> tr[y].s[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-62cade5a>1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a>]</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-62cade5a>==</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a>x;</span></span>
<span class="line" data-v-62cade5a><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a>  tr[z].s[tr[z].s[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-62cade5a>1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a>]</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-62cade5a>==</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a>y] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-62cade5a>=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a>x;</span></span>
<span class="line" data-v-62cade5a><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a>  tr[x].p </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-62cade5a>=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a> z;  </span></span>
<span class="line" data-v-62cade5a><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a>  tr[y].s[k] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-62cade5a>=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a> tr[x].s[k</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-62cade5a>^</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-62cade5a>1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a>];</span></span>
<span class="line" data-v-62cade5a><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a>  tr[tr[x].s[k</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-62cade5a>^</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-62cade5a>1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a>]].p </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-62cade5a>=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a> y;</span></span>
<span class="line" data-v-62cade5a><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a>  tr[x].s[k</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-62cade5a>^</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-62cade5a>1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a>] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-62cade5a>=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a> y;</span></span>
<span class="line" data-v-62cade5a><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a>  tr[y].p </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-62cade5a>=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a> x;</span></span>
<span class="line" data-v-62cade5a><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-62cade5a>  pushup</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a>(y), </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-62cade5a>pushup</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a>(x);</span></span>
<span class="line" data-v-62cade5a><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a>}</span></span>
<span class="line" data-v-62cade5a><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-62cade5a>void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-62cade5a> splay</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a>(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-62cade5a>int</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;" data-v-62cade5a> x</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a>, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-62cade5a>int</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;" data-v-62cade5a> k</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a>){</span></span>
<span class="line" data-v-62cade5a><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-62cade5a>  while</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a>(tr[x].p</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-62cade5a>!=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a>k){</span></span>
<span class="line" data-v-62cade5a><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-62cade5a>    int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a> y</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-62cade5a>=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a>tr[x].p, z</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-62cade5a>=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a>tr[y].p;</span></span>
<span class="line" data-v-62cade5a><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-62cade5a>    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a>(z</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-62cade5a>!=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a>k)</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;" data-v-62cade5a>   // 折转底，直转中</span></span>
<span class="line" data-v-62cade5a><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a>      (</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-62cade5a>ls</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a>(y)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-62cade5a>==</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a>x)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-62cade5a>^</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a>(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-62cade5a>ls</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a>(z)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-62cade5a>==</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a>y)</span></span>
<span class="line" data-v-62cade5a><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-62cade5a>        ?</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-62cade5a> rotate</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a>(x) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-62cade5a>:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-62cade5a> rotate</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a>(y);</span></span>
<span class="line" data-v-62cade5a><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-62cade5a>    rotate</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a>(x);</span></span>
<span class="line" data-v-62cade5a><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a>  }</span></span>
<span class="line" data-v-62cade5a><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-62cade5a>  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a>(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-62cade5a>!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a>k) root</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-62cade5a>=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a>x;</span></span>
<span class="line" data-v-62cade5a><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a>}</span></span>
<span class="line" data-v-62cade5a><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-62cade5a>void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-62cade5a> insert</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a>(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-62cade5a>int</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;" data-v-62cade5a> v</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a>){</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;" data-v-62cade5a> //插入</span></span>
<span class="line" data-v-62cade5a><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-62cade5a>  int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a> x</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-62cade5a>=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a>root, p</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-62cade5a>=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-62cade5a>0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a>;</span></span>
<span class="line" data-v-62cade5a><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-62cade5a>  while</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a>(x </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-62cade5a>&amp;&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a> tr[x].v</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-62cade5a>!=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a>v)</span></span>
<span class="line" data-v-62cade5a><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a>    p</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-62cade5a>=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a>x, x</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-62cade5a>=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a>tr[x].s[v</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-62cade5a>&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a>tr[x].v];</span></span>
<span class="line" data-v-62cade5a><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-62cade5a>  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a>(x) tr[x].cnt</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-62cade5a>++</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a>;</span></span>
<span class="line" data-v-62cade5a><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-62cade5a>  else</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a>{</span></span>
<span class="line" data-v-62cade5a><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a>    x</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-62cade5a>=++</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a>idx;</span></span>
<span class="line" data-v-62cade5a><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-62cade5a>    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a>(p) tr[p].s[v</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-62cade5a>&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a>tr[p].v]</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-62cade5a>=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a>x;</span></span>
<span class="line" data-v-62cade5a><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a>    tr[x].</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-62cade5a>init</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a>(p,v);</span></span>
<span class="line" data-v-62cade5a><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a>  }</span></span>
<span class="line" data-v-62cade5a><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-62cade5a>  splay</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a>(x, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-62cade5a>0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a>);</span></span>
<span class="line" data-v-62cade5a><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a>}</span></span>
<span class="line" data-v-62cade5a><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-62cade5a>void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-62cade5a> find</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a>(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-62cade5a>int</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;" data-v-62cade5a> v</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a>){</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;" data-v-62cade5a> //找到v并转到根</span></span>
<span class="line" data-v-62cade5a><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-62cade5a>  int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a> x</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-62cade5a>=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a>root;</span></span>
<span class="line" data-v-62cade5a><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-62cade5a>  while</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a>(tr[x].s[v</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-62cade5a>&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a>tr[x].v]</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-62cade5a>&amp;&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a>v</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-62cade5a>!=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a>tr[x].v) </span></span>
<span class="line" data-v-62cade5a><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a>    x</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-62cade5a>=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a>tr[x].s[v</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-62cade5a>&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a>tr[x].v]; </span></span>
<span class="line" data-v-62cade5a><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-62cade5a>  splay</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a>(x, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-62cade5a>0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a>);</span></span>
<span class="line" data-v-62cade5a><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a>}</span></span>
<span class="line" data-v-62cade5a><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-62cade5a>int</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-62cade5a> getpre</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a>(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-62cade5a>int</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;" data-v-62cade5a> v</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a>){</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;" data-v-62cade5a> //前驱</span></span>
<span class="line" data-v-62cade5a><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-62cade5a>  find</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a>(v);</span></span>
<span class="line" data-v-62cade5a><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-62cade5a>  int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a> x</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-62cade5a>=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a>root;</span></span>
<span class="line" data-v-62cade5a><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-62cade5a>  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a>(tr[x].v</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-62cade5a>&lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a>v) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-62cade5a>return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a> x;</span></span>
<span class="line" data-v-62cade5a><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a>  x</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-62cade5a>=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-62cade5a>ls</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a>(x);</span></span>
<span class="line" data-v-62cade5a><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-62cade5a>  while</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a>(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-62cade5a>rs</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a>(x)) x</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-62cade5a>=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-62cade5a>rs</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a>(x);</span></span>
<span class="line" data-v-62cade5a><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-62cade5a>  splay</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a>(x, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-62cade5a>0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a>);</span></span>
<span class="line" data-v-62cade5a><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-62cade5a>  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a> x;</span></span>
<span class="line" data-v-62cade5a><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a>}</span></span>
<span class="line" data-v-62cade5a><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-62cade5a>int</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-62cade5a> getsuc</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a>(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-62cade5a>int</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;" data-v-62cade5a> v</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a>){</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;" data-v-62cade5a> //后继</span></span>
<span class="line" data-v-62cade5a><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-62cade5a>  find</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a>(v);</span></span>
<span class="line" data-v-62cade5a><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-62cade5a>  int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a> x</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-62cade5a>=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a>root;</span></span>
<span class="line" data-v-62cade5a><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-62cade5a>  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a>(tr[x].v</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-62cade5a>&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a>v) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-62cade5a>return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a> x;</span></span>
<span class="line" data-v-62cade5a><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a>  x</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-62cade5a>=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-62cade5a>rs</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a>(x);</span></span>
<span class="line" data-v-62cade5a><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-62cade5a>  while</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a>(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-62cade5a>ls</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a>(x)) x</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-62cade5a>=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-62cade5a>ls</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a>(x);</span></span>
<span class="line" data-v-62cade5a><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-62cade5a>  splay</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a>(x, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-62cade5a>0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a>);</span></span>
<span class="line" data-v-62cade5a><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-62cade5a>  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a> x;</span></span>
<span class="line" data-v-62cade5a><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a>}</span></span>
<span class="line" data-v-62cade5a><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-62cade5a>void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-62cade5a> del</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a>(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-62cade5a>int</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;" data-v-62cade5a> v</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a>){</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;" data-v-62cade5a> //删除</span></span>
<span class="line" data-v-62cade5a><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-62cade5a>  int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a> pre</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-62cade5a>=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-62cade5a>getpre</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a>(v);</span></span>
<span class="line" data-v-62cade5a><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-62cade5a>  int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a> suc</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-62cade5a>=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-62cade5a>getsuc</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a>(v);</span></span>
<span class="line" data-v-62cade5a><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-62cade5a>  splay</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a>(pre,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-62cade5a>0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a>), </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-62cade5a>splay</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a>(suc,pre);</span></span>
<span class="line" data-v-62cade5a><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-62cade5a>  int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a> del</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-62cade5a>=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a>tr[suc].s[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-62cade5a>0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a>];</span></span>
<span class="line" data-v-62cade5a><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-62cade5a>  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a>(tr[del].cnt</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-62cade5a>&gt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-62cade5a>1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a>)</span></span>
<span class="line" data-v-62cade5a><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a>    tr[del].cnt</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-62cade5a>--</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a>, </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-62cade5a>splay</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a>(del,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-62cade5a>0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a>);</span></span>
<span class="line" data-v-62cade5a><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-62cade5a>  else</span></span>
<span class="line" data-v-62cade5a><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a>    tr[suc].s[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-62cade5a>0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a>]</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-62cade5a>=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-62cade5a>0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a>, </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-62cade5a>splay</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a>(suc,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-62cade5a>0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a>);</span></span>
<span class="line" data-v-62cade5a><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a>}</span></span>
<span class="line" data-v-62cade5a><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-62cade5a>int</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-62cade5a> getrank</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a>(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-62cade5a>int</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;" data-v-62cade5a> v</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a>){</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;" data-v-62cade5a> //排名</span></span>
<span class="line" data-v-62cade5a><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-62cade5a>  insert</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a>(v);</span></span>
<span class="line" data-v-62cade5a><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-62cade5a>  int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a> res</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-62cade5a>=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a>tr[tr[root].s[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-62cade5a>0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a>]].siz;</span></span>
<span class="line" data-v-62cade5a><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-62cade5a>  del</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a>(v);</span></span>
<span class="line" data-v-62cade5a><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-62cade5a>  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a> res;</span></span>
<span class="line" data-v-62cade5a><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a>}</span></span>
<span class="line" data-v-62cade5a><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-62cade5a>int</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-62cade5a> getval</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a>(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-62cade5a>int</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;" data-v-62cade5a> k</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a>){</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;" data-v-62cade5a> //数值</span></span>
<span class="line" data-v-62cade5a><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-62cade5a>    int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a> x</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-62cade5a>=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a>root;</span></span>
<span class="line" data-v-62cade5a><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-62cade5a>    while</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a>(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-62cade5a>true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a>){</span></span>
<span class="line" data-v-62cade5a><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-62cade5a>        if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a>(k</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-62cade5a>&lt;=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a>tr[</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-62cade5a>ls</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a>(x)].siz) x</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-62cade5a>=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-62cade5a>ls</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a>(x);</span></span>
<span class="line" data-v-62cade5a><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-62cade5a>        else</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-62cade5a> if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a>(k</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-62cade5a>&lt;=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a>tr[</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-62cade5a>ls</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a>(x)].siz</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-62cade5a>+</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a>tr[x].cnt) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-62cade5a>break</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a>;</span></span>
<span class="line" data-v-62cade5a><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-62cade5a>        else</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a> k</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-62cade5a>-=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a>tr[</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-62cade5a>ls</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a>(x)].siz</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-62cade5a>+</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a>tr[x].cnt, x</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-62cade5a>=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-62cade5a>rs</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a>(x);</span></span>
<span class="line" data-v-62cade5a><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a>    }</span></span>
<span class="line" data-v-62cade5a><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-62cade5a>    splay</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a>(x, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-62cade5a>0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a>);</span></span>
<span class="line" data-v-62cade5a><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-62cade5a>    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a> tr[x].v;</span></span>
<span class="line" data-v-62cade5a><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a>}</span></span>
<span class="line" data-v-62cade5a><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-62cade5a>int</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-62cade5a> main</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a>(){</span></span>
<span class="line" data-v-62cade5a><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-62cade5a>  insert</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a>(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-62cade5a>-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a>INF);</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-62cade5a>insert</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a>(INF);</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;" data-v-62cade5a> //哨兵</span></span>
<span class="line" data-v-62cade5a><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-62cade5a>  int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a> n;</span></span>
<span class="line" data-v-62cade5a><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a>  cin </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-62cade5a>&gt;&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a> n;</span></span>
<span class="line" data-v-62cade5a><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-62cade5a>  while</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a>(n</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-62cade5a>--</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a>){</span></span>
<span class="line" data-v-62cade5a><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-62cade5a>    int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a> op,x; cin </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-62cade5a>&gt;&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a> op </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-62cade5a>&gt;&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a> x;</span></span>
<span class="line" data-v-62cade5a><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-62cade5a>    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a>(op</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-62cade5a>==</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-62cade5a>1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a>) </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-62cade5a>insert</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a>(x);</span></span>
<span class="line" data-v-62cade5a><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-62cade5a>    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a>(op</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-62cade5a>==</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-62cade5a>2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a>) </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-62cade5a>del</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a>(x);</span></span>
<span class="line" data-v-62cade5a><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-62cade5a>    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a>(op</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-62cade5a>==</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-62cade5a>3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a>) cout </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-62cade5a>&lt;&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-62cade5a> getrank</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a>(x) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-62cade5a>&lt;&lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a> endl;</span></span>
<span class="line" data-v-62cade5a><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-62cade5a>    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a>(op</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-62cade5a>==</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-62cade5a>4</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a>) cout </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-62cade5a>&lt;&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-62cade5a> getval</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a>(x</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-62cade5a>+</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-62cade5a>1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a>) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-62cade5a>&lt;&lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a> endl;</span></span>
<span class="line" data-v-62cade5a><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-62cade5a>    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a>(op</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-62cade5a>==</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-62cade5a>5</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a>) cout </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-62cade5a>&lt;&lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a> tr[</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-62cade5a>getpre</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a>(x)].v </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-62cade5a>&lt;&lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a> endl;</span></span>
<span class="line" data-v-62cade5a><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-62cade5a>    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a>(op</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-62cade5a>==</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-62cade5a>6</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a>) cout </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-62cade5a>&lt;&lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a> tr[</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-62cade5a>getsuc</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a>(x)].v </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-62cade5a>&lt;&lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a> endl;</span></span>
<span class="line" data-v-62cade5a><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a>  }</span></span>
<span class="line" data-v-62cade5a><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-62cade5a>  return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-62cade5a> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a>;</span></span>
<span class="line" data-v-62cade5a><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-62cade5a>}</span></span></code></pre></div>`,2)]))}const r=s(h,[["render",k],["__scopeId","data-v-62cade5a"]]);export{v as __pageData,r as default};
