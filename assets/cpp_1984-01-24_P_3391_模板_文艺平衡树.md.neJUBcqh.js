import{_ as a,c as s,o as i,V as e}from"./chunks/framework.jgiY9GFO.js";const g=JSON.parse('{"title":"P_3391_模板_文艺平衡树","description":"","frontmatter":{},"headers":[],"relativePath":"cpp/1984-01-24/P_3391_模板_文艺平衡树.md","filePath":"cpp/1984-01-24/P_3391_模板_文艺平衡树.md"}'),t={name:"cpp/1984-01-24/P_3391_模板_文艺平衡树.md"},n=e(`<h1 id="p-3391-模板-文艺平衡树" tabindex="-1" data-v-676ec3e0>P_3391_模板_文艺平衡树 <a class="header-anchor" href="#p-3391-模板-文艺平衡树" aria-label="Permalink to &quot;P_3391_模板_文艺平衡树&quot;" data-v-676ec3e0>​</a></h1><div class="language-cpp vp-adaptive-theme" data-v-676ec3e0><button title="Copy Code" class="copy" data-v-676ec3e0></button><span class="lang" data-v-676ec3e0>cpp</span><pre class="shiki shiki-themes github-light github-dark vp-code" data-v-676ec3e0><code data-v-676ec3e0><span class="line" data-v-676ec3e0><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-676ec3e0>#include</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;" data-v-676ec3e0> &lt;iostream&gt;</span></span>
<span class="line" data-v-676ec3e0><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-676ec3e0>#define</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-676ec3e0> ll</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-676ec3e0> long</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-676ec3e0> long</span></span>
<span class="line" data-v-676ec3e0><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-676ec3e0>#define</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-676ec3e0> ls</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0>(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;" data-v-676ec3e0>x</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0>) tr[x].s[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-676ec3e0>0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0>]</span></span>
<span class="line" data-v-676ec3e0><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-676ec3e0>#define</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-676ec3e0> rs</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0>(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;" data-v-676ec3e0>x</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0>) tr[x].s[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-676ec3e0>1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0>]</span></span>
<span class="line" data-v-676ec3e0><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-676ec3e0>using</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-676ec3e0> namespace</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-676ec3e0> std</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0>;</span></span>
<span class="line" data-v-676ec3e0><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-676ec3e0>const</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-676ec3e0> int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0> N </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-676ec3e0>=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-676ec3e0> 1000010</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0>,INF</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-676ec3e0>=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0>(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-676ec3e0>1</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-676ec3e0>&lt;&lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-676ec3e0>30</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0>)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-676ec3e0>+</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-676ec3e0>1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0>;</span></span>
<span class="line" data-v-676ec3e0><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-676ec3e0>int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0> n,m, root, idx;</span></span>
<span class="line" data-v-676ec3e0><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-676ec3e0>struct</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-676ec3e0> node</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0>{</span></span>
<span class="line" data-v-676ec3e0><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-676ec3e0>    int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0> s[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-676ec3e0>2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0>];</span></span>
<span class="line" data-v-676ec3e0><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-676ec3e0>    int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0> val, p, cnt, size, tag;</span></span>
<span class="line" data-v-676ec3e0><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-676ec3e0>    void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-676ec3e0> init</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0>(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-676ec3e0>int</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;" data-v-676ec3e0> _p</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0>, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-676ec3e0>int</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;" data-v-676ec3e0> _val</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0>){</span></span>
<span class="line" data-v-676ec3e0><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0>        p </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-676ec3e0>=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0> _p;</span></span>
<span class="line" data-v-676ec3e0><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0>        val </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-676ec3e0>=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0> _val;</span></span>
<span class="line" data-v-676ec3e0><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0>        cnt </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-676ec3e0>=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0> size </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-676ec3e0>=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-676ec3e0> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0>;</span></span>
<span class="line" data-v-676ec3e0><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0>    }</span></span>
<span class="line" data-v-676ec3e0><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0>} tr[N];</span></span>
<span class="line" data-v-676ec3e0></span>
<span class="line" data-v-676ec3e0><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-676ec3e0>inline</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-676ec3e0> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-676ec3e0> pushdown</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0>(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-676ec3e0>int</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;" data-v-676ec3e0> x</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0>){</span></span>
<span class="line" data-v-676ec3e0><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-676ec3e0>    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0>(x</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-676ec3e0>&amp;&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0>tr[x].tag){</span></span>
<span class="line" data-v-676ec3e0><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0>    	tr[</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-676ec3e0>rs</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0>(x)].tag</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-676ec3e0>^=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-676ec3e0>1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0>;</span></span>
<span class="line" data-v-676ec3e0><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0>    	tr[</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-676ec3e0>ls</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0>(x)].tag</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-676ec3e0>^=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-676ec3e0>1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0>;</span></span>
<span class="line" data-v-676ec3e0><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-676ec3e0>    	swap</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0>(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-676ec3e0>rs</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0>(x),</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-676ec3e0>ls</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0>(x));</span></span>
<span class="line" data-v-676ec3e0><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0>    	tr[x].tag</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-676ec3e0>=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-676ec3e0>0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0>;</span></span>
<span class="line" data-v-676ec3e0><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0>    }	</span></span>
<span class="line" data-v-676ec3e0><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0>}</span></span>
<span class="line" data-v-676ec3e0></span>
<span class="line" data-v-676ec3e0><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-676ec3e0>void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-676ec3e0> pushup</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0>(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-676ec3e0>int</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;" data-v-676ec3e0> x</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0>){</span></span>
<span class="line" data-v-676ec3e0><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0>    tr[x].size </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-676ec3e0>=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0> tr[</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-676ec3e0>ls</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0>(x)].size </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-676ec3e0>+</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0> tr[</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-676ec3e0>rs</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0>(x)].size </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-676ec3e0>+</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0> tr[x].cnt;</span></span>
<span class="line" data-v-676ec3e0><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0>}</span></span>
<span class="line" data-v-676ec3e0><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-676ec3e0>void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-676ec3e0> rotate</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0>(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-676ec3e0>int</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;" data-v-676ec3e0> x</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0>){</span></span>
<span class="line" data-v-676ec3e0><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-676ec3e0>    int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0> y </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-676ec3e0>=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0> tr[x].p;</span></span>
<span class="line" data-v-676ec3e0><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-676ec3e0>    int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0> z </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-676ec3e0>=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0> tr[y].p;</span></span>
<span class="line" data-v-676ec3e0><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-676ec3e0>    pushdown</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0>(x),</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-676ec3e0>pushdown</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0>(y);</span></span>
<span class="line" data-v-676ec3e0><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-676ec3e0>    int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0> k </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-676ec3e0>=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-676ec3e0> rs</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0>(y) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-676ec3e0>==</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0> x;</span></span>
<span class="line" data-v-676ec3e0><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0>    tr[z].s[</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-676ec3e0>rs</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0>(z) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-676ec3e0>==</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0> y] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-676ec3e0>=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0> x;</span></span>
<span class="line" data-v-676ec3e0><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0>    tr[x].p </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-676ec3e0>=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0> z;</span></span>
<span class="line" data-v-676ec3e0><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0>    tr[y].s[k] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-676ec3e0>=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0> tr[x].s[k</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-676ec3e0>^</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-676ec3e0>1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0>];</span></span>
<span class="line" data-v-676ec3e0><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0>    tr[tr[x].s[k</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-676ec3e0>^</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-676ec3e0>1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0>]] .p </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-676ec3e0>=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0> y;</span></span>
<span class="line" data-v-676ec3e0><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0>    tr[x].s[k</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-676ec3e0>^</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-676ec3e0>1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0>] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-676ec3e0>=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0> y;</span></span>
<span class="line" data-v-676ec3e0><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0>    tr[y].p </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-676ec3e0>=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0> x;</span></span>
<span class="line" data-v-676ec3e0><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-676ec3e0>    pushup</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0>(y);</span></span>
<span class="line" data-v-676ec3e0><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-676ec3e0>    pushup</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0>(x);</span></span>
<span class="line" data-v-676ec3e0><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0>}</span></span>
<span class="line" data-v-676ec3e0></span>
<span class="line" data-v-676ec3e0><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-676ec3e0>void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-676ec3e0> splay</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0>(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-676ec3e0>int</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;" data-v-676ec3e0> x</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0>, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-676ec3e0>int</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;" data-v-676ec3e0> k</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0>){</span></span>
<span class="line" data-v-676ec3e0><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-676ec3e0>    while</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0>(tr[x].p </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-676ec3e0>!=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0> k){</span></span>
<span class="line" data-v-676ec3e0><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-676ec3e0>        int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0> y </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-676ec3e0>=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0> tr[x].p;</span></span>
<span class="line" data-v-676ec3e0><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-676ec3e0>        int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0> z </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-676ec3e0>=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0> tr[y].p;</span></span>
<span class="line" data-v-676ec3e0><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-676ec3e0>        if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0>(z </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-676ec3e0>!=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0> k)</span></span>
<span class="line" data-v-676ec3e0><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0>            (</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-676ec3e0>ls</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0>(y) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-676ec3e0>==</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0> x) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-676ec3e0>^</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0> (</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-676ec3e0>ls</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0>(z) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-676ec3e0>==</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0> y) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-676ec3e0>?</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-676ec3e0> rotate</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0>(x) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-676ec3e0>:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-676ec3e0> rotate</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0>(y);</span></span>
<span class="line" data-v-676ec3e0><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-676ec3e0>        rotate</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0>(x);</span></span>
<span class="line" data-v-676ec3e0><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0>    }</span></span>
<span class="line" data-v-676ec3e0><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-676ec3e0>    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0>(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-676ec3e0>!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0>k) root </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-676ec3e0>=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0> x;</span></span>
<span class="line" data-v-676ec3e0><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0>}</span></span>
<span class="line" data-v-676ec3e0></span>
<span class="line" data-v-676ec3e0><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-676ec3e0>void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-676ec3e0> insert</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0>(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-676ec3e0>int</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;" data-v-676ec3e0> v</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0>){</span></span>
<span class="line" data-v-676ec3e0><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-676ec3e0>    int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0> x </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-676ec3e0>=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0> root, p </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-676ec3e0>=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-676ec3e0> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0>;</span></span>
<span class="line" data-v-676ec3e0><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-676ec3e0>    while</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0>(x </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-676ec3e0>&amp;&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0> tr[x].val </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-676ec3e0>!=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0> v){</span></span>
<span class="line" data-v-676ec3e0><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0>        p </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-676ec3e0>=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0> x;</span></span>
<span class="line" data-v-676ec3e0><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0>        x </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-676ec3e0>=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0> tr[x].s[v </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-676ec3e0>&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0> tr[x].val];</span></span>
<span class="line" data-v-676ec3e0><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0>    }</span></span>
<span class="line" data-v-676ec3e0><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-676ec3e0>    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0>(x) tr[x].cnt</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-676ec3e0>++</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0>;</span></span>
<span class="line" data-v-676ec3e0><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-676ec3e0>    else</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0>{</span></span>
<span class="line" data-v-676ec3e0><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0>        x </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-676ec3e0>=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-676ec3e0> ++</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0>idx;</span></span>
<span class="line" data-v-676ec3e0><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-676ec3e0>        if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0>(p) tr[p].s[v </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-676ec3e0>&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0> tr[p].val] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-676ec3e0>=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0> x;</span></span>
<span class="line" data-v-676ec3e0><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0>        tr[x].</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-676ec3e0>init</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0>(p,v);</span></span>
<span class="line" data-v-676ec3e0><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0>    }</span></span>
<span class="line" data-v-676ec3e0><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-676ec3e0>    splay</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0>(x, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-676ec3e0>0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0>);</span></span>
<span class="line" data-v-676ec3e0><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0>}</span></span>
<span class="line" data-v-676ec3e0></span>
<span class="line" data-v-676ec3e0><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-676ec3e0>void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-676ec3e0> find</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0>(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-676ec3e0>int</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;" data-v-676ec3e0> v</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0>){</span></span>
<span class="line" data-v-676ec3e0><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-676ec3e0>    int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0> x </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-676ec3e0>=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0> root;</span></span>
<span class="line" data-v-676ec3e0><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-676ec3e0>    while</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0>(tr[x].s[v </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-676ec3e0>&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0> tr[x].val] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-676ec3e0>&amp;&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0> v </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-676ec3e0>!=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0> tr[x].val)</span></span>
<span class="line" data-v-676ec3e0><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0>        x </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-676ec3e0>=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0> tr[x].s[v </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-676ec3e0>&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0> tr[x].val];</span></span>
<span class="line" data-v-676ec3e0><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-676ec3e0>    splay</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0>(x, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-676ec3e0>0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0>);</span></span>
<span class="line" data-v-676ec3e0><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0>}</span></span>
<span class="line" data-v-676ec3e0></span>
<span class="line" data-v-676ec3e0><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-676ec3e0>int</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-676ec3e0> getval</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0>(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-676ec3e0>int</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;" data-v-676ec3e0> k</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0>)</span></span>
<span class="line" data-v-676ec3e0><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0>{</span></span>
<span class="line" data-v-676ec3e0><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-676ec3e0>    int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0> u </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-676ec3e0>=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0> root;</span></span>
<span class="line" data-v-676ec3e0><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-676ec3e0>    while</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0> (</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-676ec3e0>true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0>)</span></span>
<span class="line" data-v-676ec3e0><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0>    {</span></span>
<span class="line" data-v-676ec3e0><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-676ec3e0>        pushdown</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0>(u);</span></span>
<span class="line" data-v-676ec3e0><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-676ec3e0>        if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0> (tr[tr[u].s[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-676ec3e0>0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0>]].size </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-676ec3e0>&gt;=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0> k) u </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-676ec3e0>=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0> tr[u].s[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-676ec3e0>0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0>];</span></span>
<span class="line" data-v-676ec3e0><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-676ec3e0>        else</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-676ec3e0> if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0> (tr[tr[u].s[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-676ec3e0>0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0>]].size </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-676ec3e0>+</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-676ec3e0> 1</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-676ec3e0> ==</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0> k) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-676ec3e0>return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0> u;</span></span>
<span class="line" data-v-676ec3e0><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-676ec3e0>        else</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0> k </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-676ec3e0>-=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0> tr[tr[u].s[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-676ec3e0>0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0>]].size </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-676ec3e0>+</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-676ec3e0> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0>, u </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-676ec3e0>=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0> tr[u].s[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-676ec3e0>1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0>];</span></span>
<span class="line" data-v-676ec3e0><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0>    }</span></span>
<span class="line" data-v-676ec3e0><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-676ec3e0>    return</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-676ec3e0> -</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-676ec3e0>1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0>;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;" data-v-676ec3e0>//找不到返回-1</span></span>
<span class="line" data-v-676ec3e0><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0>}</span></span>
<span class="line" data-v-676ec3e0></span>
<span class="line" data-v-676ec3e0><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-676ec3e0>inline</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-676ec3e0> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-676ec3e0> reverse</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0>(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-676ec3e0>int</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;" data-v-676ec3e0> x</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0>,</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-676ec3e0>int</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;" data-v-676ec3e0> y</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0>){</span></span>
<span class="line" data-v-676ec3e0><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-676ec3e0>	int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0> l </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-676ec3e0>=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0> x,r </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-676ec3e0>=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0> y </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-676ec3e0>+</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-676ec3e0> 2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0>;</span></span>
<span class="line" data-v-676ec3e0><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0>	l</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-676ec3e0>=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-676ec3e0>getval</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0>(l),r</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-676ec3e0>=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-676ec3e0>getval</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0>(r);</span></span>
<span class="line" data-v-676ec3e0><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;" data-v-676ec3e0>    // cout &lt;&lt; l &lt;&lt; &quot; &quot; &lt;&lt; r &lt;&lt; endl;</span></span>
<span class="line" data-v-676ec3e0><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-676ec3e0>	splay</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0>(l,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-676ec3e0>0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0>);</span></span>
<span class="line" data-v-676ec3e0><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-676ec3e0>	splay</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0>(r,l);</span></span>
<span class="line" data-v-676ec3e0><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-676ec3e0>	int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0> pos</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-676ec3e0>=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0>tr[root].s[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-676ec3e0>1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0>];</span></span>
<span class="line" data-v-676ec3e0><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0>	pos</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-676ec3e0>=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0>tr[pos].s[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-676ec3e0>0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0>];</span></span>
<span class="line" data-v-676ec3e0><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0>	tr[pos].tag</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-676ec3e0>^=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-676ec3e0>1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0>;</span></span>
<span class="line" data-v-676ec3e0><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0>}</span></span>
<span class="line" data-v-676ec3e0></span>
<span class="line" data-v-676ec3e0><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-676ec3e0>inline</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-676ec3e0> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-676ec3e0> dfs</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0>(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-676ec3e0>int</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;" data-v-676ec3e0> x</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0>){</span></span>
<span class="line" data-v-676ec3e0><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-676ec3e0>	pushdown</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0>(x);</span></span>
<span class="line" data-v-676ec3e0><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-676ec3e0>	if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0>(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-676ec3e0>ls</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0>(x))</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-676ec3e0>dfs</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0>(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-676ec3e0>ls</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0>(x));</span></span>
<span class="line" data-v-676ec3e0><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-676ec3e0>	if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0>(tr[x].val</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-676ec3e0>!=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-676ec3e0> -</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0>INF </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-676ec3e0>&amp;&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0> tr[x].val</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-676ec3e0>!=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0>INF){</span></span>
<span class="line" data-v-676ec3e0><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0>		cout </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-676ec3e0>&lt;&lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0> tr[x].val </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-676ec3e0>&lt;&lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;" data-v-676ec3e0> &quot; &quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0>;</span></span>
<span class="line" data-v-676ec3e0><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0>	}</span></span>
<span class="line" data-v-676ec3e0><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-676ec3e0>	if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0>(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-676ec3e0>rs</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0>(x))</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-676ec3e0>dfs</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0>(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-676ec3e0>rs</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0>(x));</span></span>
<span class="line" data-v-676ec3e0><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0>}</span></span>
<span class="line" data-v-676ec3e0></span>
<span class="line" data-v-676ec3e0><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-676ec3e0>int</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-676ec3e0> main</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0>(){</span></span>
<span class="line" data-v-676ec3e0><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-676ec3e0>    insert</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0>(INF);</span></span>
<span class="line" data-v-676ec3e0><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-676ec3e0>    insert</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0>(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-676ec3e0>-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0>INF);</span></span>
<span class="line" data-v-676ec3e0><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0>    cin </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-676ec3e0>&gt;&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0> n </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-676ec3e0>&gt;&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0> m;</span></span>
<span class="line" data-v-676ec3e0><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-676ec3e0>    for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0>(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-676ec3e0>int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0> i </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-676ec3e0>=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-676ec3e0> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0>;i </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-676ec3e0>&lt;=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0> n;i</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-676ec3e0>++</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0>) </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-676ec3e0>insert</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0>(i);</span></span>
<span class="line" data-v-676ec3e0><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-676ec3e0>    while</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0>(m</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-676ec3e0>--</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0>){</span></span>
<span class="line" data-v-676ec3e0><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-676ec3e0>        int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0> u,v; cin </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-676ec3e0>&gt;&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0> u </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-676ec3e0>&gt;&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0> v;</span></span>
<span class="line" data-v-676ec3e0><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-676ec3e0>        reverse</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0>(u, v);</span></span>
<span class="line" data-v-676ec3e0><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0>    }</span></span>
<span class="line" data-v-676ec3e0><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-676ec3e0>    dfs</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0>(root);</span></span>
<span class="line" data-v-676ec3e0><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-676ec3e0>    return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-676ec3e0> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0>;</span></span>
<span class="line" data-v-676ec3e0><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-676ec3e0>}</span></span></code></pre></div>`,2),h=[n];function k(l,p,d,E,c,v){return i(),s("div",null,h)}const y=a(t,[["render",k],["__scopeId","data-v-676ec3e0"]]);export{g as __pageData,y as default};
