import{_ as a,c as s,o as i,V as t}from"./chunks/framework.jgiY9GFO.js";const y=JSON.parse('{"title":"P_3369_模板_普通平衡树","description":"","frontmatter":{},"headers":[],"relativePath":"cpp/1984-01-24/P_3369_模板_普通平衡树.md","filePath":"cpp/1984-01-24/P_3369_模板_普通平衡树.md"}'),d={name:"cpp/1984-01-24/P_3369_模板_普通平衡树.md"},h=t(`<h1 id="p-3369-模板-普通平衡树" tabindex="-1" data-v-a268a71d>P_3369_模板_普通平衡树 <a class="header-anchor" href="#p-3369-模板-普通平衡树" aria-label="Permalink to &quot;P_3369_模板_普通平衡树&quot;" data-v-a268a71d>​</a></h1><div class="language-cpp vp-adaptive-theme" data-v-a268a71d><button title="Copy Code" class="copy" data-v-a268a71d></button><span class="lang" data-v-a268a71d>cpp</span><pre class="shiki shiki-themes github-light github-dark vp-code" data-v-a268a71d><code data-v-a268a71d><span class="line" data-v-a268a71d><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-a268a71d>#include</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;" data-v-a268a71d> &lt;iostream&gt;</span></span>
<span class="line" data-v-a268a71d><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-a268a71d>using</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-a268a71d> namespace</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-a268a71d> std</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d>;</span></span>
<span class="line" data-v-a268a71d></span>
<span class="line" data-v-a268a71d><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-a268a71d>#define</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-a268a71d> ls</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d>(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;" data-v-a268a71d>x</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d>) tr[x].s[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-a268a71d>0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d>]</span></span>
<span class="line" data-v-a268a71d><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-a268a71d>#define</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-a268a71d> rs</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d>(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;" data-v-a268a71d>x</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d>) tr[x].s[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-a268a71d>1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d>]</span></span>
<span class="line" data-v-a268a71d><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-a268a71d>const</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-a268a71d> int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d> N</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-a268a71d>=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-a268a71d>1100010</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d>, INF</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-a268a71d>=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d>(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-a268a71d>1</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-a268a71d>&lt;&lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-a268a71d>30</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d>)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-a268a71d>+</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-a268a71d>1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d>;</span></span>
<span class="line" data-v-a268a71d><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-a268a71d>struct</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-a268a71d> node</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d>{</span></span>
<span class="line" data-v-a268a71d><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-a268a71d>  int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d> s[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-a268a71d>2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d>];</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;" data-v-a268a71d> //左右儿子</span></span>
<span class="line" data-v-a268a71d><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-a268a71d>  int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d> p;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;" data-v-a268a71d> //父亲</span></span>
<span class="line" data-v-a268a71d><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-a268a71d>  int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d> v;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;" data-v-a268a71d> //节点权值</span></span>
<span class="line" data-v-a268a71d><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-a268a71d>  int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d> cnt;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;" data-v-a268a71d> //权值出现次数</span></span>
<span class="line" data-v-a268a71d><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-a268a71d>  int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d> siz;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;" data-v-a268a71d> //子树大小</span></span>
<span class="line" data-v-a268a71d><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-a268a71d>  void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-a268a71d> init</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d>(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-a268a71d>int</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;" data-v-a268a71d> p1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d>,</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-a268a71d>int</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;" data-v-a268a71d> v1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d>){</span></span>
<span class="line" data-v-a268a71d><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d>    p</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-a268a71d>=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d>p1, v</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-a268a71d>=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d>v1;</span></span>
<span class="line" data-v-a268a71d><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d>    cnt</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-a268a71d>=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d>siz</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-a268a71d>=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-a268a71d>1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d>;</span></span>
<span class="line" data-v-a268a71d><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d>  }</span></span>
<span class="line" data-v-a268a71d><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d>}tr[N];</span></span>
<span class="line" data-v-a268a71d><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-a268a71d>int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d> root;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;" data-v-a268a71d> //根节点编号</span></span>
<span class="line" data-v-a268a71d><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-a268a71d>int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d> idx;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;" data-v-a268a71d> //节点个数</span></span>
<span class="line" data-v-a268a71d></span>
<span class="line" data-v-a268a71d><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-a268a71d>void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-a268a71d> pushup</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d>(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-a268a71d>int</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;" data-v-a268a71d> x</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d>){</span></span>
<span class="line" data-v-a268a71d><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d>  tr[x].siz</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-a268a71d>=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d>tr[</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-a268a71d>ls</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d>(x)].siz</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-a268a71d>+</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d>tr[</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-a268a71d>rs</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d>(x)].siz</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-a268a71d>+</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d>tr[x].cnt;</span></span>
<span class="line" data-v-a268a71d><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d>}</span></span>
<span class="line" data-v-a268a71d><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-a268a71d>void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-a268a71d> rotate</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d>(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-a268a71d>int</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;" data-v-a268a71d> x</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d>){</span></span>
<span class="line" data-v-a268a71d><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-a268a71d>  int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d> y</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-a268a71d>=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d>tr[x].p, z</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-a268a71d>=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d>tr[y].p;</span></span>
<span class="line" data-v-a268a71d><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-a268a71d>  int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d> k </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-a268a71d>=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d> tr[y].s[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-a268a71d>1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d>]</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-a268a71d>==</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d>x;</span></span>
<span class="line" data-v-a268a71d><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d>  tr[z].s[tr[z].s[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-a268a71d>1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d>]</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-a268a71d>==</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d>y] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-a268a71d>=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d>x;</span></span>
<span class="line" data-v-a268a71d><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d>  tr[x].p </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-a268a71d>=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d> z;  </span></span>
<span class="line" data-v-a268a71d><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d>  tr[y].s[k] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-a268a71d>=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d> tr[x].s[k</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-a268a71d>^</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-a268a71d>1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d>];</span></span>
<span class="line" data-v-a268a71d><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d>  tr[tr[x].s[k</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-a268a71d>^</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-a268a71d>1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d>]].p </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-a268a71d>=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d> y;</span></span>
<span class="line" data-v-a268a71d><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d>  tr[x].s[k</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-a268a71d>^</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-a268a71d>1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d>] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-a268a71d>=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d> y;</span></span>
<span class="line" data-v-a268a71d><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d>  tr[y].p </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-a268a71d>=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d> x;</span></span>
<span class="line" data-v-a268a71d><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-a268a71d>  pushup</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d>(y), </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-a268a71d>pushup</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d>(x);</span></span>
<span class="line" data-v-a268a71d><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d>}</span></span>
<span class="line" data-v-a268a71d><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-a268a71d>void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-a268a71d> splay</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d>(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-a268a71d>int</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;" data-v-a268a71d> x</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d>, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-a268a71d>int</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;" data-v-a268a71d> k</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d>){</span></span>
<span class="line" data-v-a268a71d><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-a268a71d>  while</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d>(tr[x].p</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-a268a71d>!=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d>k){</span></span>
<span class="line" data-v-a268a71d><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-a268a71d>    int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d> y</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-a268a71d>=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d>tr[x].p, z</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-a268a71d>=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d>tr[y].p;</span></span>
<span class="line" data-v-a268a71d><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-a268a71d>    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d>(z</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-a268a71d>!=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d>k)</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;" data-v-a268a71d>   // 折转底，直转中</span></span>
<span class="line" data-v-a268a71d><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d>      (</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-a268a71d>ls</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d>(y)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-a268a71d>==</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d>x)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-a268a71d>^</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d>(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-a268a71d>ls</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d>(z)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-a268a71d>==</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d>y)</span></span>
<span class="line" data-v-a268a71d><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-a268a71d>        ?</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-a268a71d> rotate</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d>(x) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-a268a71d>:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-a268a71d> rotate</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d>(y);</span></span>
<span class="line" data-v-a268a71d><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-a268a71d>    rotate</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d>(x);</span></span>
<span class="line" data-v-a268a71d><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d>  }</span></span>
<span class="line" data-v-a268a71d><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-a268a71d>  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d>(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-a268a71d>!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d>k) root</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-a268a71d>=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d>x;</span></span>
<span class="line" data-v-a268a71d><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d>}</span></span>
<span class="line" data-v-a268a71d><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-a268a71d>void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-a268a71d> insert</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d>(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-a268a71d>int</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;" data-v-a268a71d> v</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d>){</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;" data-v-a268a71d> //插入</span></span>
<span class="line" data-v-a268a71d><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-a268a71d>  int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d> x</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-a268a71d>=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d>root, p</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-a268a71d>=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-a268a71d>0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d>;</span></span>
<span class="line" data-v-a268a71d><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-a268a71d>  while</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d>(x </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-a268a71d>&amp;&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d> tr[x].v</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-a268a71d>!=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d>v)</span></span>
<span class="line" data-v-a268a71d><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d>    p</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-a268a71d>=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d>x, x</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-a268a71d>=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d>tr[x].s[v</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-a268a71d>&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d>tr[x].v];</span></span>
<span class="line" data-v-a268a71d><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-a268a71d>  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d>(x) tr[x].cnt</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-a268a71d>++</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d>;</span></span>
<span class="line" data-v-a268a71d><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-a268a71d>  else</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d>{</span></span>
<span class="line" data-v-a268a71d><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d>    x</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-a268a71d>=++</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d>idx;</span></span>
<span class="line" data-v-a268a71d><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-a268a71d>    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d>(p) tr[p].s[v</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-a268a71d>&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d>tr[p].v]</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-a268a71d>=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d>x;</span></span>
<span class="line" data-v-a268a71d><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d>    tr[x].</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-a268a71d>init</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d>(p,v);</span></span>
<span class="line" data-v-a268a71d><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d>  }</span></span>
<span class="line" data-v-a268a71d><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-a268a71d>  splay</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d>(x, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-a268a71d>0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d>);</span></span>
<span class="line" data-v-a268a71d><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d>}</span></span>
<span class="line" data-v-a268a71d><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-a268a71d>void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-a268a71d> find</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d>(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-a268a71d>int</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;" data-v-a268a71d> v</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d>){</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;" data-v-a268a71d> //找到v并转到根</span></span>
<span class="line" data-v-a268a71d><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-a268a71d>  int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d> x</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-a268a71d>=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d>root;</span></span>
<span class="line" data-v-a268a71d><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-a268a71d>  while</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d>(tr[x].s[v</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-a268a71d>&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d>tr[x].v]</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-a268a71d>&amp;&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d>v</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-a268a71d>!=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d>tr[x].v) </span></span>
<span class="line" data-v-a268a71d><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d>    x</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-a268a71d>=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d>tr[x].s[v</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-a268a71d>&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d>tr[x].v]; </span></span>
<span class="line" data-v-a268a71d><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-a268a71d>  splay</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d>(x, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-a268a71d>0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d>);</span></span>
<span class="line" data-v-a268a71d><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d>}</span></span>
<span class="line" data-v-a268a71d><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-a268a71d>int</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-a268a71d> getpre</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d>(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-a268a71d>int</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;" data-v-a268a71d> v</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d>){</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;" data-v-a268a71d> //前驱</span></span>
<span class="line" data-v-a268a71d><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-a268a71d>  find</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d>(v);</span></span>
<span class="line" data-v-a268a71d><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-a268a71d>  int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d> x</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-a268a71d>=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d>root;</span></span>
<span class="line" data-v-a268a71d><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-a268a71d>  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d>(tr[x].v</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-a268a71d>&lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d>v) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-a268a71d>return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d> x;</span></span>
<span class="line" data-v-a268a71d><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d>  x</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-a268a71d>=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-a268a71d>ls</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d>(x);</span></span>
<span class="line" data-v-a268a71d><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-a268a71d>  while</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d>(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-a268a71d>rs</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d>(x)) x</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-a268a71d>=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-a268a71d>rs</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d>(x);</span></span>
<span class="line" data-v-a268a71d><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-a268a71d>  splay</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d>(x, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-a268a71d>0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d>);</span></span>
<span class="line" data-v-a268a71d><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-a268a71d>  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d> x;</span></span>
<span class="line" data-v-a268a71d><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d>}</span></span>
<span class="line" data-v-a268a71d><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-a268a71d>int</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-a268a71d> getsuc</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d>(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-a268a71d>int</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;" data-v-a268a71d> v</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d>){</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;" data-v-a268a71d> //后继</span></span>
<span class="line" data-v-a268a71d><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-a268a71d>  find</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d>(v);</span></span>
<span class="line" data-v-a268a71d><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-a268a71d>  int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d> x</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-a268a71d>=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d>root;</span></span>
<span class="line" data-v-a268a71d><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-a268a71d>  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d>(tr[x].v</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-a268a71d>&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d>v) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-a268a71d>return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d> x;</span></span>
<span class="line" data-v-a268a71d><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d>  x</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-a268a71d>=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-a268a71d>rs</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d>(x);</span></span>
<span class="line" data-v-a268a71d><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-a268a71d>  while</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d>(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-a268a71d>ls</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d>(x)) x</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-a268a71d>=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-a268a71d>ls</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d>(x);</span></span>
<span class="line" data-v-a268a71d><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-a268a71d>  splay</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d>(x, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-a268a71d>0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d>);</span></span>
<span class="line" data-v-a268a71d><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-a268a71d>  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d> x;</span></span>
<span class="line" data-v-a268a71d><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d>}</span></span>
<span class="line" data-v-a268a71d><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-a268a71d>void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-a268a71d> del</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d>(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-a268a71d>int</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;" data-v-a268a71d> v</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d>){</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;" data-v-a268a71d> //删除</span></span>
<span class="line" data-v-a268a71d><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-a268a71d>  int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d> pre</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-a268a71d>=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-a268a71d>getpre</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d>(v);</span></span>
<span class="line" data-v-a268a71d><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-a268a71d>  int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d> suc</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-a268a71d>=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-a268a71d>getsuc</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d>(v);</span></span>
<span class="line" data-v-a268a71d><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-a268a71d>  splay</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d>(pre,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-a268a71d>0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d>), </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-a268a71d>splay</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d>(suc,pre);</span></span>
<span class="line" data-v-a268a71d><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-a268a71d>  int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d> del</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-a268a71d>=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d>tr[suc].s[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-a268a71d>0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d>];</span></span>
<span class="line" data-v-a268a71d><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-a268a71d>  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d>(tr[del].cnt</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-a268a71d>&gt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-a268a71d>1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d>)</span></span>
<span class="line" data-v-a268a71d><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d>    tr[del].cnt</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-a268a71d>--</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d>, </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-a268a71d>splay</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d>(del,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-a268a71d>0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d>);</span></span>
<span class="line" data-v-a268a71d><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-a268a71d>  else</span></span>
<span class="line" data-v-a268a71d><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d>    tr[suc].s[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-a268a71d>0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d>]</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-a268a71d>=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-a268a71d>0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d>, </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-a268a71d>splay</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d>(suc,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-a268a71d>0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d>);</span></span>
<span class="line" data-v-a268a71d><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d>}</span></span>
<span class="line" data-v-a268a71d><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-a268a71d>int</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-a268a71d> getrank</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d>(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-a268a71d>int</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;" data-v-a268a71d> v</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d>){</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;" data-v-a268a71d> //排名</span></span>
<span class="line" data-v-a268a71d><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-a268a71d>  insert</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d>(v);</span></span>
<span class="line" data-v-a268a71d><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-a268a71d>  int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d> res</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-a268a71d>=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d>tr[tr[root].s[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-a268a71d>0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d>]].siz;</span></span>
<span class="line" data-v-a268a71d><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-a268a71d>  del</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d>(v);</span></span>
<span class="line" data-v-a268a71d><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-a268a71d>  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d> res;</span></span>
<span class="line" data-v-a268a71d><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d>}</span></span>
<span class="line" data-v-a268a71d><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-a268a71d>int</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-a268a71d> getval</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d>(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-a268a71d>int</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;" data-v-a268a71d> k</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d>){</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;" data-v-a268a71d> //数值</span></span>
<span class="line" data-v-a268a71d><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-a268a71d>    int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d> x</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-a268a71d>=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d>root;</span></span>
<span class="line" data-v-a268a71d><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-a268a71d>    while</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d>(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-a268a71d>true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d>){</span></span>
<span class="line" data-v-a268a71d><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-a268a71d>        if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d>(k</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-a268a71d>&lt;=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d>tr[</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-a268a71d>ls</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d>(x)].siz) x</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-a268a71d>=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-a268a71d>ls</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d>(x);</span></span>
<span class="line" data-v-a268a71d><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-a268a71d>        else</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-a268a71d> if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d>(k</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-a268a71d>&lt;=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d>tr[</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-a268a71d>ls</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d>(x)].siz</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-a268a71d>+</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d>tr[x].cnt) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-a268a71d>break</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d>;</span></span>
<span class="line" data-v-a268a71d><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-a268a71d>        else</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d> k</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-a268a71d>-=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d>tr[</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-a268a71d>ls</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d>(x)].siz</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-a268a71d>+</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d>tr[x].cnt, x</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-a268a71d>=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-a268a71d>rs</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d>(x);</span></span>
<span class="line" data-v-a268a71d><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d>    }</span></span>
<span class="line" data-v-a268a71d><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-a268a71d>    splay</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d>(x, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-a268a71d>0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d>);</span></span>
<span class="line" data-v-a268a71d><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-a268a71d>    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d> tr[x].v;</span></span>
<span class="line" data-v-a268a71d><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d>}</span></span>
<span class="line" data-v-a268a71d><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-a268a71d>int</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-a268a71d> main</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d>(){</span></span>
<span class="line" data-v-a268a71d><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-a268a71d>  insert</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d>(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-a268a71d>-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d>INF);</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-a268a71d>insert</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d>(INF);</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;" data-v-a268a71d> //哨兵</span></span>
<span class="line" data-v-a268a71d><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-a268a71d>  int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d> n;</span></span>
<span class="line" data-v-a268a71d><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d>  cin </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-a268a71d>&gt;&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d> n;</span></span>
<span class="line" data-v-a268a71d><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-a268a71d>  while</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d>(n</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-a268a71d>--</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d>){</span></span>
<span class="line" data-v-a268a71d><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-a268a71d>    int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d> op,x; cin </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-a268a71d>&gt;&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d> op </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-a268a71d>&gt;&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d> x;</span></span>
<span class="line" data-v-a268a71d><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-a268a71d>    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d>(op</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-a268a71d>==</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-a268a71d>1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d>) </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-a268a71d>insert</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d>(x);</span></span>
<span class="line" data-v-a268a71d><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-a268a71d>    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d>(op</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-a268a71d>==</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-a268a71d>2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d>) </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-a268a71d>del</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d>(x);</span></span>
<span class="line" data-v-a268a71d><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-a268a71d>    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d>(op</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-a268a71d>==</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-a268a71d>3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d>) cout </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-a268a71d>&lt;&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-a268a71d> getrank</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d>(x) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-a268a71d>&lt;&lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d> endl;</span></span>
<span class="line" data-v-a268a71d><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-a268a71d>    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d>(op</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-a268a71d>==</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-a268a71d>4</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d>) cout </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-a268a71d>&lt;&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-a268a71d> getval</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d>(x</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-a268a71d>+</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-a268a71d>1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d>) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-a268a71d>&lt;&lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d> endl;</span></span>
<span class="line" data-v-a268a71d><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-a268a71d>    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d>(op</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-a268a71d>==</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-a268a71d>5</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d>) cout </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-a268a71d>&lt;&lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d> tr[</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-a268a71d>getpre</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d>(x)].v </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-a268a71d>&lt;&lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d> endl;</span></span>
<span class="line" data-v-a268a71d><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-a268a71d>    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d>(op</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-a268a71d>==</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-a268a71d>6</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d>) cout </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-a268a71d>&lt;&lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d> tr[</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-a268a71d>getsuc</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d>(x)].v </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-a268a71d>&lt;&lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d> endl;</span></span>
<span class="line" data-v-a268a71d><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d>  }</span></span>
<span class="line" data-v-a268a71d><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-a268a71d>  return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-a268a71d> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d>;</span></span>
<span class="line" data-v-a268a71d><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-a268a71d>}</span></span></code></pre></div>`,2),k=[h];function n(l,p,E,e,v,r){return i(),s("div",null,k)}const F=a(d,[["render",n],["__scopeId","data-v-a268a71d"]]);export{y as __pageData,F as default};
