import{_ as s,c as i,a2 as t,o as d}from"./chunks/framework.BQmytedh.js";const r=JSON.parse('{"title":"P_3391_模板_文艺平衡树","description":"","frontmatter":{},"headers":[],"relativePath":"cpp/1984-01/P_3391_模板_文艺平衡树.md","filePath":"cpp/1984-01/P_3391_模板_文艺平衡树.md"}'),n={name:"cpp/1984-01/P_3391_模板_文艺平衡树.md"};function h(k,a,l,p,E,e){return d(),i("div",null,a[0]||(a[0]=[t(`<h1 id="p-3391-模板-文艺平衡树" tabindex="-1" data-v-8967d042>P_3391_模板_文艺平衡树 <a class="header-anchor" href="#p-3391-模板-文艺平衡树" aria-label="Permalink to &quot;P_3391_模板_文艺平衡树&quot;" data-v-8967d042>​</a></h1><div class="language-cpp vp-adaptive-theme" data-v-8967d042><button title="Copy Code" class="copy" data-v-8967d042></button><span class="lang" data-v-8967d042>cpp</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" data-v-8967d042><code data-v-8967d042><span class="line" data-v-8967d042><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-8967d042>#include</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;" data-v-8967d042> &lt;iostream&gt;</span></span>
<span class="line" data-v-8967d042><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-8967d042>#define</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-8967d042> ll</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-8967d042> long</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-8967d042> long</span></span>
<span class="line" data-v-8967d042><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-8967d042>#define</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-8967d042> ls</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042>(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;" data-v-8967d042>x</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042>) tr[x].s[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-8967d042>0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042>]</span></span>
<span class="line" data-v-8967d042><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-8967d042>#define</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-8967d042> rs</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042>(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;" data-v-8967d042>x</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042>) tr[x].s[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-8967d042>1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042>]</span></span>
<span class="line" data-v-8967d042><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-8967d042>using</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-8967d042> namespace</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-8967d042> std</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042>;</span></span>
<span class="line" data-v-8967d042><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-8967d042>const</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-8967d042> int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042> N </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-8967d042>=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-8967d042> 1000010</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042>,INF</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-8967d042>=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042>(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-8967d042>1</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-8967d042>&lt;&lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-8967d042>30</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042>)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-8967d042>+</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-8967d042>1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042>;</span></span>
<span class="line" data-v-8967d042><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-8967d042>int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042> n,m, root, idx;</span></span>
<span class="line" data-v-8967d042><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-8967d042>struct</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-8967d042> node</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042>{</span></span>
<span class="line" data-v-8967d042><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-8967d042>    int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042> s[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-8967d042>2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042>];</span></span>
<span class="line" data-v-8967d042><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-8967d042>    int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042> val, p, cnt, size, tag;</span></span>
<span class="line" data-v-8967d042><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-8967d042>    void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-8967d042> init</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042>(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-8967d042>int</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;" data-v-8967d042> _p</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042>, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-8967d042>int</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;" data-v-8967d042> _val</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042>){</span></span>
<span class="line" data-v-8967d042><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042>        p </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-8967d042>=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042> _p;</span></span>
<span class="line" data-v-8967d042><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042>        val </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-8967d042>=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042> _val;</span></span>
<span class="line" data-v-8967d042><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042>        cnt </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-8967d042>=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042> size </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-8967d042>=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-8967d042> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042>;</span></span>
<span class="line" data-v-8967d042><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042>    }</span></span>
<span class="line" data-v-8967d042><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042>} tr[N];</span></span>
<span class="line" data-v-8967d042></span>
<span class="line" data-v-8967d042><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-8967d042>inline</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-8967d042> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-8967d042> pushdown</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042>(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-8967d042>int</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;" data-v-8967d042> x</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042>){</span></span>
<span class="line" data-v-8967d042><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-8967d042>    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042>(x</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-8967d042>&amp;&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042>tr[x].tag){</span></span>
<span class="line" data-v-8967d042><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042>    	tr[</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-8967d042>rs</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042>(x)].tag</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-8967d042>^=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-8967d042>1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042>;</span></span>
<span class="line" data-v-8967d042><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042>    	tr[</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-8967d042>ls</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042>(x)].tag</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-8967d042>^=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-8967d042>1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042>;</span></span>
<span class="line" data-v-8967d042><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-8967d042>    	swap</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042>(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-8967d042>rs</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042>(x),</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-8967d042>ls</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042>(x));</span></span>
<span class="line" data-v-8967d042><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042>    	tr[x].tag</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-8967d042>=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-8967d042>0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042>;</span></span>
<span class="line" data-v-8967d042><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042>    }	</span></span>
<span class="line" data-v-8967d042><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042>}</span></span>
<span class="line" data-v-8967d042></span>
<span class="line" data-v-8967d042><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-8967d042>void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-8967d042> pushup</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042>(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-8967d042>int</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;" data-v-8967d042> x</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042>){</span></span>
<span class="line" data-v-8967d042><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042>    tr[x].size </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-8967d042>=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042> tr[</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-8967d042>ls</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042>(x)].size </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-8967d042>+</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042> tr[</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-8967d042>rs</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042>(x)].size </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-8967d042>+</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042> tr[x].cnt;</span></span>
<span class="line" data-v-8967d042><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042>}</span></span>
<span class="line" data-v-8967d042><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-8967d042>void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-8967d042> rotate</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042>(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-8967d042>int</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;" data-v-8967d042> x</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042>){</span></span>
<span class="line" data-v-8967d042><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-8967d042>    int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042> y </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-8967d042>=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042> tr[x].p;</span></span>
<span class="line" data-v-8967d042><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-8967d042>    int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042> z </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-8967d042>=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042> tr[y].p;</span></span>
<span class="line" data-v-8967d042><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-8967d042>    pushdown</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042>(x),</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-8967d042>pushdown</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042>(y);</span></span>
<span class="line" data-v-8967d042><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-8967d042>    int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042> k </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-8967d042>=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-8967d042> rs</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042>(y) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-8967d042>==</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042> x;</span></span>
<span class="line" data-v-8967d042><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042>    tr[z].s[</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-8967d042>rs</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042>(z) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-8967d042>==</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042> y] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-8967d042>=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042> x;</span></span>
<span class="line" data-v-8967d042><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042>    tr[x].p </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-8967d042>=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042> z;</span></span>
<span class="line" data-v-8967d042><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042>    tr[y].s[k] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-8967d042>=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042> tr[x].s[k</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-8967d042>^</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-8967d042>1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042>];</span></span>
<span class="line" data-v-8967d042><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042>    tr[tr[x].s[k</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-8967d042>^</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-8967d042>1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042>]] .p </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-8967d042>=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042> y;</span></span>
<span class="line" data-v-8967d042><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042>    tr[x].s[k</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-8967d042>^</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-8967d042>1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042>] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-8967d042>=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042> y;</span></span>
<span class="line" data-v-8967d042><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042>    tr[y].p </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-8967d042>=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042> x;</span></span>
<span class="line" data-v-8967d042><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-8967d042>    pushup</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042>(y);</span></span>
<span class="line" data-v-8967d042><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-8967d042>    pushup</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042>(x);</span></span>
<span class="line" data-v-8967d042><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042>}</span></span>
<span class="line" data-v-8967d042></span>
<span class="line" data-v-8967d042><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-8967d042>void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-8967d042> splay</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042>(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-8967d042>int</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;" data-v-8967d042> x</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042>, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-8967d042>int</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;" data-v-8967d042> k</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042>){</span></span>
<span class="line" data-v-8967d042><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-8967d042>    while</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042>(tr[x].p </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-8967d042>!=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042> k){</span></span>
<span class="line" data-v-8967d042><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-8967d042>        int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042> y </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-8967d042>=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042> tr[x].p;</span></span>
<span class="line" data-v-8967d042><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-8967d042>        int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042> z </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-8967d042>=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042> tr[y].p;</span></span>
<span class="line" data-v-8967d042><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-8967d042>        if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042>(z </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-8967d042>!=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042> k)</span></span>
<span class="line" data-v-8967d042><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042>            (</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-8967d042>ls</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042>(y) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-8967d042>==</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042> x) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-8967d042>^</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042> (</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-8967d042>ls</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042>(z) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-8967d042>==</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042> y) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-8967d042>?</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-8967d042> rotate</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042>(x) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-8967d042>:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-8967d042> rotate</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042>(y);</span></span>
<span class="line" data-v-8967d042><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-8967d042>        rotate</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042>(x);</span></span>
<span class="line" data-v-8967d042><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042>    }</span></span>
<span class="line" data-v-8967d042><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-8967d042>    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042>(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-8967d042>!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042>k) root </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-8967d042>=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042> x;</span></span>
<span class="line" data-v-8967d042><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042>}</span></span>
<span class="line" data-v-8967d042></span>
<span class="line" data-v-8967d042><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-8967d042>void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-8967d042> insert</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042>(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-8967d042>int</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;" data-v-8967d042> v</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042>){</span></span>
<span class="line" data-v-8967d042><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-8967d042>    int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042> x </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-8967d042>=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042> root, p </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-8967d042>=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-8967d042> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042>;</span></span>
<span class="line" data-v-8967d042><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-8967d042>    while</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042>(x </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-8967d042>&amp;&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042> tr[x].val </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-8967d042>!=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042> v){</span></span>
<span class="line" data-v-8967d042><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042>        p </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-8967d042>=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042> x;</span></span>
<span class="line" data-v-8967d042><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042>        x </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-8967d042>=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042> tr[x].s[v </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-8967d042>&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042> tr[x].val];</span></span>
<span class="line" data-v-8967d042><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042>    }</span></span>
<span class="line" data-v-8967d042><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-8967d042>    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042>(x) tr[x].cnt</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-8967d042>++</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042>;</span></span>
<span class="line" data-v-8967d042><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-8967d042>    else</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042>{</span></span>
<span class="line" data-v-8967d042><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042>        x </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-8967d042>=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-8967d042> ++</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042>idx;</span></span>
<span class="line" data-v-8967d042><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-8967d042>        if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042>(p) tr[p].s[v </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-8967d042>&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042> tr[p].val] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-8967d042>=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042> x;</span></span>
<span class="line" data-v-8967d042><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042>        tr[x].</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-8967d042>init</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042>(p,v);</span></span>
<span class="line" data-v-8967d042><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042>    }</span></span>
<span class="line" data-v-8967d042><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-8967d042>    splay</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042>(x, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-8967d042>0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042>);</span></span>
<span class="line" data-v-8967d042><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042>}</span></span>
<span class="line" data-v-8967d042></span>
<span class="line" data-v-8967d042><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-8967d042>void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-8967d042> find</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042>(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-8967d042>int</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;" data-v-8967d042> v</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042>){</span></span>
<span class="line" data-v-8967d042><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-8967d042>    int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042> x </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-8967d042>=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042> root;</span></span>
<span class="line" data-v-8967d042><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-8967d042>    while</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042>(tr[x].s[v </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-8967d042>&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042> tr[x].val] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-8967d042>&amp;&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042> v </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-8967d042>!=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042> tr[x].val)</span></span>
<span class="line" data-v-8967d042><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042>        x </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-8967d042>=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042> tr[x].s[v </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-8967d042>&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042> tr[x].val];</span></span>
<span class="line" data-v-8967d042><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-8967d042>    splay</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042>(x, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-8967d042>0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042>);</span></span>
<span class="line" data-v-8967d042><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042>}</span></span>
<span class="line" data-v-8967d042></span>
<span class="line" data-v-8967d042><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-8967d042>int</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-8967d042> getval</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042>(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-8967d042>int</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;" data-v-8967d042> k</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042>)</span></span>
<span class="line" data-v-8967d042><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042>{</span></span>
<span class="line" data-v-8967d042><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-8967d042>    int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042> u </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-8967d042>=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042> root;</span></span>
<span class="line" data-v-8967d042><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-8967d042>    while</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042> (</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-8967d042>true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042>)</span></span>
<span class="line" data-v-8967d042><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042>    {</span></span>
<span class="line" data-v-8967d042><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-8967d042>        pushdown</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042>(u);</span></span>
<span class="line" data-v-8967d042><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-8967d042>        if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042> (tr[tr[u].s[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-8967d042>0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042>]].size </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-8967d042>&gt;=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042> k) u </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-8967d042>=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042> tr[u].s[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-8967d042>0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042>];</span></span>
<span class="line" data-v-8967d042><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-8967d042>        else</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-8967d042> if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042> (tr[tr[u].s[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-8967d042>0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042>]].size </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-8967d042>+</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-8967d042> 1</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-8967d042> ==</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042> k) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-8967d042>return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042> u;</span></span>
<span class="line" data-v-8967d042><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-8967d042>        else</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042> k </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-8967d042>-=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042> tr[tr[u].s[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-8967d042>0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042>]].size </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-8967d042>+</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-8967d042> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042>, u </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-8967d042>=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042> tr[u].s[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-8967d042>1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042>];</span></span>
<span class="line" data-v-8967d042><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042>    }</span></span>
<span class="line" data-v-8967d042><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-8967d042>    return</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-8967d042> -</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-8967d042>1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042>;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;" data-v-8967d042>//找不到返回-1</span></span>
<span class="line" data-v-8967d042><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042>}</span></span>
<span class="line" data-v-8967d042></span>
<span class="line" data-v-8967d042><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-8967d042>inline</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-8967d042> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-8967d042> reverse</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042>(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-8967d042>int</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;" data-v-8967d042> x</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042>,</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-8967d042>int</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;" data-v-8967d042> y</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042>){</span></span>
<span class="line" data-v-8967d042><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-8967d042>	int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042> l </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-8967d042>=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042> x,r </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-8967d042>=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042> y </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-8967d042>+</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-8967d042> 2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042>;</span></span>
<span class="line" data-v-8967d042><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042>	l</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-8967d042>=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-8967d042>getval</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042>(l),r</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-8967d042>=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-8967d042>getval</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042>(r);</span></span>
<span class="line" data-v-8967d042><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;" data-v-8967d042>    // cout &lt;&lt; l &lt;&lt; &quot; &quot; &lt;&lt; r &lt;&lt; endl;</span></span>
<span class="line" data-v-8967d042><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-8967d042>	splay</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042>(l,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-8967d042>0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042>);</span></span>
<span class="line" data-v-8967d042><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-8967d042>	splay</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042>(r,l);</span></span>
<span class="line" data-v-8967d042><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-8967d042>	int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042> pos</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-8967d042>=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042>tr[root].s[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-8967d042>1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042>];</span></span>
<span class="line" data-v-8967d042><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042>	pos</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-8967d042>=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042>tr[pos].s[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-8967d042>0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042>];</span></span>
<span class="line" data-v-8967d042><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042>	tr[pos].tag</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-8967d042>^=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-8967d042>1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042>;</span></span>
<span class="line" data-v-8967d042><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042>}</span></span>
<span class="line" data-v-8967d042></span>
<span class="line" data-v-8967d042><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-8967d042>inline</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-8967d042> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-8967d042> dfs</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042>(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-8967d042>int</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;" data-v-8967d042> x</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042>){</span></span>
<span class="line" data-v-8967d042><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-8967d042>	pushdown</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042>(x);</span></span>
<span class="line" data-v-8967d042><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-8967d042>	if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042>(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-8967d042>ls</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042>(x))</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-8967d042>dfs</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042>(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-8967d042>ls</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042>(x));</span></span>
<span class="line" data-v-8967d042><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-8967d042>	if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042>(tr[x].val</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-8967d042>!=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-8967d042> -</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042>INF </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-8967d042>&amp;&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042> tr[x].val</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-8967d042>!=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042>INF){</span></span>
<span class="line" data-v-8967d042><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042>		cout </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-8967d042>&lt;&lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042> tr[x].val </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-8967d042>&lt;&lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;" data-v-8967d042> &quot; &quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042>;</span></span>
<span class="line" data-v-8967d042><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042>	}</span></span>
<span class="line" data-v-8967d042><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-8967d042>	if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042>(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-8967d042>rs</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042>(x))</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-8967d042>dfs</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042>(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-8967d042>rs</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042>(x));</span></span>
<span class="line" data-v-8967d042><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042>}</span></span>
<span class="line" data-v-8967d042></span>
<span class="line" data-v-8967d042><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-8967d042>int</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-8967d042> main</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042>(){</span></span>
<span class="line" data-v-8967d042><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-8967d042>    insert</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042>(INF);</span></span>
<span class="line" data-v-8967d042><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-8967d042>    insert</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042>(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-8967d042>-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042>INF);</span></span>
<span class="line" data-v-8967d042><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042>    cin </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-8967d042>&gt;&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042> n </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-8967d042>&gt;&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042> m;</span></span>
<span class="line" data-v-8967d042><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-8967d042>    for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042>(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-8967d042>int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042> i </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-8967d042>=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-8967d042> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042>;i </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-8967d042>&lt;=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042> n;i</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-8967d042>++</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042>) </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-8967d042>insert</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042>(i);</span></span>
<span class="line" data-v-8967d042><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-8967d042>    while</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042>(m</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-8967d042>--</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042>){</span></span>
<span class="line" data-v-8967d042><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-8967d042>        int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042> u,v; cin </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-8967d042>&gt;&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042> u </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-8967d042>&gt;&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042> v;</span></span>
<span class="line" data-v-8967d042><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-8967d042>        reverse</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042>(u, v);</span></span>
<span class="line" data-v-8967d042><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042>    }</span></span>
<span class="line" data-v-8967d042><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-8967d042>    dfs</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042>(root);</span></span>
<span class="line" data-v-8967d042><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-8967d042>    return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-8967d042> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042>;</span></span>
<span class="line" data-v-8967d042><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-8967d042>}</span></span></code></pre></div>`,2)]))}const g=s(n,[["render",h],["__scopeId","data-v-8967d042"]]);export{r as __pageData,g as default};
