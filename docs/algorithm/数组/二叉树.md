# 二叉树

## 前序中序构建二叉树

```go
func buildTree(preorder, inorder []int) *TreeNode {
    n := len(preorder)
    if n == 0 { // 空节点
        return nil
    }
    leftSize := slices.Index(inorder, preorder[0]) // 左子树的大小
    left := buildTree(preorder[1:1+leftSize], inorder[:leftSize])
    right := buildTree(preorder[1+leftSize:], inorder[1+leftSize:])
    return &TreeNode{preorder[0], left, right}
}
```

## 后序中序构建二叉树

```go
func buildTree(inorder, postorder []int) *TreeNode {
    n := len(postorder)
    if n == 0 { // 空节点
        return nil
    }
    leftSize := slices.Index(inorder, postorder[n-1]) // 左子树的大小
    left := buildTree(inorder[:leftSize], postorder[:leftSize])
    right := buildTree(inorder[leftSize+1:], postorder[leftSize:n-1])
    return &TreeNode{postorder[n-1], left, right}
}
```

## 中序遍历

补充右侧指针

```go
func connect(root *Node) *Node {
	if root == nil {
        return nil
    }
    q := []*Node{root}
    for len(q) > 0 {
        t := q
        q = nil
        for i, node := range t {
            if i + 1 < len(t) { // 连接同一层的两个相邻节点
                node.Next = t[i + 1]
            }
            if node.Left != nil {
                q = append(q, node.Left)
            }
            if node.Right != nil {
                q = append(q, node.Right)
            }
        }
    }
    return root
}
```

## 二叉树展开成链表

```go
func flatten(root *TreeNode)  {
    var head *TreeNode
    var dfs func(*TreeNode)
    dfs = func(node *TreeNode) {
        if node == nil {
            return
        }
        dfs(node.Right)
        dfs(node.Left)
        node.Left = nil
        node.Right = head
        head = node
    }
    dfs(root)
}
```

## 路径和

```go
func hasPathSum(root *TreeNode, targetSum int) bool {
    if root == nil {
        return false
    }
    targetSum -= root.Val
    if root.Left == root.Right { // 叶子结点
        return targetSum == 0
    }
    return hasPathSum(root.Left, targetSum) || hasPathSum(root.Right, targetSum)
}
```

## 根节点到叶子节点数字之和

```go
func sumNumbers(root *TreeNode) int {
    res := 0
    var dfs func(node *TreeNode, sum int)
    dfs = func(node *TreeNode, sum int) {
        if node == nil {
            return
        }
        sum = sum * 10 + node.Val
        if node.Left == node.Right {
            res += sum
        }
        dfs(node.Left, sum)
        dfs(node.Right, sum)
    }
    dfs(root, 0)
    return res
}
```

