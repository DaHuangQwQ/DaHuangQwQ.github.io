<!DOCTYPE html>
<html lang="en-US" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>分库分表 | hjywiki</title>
    <meta name="description" content="编程笔记">
    <meta name="generator" content="VitePress v1.5.0">
    <link rel="preload stylesheet" href="/assets/style.CneJzl2R.css" as="style">
    <link rel="preload stylesheet" href="/vp-icons.css" as="style">
    
    <script type="module" src="/assets/app.D6TxwT3d.js"></script>
    <link rel="preload" href="/assets/inter-roman-latin.Di8DUHzh.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="modulepreload" href="/assets/chunks/theme.CMLv8rOe.js">
    <link rel="modulepreload" href="/assets/chunks/framework.BQmytedh.js">
    <link rel="modulepreload" href="/assets/labnote_go_分库分表.md.iz_u_R3R.lean.js">
    <script id="check-dark-mode">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-5d98c3a5><!--[--><!--]--><!--[--><span tabindex="-1" data-v-0f60ec36></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-0f60ec36> Skip to content </a><!--]--><!----><header class="VPNav" data-v-5d98c3a5 data-v-ae24b3ad><div class="VPNavBar" data-v-ae24b3ad data-v-6aa21345><div class="wrapper" data-v-6aa21345><div class="container" data-v-6aa21345><div class="title" data-v-6aa21345><div class="VPNavBarTitle has-sidebar" data-v-6aa21345 data-v-1168a8e4><a class="title" href="/" data-v-1168a8e4><!--[--><!--]--><!----><span data-v-1168a8e4>hjywiki</span><!--[--><!--]--></a></div></div><div class="content" data-v-6aa21345><div class="content-body" data-v-6aa21345><!--[--><!--]--><div class="VPNavBarSearch search" data-v-6aa21345><!--[--><!----><div id="local-search"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><span class="vp-icon DocSearch-Search-Icon"></span><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"><kbd class="DocSearch-Button-Key"></kbd><kbd class="DocSearch-Button-Key">K</kbd></span></button></div><!--]--></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-6aa21345 data-v-dc692963><span id="main-nav-aria-label" class="visually-hidden" data-v-dc692963> Main Navigation </span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/system/index.html" tabindex="0" data-v-dc692963 data-v-e56f3d57><!--[--><span data-v-e56f3d57>系统知识</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/labnote/index.html" tabindex="0" data-v-dc692963 data-v-e56f3d57><!--[--><span data-v-e56f3d57>学习笔记</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/algorithm/index.html" tabindex="0" data-v-dc692963 data-v-e56f3d57><!--[--><span data-v-e56f3d57>算法</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/cpp/index.html" tabindex="0" data-v-dc692963 data-v-e56f3d57><!--[--><span data-v-e56f3d57>算法题解</span><!--]--></a><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-6aa21345 data-v-6c893767><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-6c893767 data-v-5337faa4 data-v-1d5665e3><span class="check" data-v-1d5665e3><span class="icon" data-v-1d5665e3><!--[--><span class="vpi-sun sun" data-v-5337faa4></span><span class="vpi-moon moon" data-v-5337faa4></span><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-6aa21345 data-v-0394ad82 data-v-7bc22406><!--[--><a class="VPSocialLink no-icon" href="https://github.com/DaHuangQwQ" aria-label="github" target="_blank" rel="noopener" data-v-7bc22406 data-v-bd121fe5><span class="vpi-social-github"></span></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-6aa21345 data-v-bb2aa2f0 data-v-cf11d7a2><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-cf11d7a2><span class="vpi-more-horizontal icon" data-v-cf11d7a2></span></button><div class="menu" data-v-cf11d7a2><div class="VPMenu" data-v-cf11d7a2 data-v-b98bc113><!----><!--[--><!--[--><!----><div class="group" data-v-bb2aa2f0><div class="item appearance" data-v-bb2aa2f0><p class="label" data-v-bb2aa2f0>Appearance</p><div class="appearance-action" data-v-bb2aa2f0><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-bb2aa2f0 data-v-5337faa4 data-v-1d5665e3><span class="check" data-v-1d5665e3><span class="icon" data-v-1d5665e3><!--[--><span class="vpi-sun sun" data-v-5337faa4></span><span class="vpi-moon moon" data-v-5337faa4></span><!--]--></span></span></button></div></div></div><div class="group" data-v-bb2aa2f0><div class="item social-links" data-v-bb2aa2f0><div class="VPSocialLinks social-links-list" data-v-bb2aa2f0 data-v-7bc22406><!--[--><a class="VPSocialLink no-icon" href="https://github.com/DaHuangQwQ" aria-label="github" target="_blank" rel="noopener" data-v-7bc22406 data-v-bd121fe5><span class="vpi-social-github"></span></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-6aa21345 data-v-e5dd9c1c><span class="container" data-v-e5dd9c1c><span class="top" data-v-e5dd9c1c></span><span class="middle" data-v-e5dd9c1c></span><span class="bottom" data-v-e5dd9c1c></span></span></button></div></div></div></div><div class="divider" data-v-6aa21345><div class="divider-line" data-v-6aa21345></div></div></div><!----></header><div class="VPLocalNav has-sidebar empty" data-v-5d98c3a5 data-v-a6f0e41e><div class="container" data-v-a6f0e41e><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-a6f0e41e><span class="vpi-align-left menu-icon" data-v-a6f0e41e></span><span class="menu-text" data-v-a6f0e41e>Menu</span></button><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-a6f0e41e data-v-17a5e62e><button data-v-17a5e62e>Return to top</button><!----></div></div></div><aside class="VPSidebar" data-v-5d98c3a5 data-v-319d5ca6><div class="curtain" data-v-319d5ca6></div><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-319d5ca6><span class="visually-hidden" id="sidebar-aria-label" data-v-319d5ca6> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="no-transition group" data-v-c40bc020><section class="VPSidebarItem level-0" data-v-c40bc020 data-v-b7550ba0><!----><div class="items" data-v-b7550ba0><!--[--><div class="VPSidebarItem level-1 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/labnote/index.html" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>转 go 语言的学习之路</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-c40bc020><section class="VPSidebarItem level-0 collapsible" data-v-c40bc020 data-v-b7550ba0><div class="item" role="button" tabindex="0" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><h2 class="text" data-v-b7550ba0>vue</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-b7550ba0><span class="vpi-chevron-right caret-icon" data-v-b7550ba0></span></div></div><div class="items" data-v-b7550ba0><!--[--><div class="VPSidebarItem level-1 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/labnote/vue/tools.html" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>tools</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-c40bc020><section class="VPSidebarItem level-0 collapsible has-active" data-v-c40bc020 data-v-b7550ba0><div class="item" role="button" tabindex="0" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><h2 class="text" data-v-b7550ba0>go</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-b7550ba0><span class="vpi-chevron-right caret-icon" data-v-b7550ba0></span></div></div><div class="items" data-v-b7550ba0><!--[--><div class="VPSidebarItem level-1 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/labnote/go/%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1.html" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>负载均衡</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/labnote/go/%E6%9C%8D%E5%8A%A1%E6%B3%A8%E5%86%8C%E4%B8%8E%E5%8F%91%E7%8E%B0.html" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>服务注册与发现</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/labnote/go/%E6%9C%8D%E5%8A%A1%E6%B2%BB%E7%90%86.html" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>服务治理</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/labnote/go/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%90%86%E8%AE%BA%E7%9F%A5%E8%AF%86.html" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>数据库理论知识</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/labnote/go/%E6%94%AF%E4%BB%98%E7%B3%BB%E7%BB%9F.html" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>支付系统</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/labnote/go/%E5%BE%AE%E6%9C%8D%E5%8A%A1.html" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>微服务</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/labnote/go/%E5%88%86%E5%BA%93%E5%88%86%E8%A1%A8.html" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>分库分表</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/labnote/go/%E5%88%86%E5%B8%83%E5%BC%8F%E4%BB%BB%E5%8A%A1%E8%B0%83%E5%BA%A6%E7%B3%BB%E7%BB%9F.html" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>分布式任务调度系统</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/labnote/go/%E4%B8%8D%E5%81%9C%E6%9C%BA%E6%95%B0%E6%8D%AE%E8%BF%81%E7%A7%BB.html" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>不停机数据迁移</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/labnote/go/redis.html" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>redis</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/labnote/go/kafka.html" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>kafka</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/labnote/go/ds.html" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>分布式系统</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/labnote/go/cache.html" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>缓存</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><!--]--><!--[--><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-5d98c3a5 data-v-1428d186><div class="VPDoc has-sidebar has-aside" data-v-1428d186 data-v-39a288b8><!--[--><!--]--><div class="container" data-v-39a288b8><div class="aside" data-v-39a288b8><div class="aside-curtain" data-v-39a288b8></div><div class="aside-container" data-v-39a288b8><div class="aside-content" data-v-39a288b8><div class="VPDocAside" data-v-39a288b8 data-v-3f215769><!--[--><!--]--><!--[--><!--]--><nav aria-labelledby="doc-outline-aria-label" class="VPDocAsideOutline" data-v-3f215769 data-v-a5bbad30><div class="content" data-v-a5bbad30><div class="outline-marker" data-v-a5bbad30></div><div aria-level="2" class="outline-title" id="doc-outline-aria-label" role="heading" data-v-a5bbad30>On this page</div><ul class="VPDocOutlineItem root" data-v-a5bbad30 data-v-b933a997><!--[--><!--]--></ul></div></nav><!--[--><!--]--><div class="spacer" data-v-3f215769></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-39a288b8><div class="content-container" data-v-39a288b8><!--[--><!--]--><main class="main" data-v-39a288b8><div style="position:relative;" class="vp-doc _labnote_go_%E5%88%86%E5%BA%93%E5%88%86%E8%A1%A8" data-v-39a288b8><div><h1 id="分库分表" tabindex="-1">分库分表 <a class="header-anchor" href="#分库分表" aria-label="Permalink to &quot;分库分表&quot;">​</a></h1><h2 id="分区表" tabindex="-1">分区表 <a class="header-anchor" href="#分区表" aria-label="Permalink to &quot;分区表&quot;">​</a></h2><p>MySQL分区 是一种数据库优化的技术，它允许将一个大的表、索引或其子集分割成多个较小的、更易于管理的片段，这些片段称为“分区”。每个分区都可以独立于其他分区进行存储、备份、索引和其他操作。这种技术主要是为了改善大型数据库表的查询性能、维护的方便性以及数据管理效率</p><p>分区技术是将表中的记录分散到不同的物理文件中，即每个分区对应一个.idb文件。这是MySQL 5.1及以后版本支持的一项高级功能，旨在提高大数据表的管理效率和查询性能</p><p>在MySQL中，分区是局部的，意味着数据和索引都存储在各自的分区内。目前，MySQL尚不支持全局分区索引</p><p>分区表，不同的分区建议在不同的磁盘存储上，提升 IO</p><h3 id="使用场景" tabindex="-1">使用场景 <a class="header-anchor" href="#使用场景" aria-label="Permalink to &quot;使用场景&quot;">​</a></h3><ol><li><strong>性能提升</strong></li><li><strong>管理简化</strong></li><li><strong>数据归档和清理</strong></li><li><strong>可扩展性</strong></li></ol><h2 id="分库分表-1" tabindex="-1">分库分表 <a class="header-anchor" href="#分库分表-1" aria-label="Permalink to &quot;分库分表&quot;">​</a></h2><p>为什么要分库分表：遇到了读写瓶颈</p><p>大多数时候读瓶颈是可以通过的分区、加从库来解决的。只有在数据量非常大的时候，这种情况下分区表或者加从库可能效果不太好。比如说数据量大了之后，B+ 树的高度变高了，索引过于庞大以至于没法装进去内存中等。读瓶颈可以通过分表、分库或者同时分库分表来解决。</p><p>而写瓶颈和读瓶颈稍微不同。分区表能够缓解写瓶颈，但是不能彻底解决，而且增加从库毫无效果——因为从库是只用来服务读请求的。因此，写瓶颈只有两条路：一条路是增加硬件资源，也就是更大的内存，更快的磁盘，更快的 CPU；另外一条路就是分库分表。</p><p>而分库或者分表在解决写瓶颈上的效果也是有差异的。分表之后，单表数据量下降，那么写瓶颈会得到缓解，但是也不能彻底解决，因为此时没有分库，所有的写请求还是落到这个数据库实例上，瓶颈依旧在。分库之后，如果这些库还在同一个数据库实例上，那么效果和分表差不多。因此解决写瓶颈最彻底的方案就是<strong>分实例</strong>。也就是部署多个数据库，这样写请求平均分到了多个数据库上，自然就没有写瓶颈的问题了。在最特殊的情况，如果写瓶颈是因为硬件资源带来的，那么这些数据库都要分布在不同的机器上，才能解决问题。</p><p>因此总结下来：</p><ul><li>读瓶颈，可以考虑分区或者加从库，分库分表也能解决问题；</li><li>写瓶颈，加从库毫无效果，分区与分库分表都能缓解，彻底解决要分实例，并且最好不同的数据库实例在不同的机器上；</li></ul><p>很常见的说法是一个表的数据量超过 500w/2000w 就要分库分表，它描述的是现象，本质上就是在这个量级有可能出现了度写瓶颈。记住核心要不要判定分库分表，就始终是四个字：<strong>读写瓶颈</strong>。</p><blockquote><p>读瓶颈，可加从库，可分区，分库分表更加好；写瓶颈，勿加从库，分区分库分表可缓解，彻底解决要分实例</p></blockquote><h3 id="为什么不适用分区表" tabindex="-1">为什么不适用分区表 <a class="header-anchor" href="#为什么不适用分区表" aria-label="Permalink to &quot;为什么不适用分区表&quot;">​</a></h3><p>简单来说：分区表和分库分表都能解决读写瓶颈，但是分库分表在大数据场景、写瓶颈下效果会更好。</p><p>你可以设想，一张表在分区之后，每个分区的数据量都减少了，因此读写效率都能提高，也就是解决了读写瓶颈，或者说至少极大的缓解了读写瓶颈问题。</p><p>但是如果要是数据量非常庞大，以至于单一分区内部都有很多数据，就只能考虑分库分表。而在其中，单纯分表的话，应对写瓶颈的效果是很差的。比如说一张表分了 10 张表，但是都在同一个数据库实例上，那么这个实例的写压力在分表前后并没有多少变化。这种时候就应该分库，并且在分库之后，应该将不同的库放到不同的数据库实例上。</p><p>如果是在聊到了某个业务场景，甚至于直接就是你面试项目里面的某个点的时候，面试官问出了这个问题，那么你就需要扣紧当前的语境、场景来回答。</p><h2 id="怎么解决主键问题" tabindex="-1">怎么解决主键问题 <a class="header-anchor" href="#怎么解决主键问题" aria-label="Permalink to &quot;怎么解决主键问题&quot;">​</a></h2><p>常见的主键解决方案有：</p><ul><li>使用 uuid <ul><li>优点：简单</li><li>缺点：uuid 不是自增的，所以性能比自增主键要差一些；存储成本高，uuid 比一般的自增主键要长；</li></ul></li><li>控制自增步长。举个例子，你分库分表之后总共有 3 张表 A B C，而后你控制步长是 3，而后 A 从 1 开始，生成 1 4 7 10... B 从 2 开始，生成 2 5 8 11... C 从 3 开始，生成 3 6 9 12... <ul><li>优点：简单，单一表内的主键是自增的；</li><li>缺点：如果主键也是分库分表的键，那么扩容会出现问题；性能取决于数据库；</li><li>变种：如果担忧数据库有性能问题，那么可以用 Redis；</li></ul></li><li>雪花算法： <ul><li>优点：高性能，易扩展</li><li>缺点： <ul><li>时钟回拨问题：也就是遇到了所谓的润秒，这个时候生成的 ID 就有可能重复</li><li>非严格自增：即从全局来看，有可能机器序列比较小的反而靠后生成了 id</li></ul></li><li>变种：雪花算法有非常多种变种，核心就是控制雪花算法的不同部分的比特数量</li></ul></li></ul><p>这三种算法也可以看做是全局唯一 ID 生成的解决方案。</p><p>而更加高级的回答，则基本上和《什么是雪花算法》这个部分一致。包括：</p><ul><li>调整雪花算法的不同分段的比特数量</li><li>解决序列号耗尽的问题</li><li>数据偏移（积压） 的问题</li></ul><p>更加高级的亮点，则是落在怎么优化性能上。</p><ol><li>uuid 的优缺点都很明显，优点是极其<strong>简单</strong>，不依赖于任何东西。缺点则是 uuid 不是<strong>自增</strong>的，并且长度比较长，需要比较多的存储空间。</li><li>控制步长的自增主键也很<strong>简单好用</strong>，核心就是每张表从不同的起点开始，按照固定步长来生成主键，这种情况下也不会有冲突，并且在一张表内必然是自增的。缺点则是在扩容的时候会有问题。</li><li>雪花算法性能好，易扩展。核心缺点则是严重依赖于时间戳，不管是服务器时间戳不准确，还是时钟回拨问题，都可能生成重复的 ID。雪花算法的精髓在于，可以根据自己的业务需要灵活设定每一个段。一个典型的例子就是某外卖平台用用户 ID 的后四位来分库分表，于是在订单的主键生成算法里面就用用户的后四位取代了机器序列号，而后在序列号部分则是随机生成。</li></ol><blockquote><p>uuid 不自增，控制步长难扩容，雪花算法靠时间</p></blockquote><p>此外，还有两个问题需要考虑。一个是雪花算法序列号耗尽的问题，这个可以通过增加序列号的比特位来解决，并且正常来说没有什么业务有那么大的并发量。比如说可以通过将时间戳压缩 1 比特，将序列号扩展为 13 比特，那么一毫秒内能产生的 ID 数量就翻了一倍。</p><p>另外一个问题就是 ID 偏移问题。在并发度不高的情况下，很容易出现生成的 ID 的序列号部分都是 1 或者 2这种很小的数字。例如说生成的 ID 全部是 10w001, 10w0002, 11w001, 12w001 这种。解决方案就是可以尝试让序列号从一个随机数开始，例如说在当前毫秒里面从 100 开始，下一毫秒从 200 开始。</p><blockquote><p>序列耗尽加比特，ID 偏移就随机；</p></blockquote><p>在高并发的时候，也要考虑进一步优化生成 ID 的性能。有一些比较常见的优化方案：例如将雪花算法集群独立部署</p><ul><li>批量获取。也就是说，线程（协程）每次获取 ID 不是获取 1 个 ID，而是获取一批 ID，比如说 100 个 ID，而后自己慢慢用这 100 个ID，用完了再去拿下一批；</li><li>提前取。也就是说，如果预测接下来会需要新的 ID，又或者前面一批取过来的 ID 快要用完了，就可以提前去拿 ID；</li><li>singleflight 获取。如果发号器是集中部署的，比如有一台机器专门分发 ID，大家都去那里拿，那么可以在每一个业务实例上使用 singleflight 模式，这样即便一个业务实例有 100 个线程去获取 ID，但是只会派出一个线程去真的获取 ID，这一个线程拿到之后转交给别的线程；</li></ul><blockquote><p>批量取，提前取，一人取</p></blockquote><h3 id="雪花算法" tabindex="-1">雪花算法 <a class="header-anchor" href="#雪花算法" aria-label="Permalink to &quot;雪花算法&quot;">​</a></h3><p>雪花算法常用在分库分表里面生成主键。</p><p>具体来说，雪花算法是通过将一个 64 比特的数字进行分段，每一段有不同的含义：</p><ul><li>1 比特保留</li><li>41 比特用作时间戳，保存的是毫秒数</li><li>10 位机器序列号（机器ID）：这一部分也可以进一步划分，比如说 5 比特用来表达数据中心编号，5 比特用来表达数据中心内部机器的 ID</li><li>12比特序列号：在前面三个部分确定情况下，自增；</li></ul><p>雪花算法的性能非常好，并且非常好扩展，只需要增加机器就能扩展。缺点则是雪花算法生成 ID 在全局并不是严格自增的，典型的场景就是机器序列号小的反而比机器序列号大的后生成 ID。不过这一点问题不大，因为它生成的 ID 可以看做是近似自增的，因此效果并不会比严格自增的主键差很多。</p><p>此外，雪花算法还对时间戳有极强的依赖。这造成两个严重后果：</p><ul><li>如果部署了雪花算法的机器实例的时间戳并不同步，那么产生的 ID 会严重失序；</li><li>如果出现了时钟回拨的情况，例如说典型的处理润秒的情况，就有可能出现重复的 ID；</li></ul><h2 id="读写分离" tabindex="-1">读写分离 <a class="header-anchor" href="#读写分离" aria-label="Permalink to &quot;读写分离&quot;">​</a></h2><p>读写分离是为了减轻主库压力，提高性能，易于横向扩展。</p><p>写走主库，读走从库。反范式则是强制读主库和强制写从路，前者有时候还会用上，后者则几乎不会用到。或者说强制读主库和强制写从库本身就不是一个什么好的实践</p><p>正常来说，在没有使用读写分离的时候，所有的读写请求都是落在主库上的，那么主库的压力就会非常大，进一步影响响应时间</p><p>而后在引入了读写分离之后，主库服务于写请求，从库服务于读请求，那么主库的压力就会大减，响应时间加快。而对于从库来说，只处理读请求，它的性能一般都非常好，能撑住非常高的并发。而如果要是从库也撑不住了，也可以考虑加从库</p><p>在引入读写分离之后，就会遇到新的问题，主从延迟问题。如果一个数据被更新了，还没同步到从库上，那么你此时查询从库读取到的就是老的数据。在这种情况下，就是需要强制指定读请求走主库了</p><p>从我的个人经验来说，我会认为这种需要强制走主库的场景，大部分时候是因为代码没写好。比如说之前遇到过的，更新了数据之后，立刻去查询。而这种代码可以通过在方法之间直接传递更新后的数据来规避后续立刻查询的动作。</p><p>进一步来说，也存在强制走从库的。比如说强制写入一些数据到从库里面，这种一般是发生在修复数据的场景。这种做法就更差了。</p><blockquote><p>主从延迟；主从同步</p></blockquote><p>我之前在做数据库迁移，校验数据的时候，就搞了点小花招。理论上来说，数据校验这个东西只能是通过主库来校验的，毕竟主库和从库之间的数据是存在延迟的。</p><p>但是，在数据迁移的场景下，校验本身也是一个并发很高的操作。所以我就采用了一种折中策略，即在校验的时候优先使用从库的数据来校验。但是如果发现从库的数据不一致，那么就会使用主库的数据进行一个二次校验。这样一来，避免了全部数据校验都通过主库导致主库压力巨大的问题。</p><blockquote><p>数据迁移和数据校验, 主库二次校验机制</p></blockquote><h3 id="怎么在读写分离中-强制-select-使用主库" tabindex="-1">怎么在读写分离中，强制 SELECT 使用主库 <a class="header-anchor" href="#怎么在读写分离中-强制-select-使用主库" aria-label="Permalink to &quot;怎么在读写分离中，强制 SELECT 使用主库&quot;">​</a></h3><p>正常来说，很少有场景会要求 SELECT 走主库。毕竟我们读写分离的目的就是为了让 SELECT 语句走从库，从而降低主库的性能压力。</p><p>只有在担忧主从延迟的场景下，才会强制要求在主库上执行 SELECT 语句。</p><p>一般来说，支持读写分离的中间件都会提供接口来指定某个查询走主库。</p><p>比如说在 JAVA 里面，可能就是按照要求在 Thread Local 里面写入是否使用主库的信息，或者在写数据库查询的时候通过注解来指定使用主库；在 Go 里面就是通过 context.Context 来传递。</p><p>还有一种就是通过在 SQL 的注释里面指定使用主库或者从库。一些分库分表中间件，或者数据库网关就是依赖于解析注释中这些信息来判定要不要强制走主库。</p><p>但是不管怎么说，SELECT 走主库这种用法还是要尽量避免的。</p><p>因为最开始读写分离就是为了降低主库的性能压力。而如果还是要让主库来执行 SELECT 语句，就是放弃了这最大的优势。</p><p>从实践上来说，通过良好设计，或者在应用层面上缓存数据是能够避免 SELECT 走主库的。</p><p>举个例子来说，比如说有些人依赖于数据库来生成更新时间戳，那么为了获得这个时间戳，就必须在 INSERT 或者 UPDATE 之后立刻 SELECT 来获得时间戳，这就不得不走主库。</p><p>那么比较好的做法就是不依赖数据库来生成这种时间戳，而是自己管理，自己生成时间戳，再更新到数据库里面。</p><blockquote><p>优化案例：不停机数据迁移</p></blockquote><h2 id="分库分表中的分页查询" tabindex="-1">分库分表中的分页查询 <a class="header-anchor" href="#分库分表中的分页查询" aria-label="Permalink to &quot;分库分表中的分页查询&quot;">​</a></h2><h3 id="全局方案" tabindex="-1">全局方案 <a class="header-anchor" href="#全局方案" aria-label="Permalink to &quot;全局方案&quot;">​</a></h3><p>全局方案也是大部分分库分表中间件使用的方案。例如说，当搜索的是 SELECT * FROM users LIMIT X, Y。</p><p>那么全局方案会把查询发送到 WHERE 条件计算出来的候选表上（这个例子里面没有 WHERE，所以是广播），但是查询中的 LIMIT X, Y 会被重写为 LIMIT 0, X + Y。而后当全部候选表都返回结果之后，将这些结果进行排序，筛选出 LIMIT X, Y 来。</p><p>这里有一个可以优化的点，即<strong>如果各个表返回的结果已经是有序了，那么计算全局 LIMIT X, Y 的时候，可以使用归并排序</strong>，一边读数据一边排序。如果要是在读数据排序的过程中，就读到了全局的 LIMIT X, Y，那么剩下的所有的结果都可以丢弃了。</p><p>打个比方，就好比我们现在要计算全年级的 20-30 名（LIMIT 20, 10），那么你就需要让每一个班级的班主任，将自己班里的 0-30 名的成绩都提交上来。而后你汇总之后，再从这些人里面筛选出全年级的 20-30 名。之所以必须要各个班主任提交 0-30 名的成绩，是因为有可能全年级的 20-30 都在某个班里，也有可能各个班都有一些。</p><p>这个算法的缺点就是，X 和 Y 任何一个数非常大的时候，都会取过来非常多的数据，对分库分表中间件造成巨大的内存和 CPU 压力。</p><h3 id="二次查询" tabindex="-1">二次查询 <a class="header-anchor" href="#二次查询" aria-label="Permalink to &quot;二次查询&quot;">​</a></h3><p>这个解决思路非常复杂。</p><ul><li>第一步，将 OFFSET 平均分。也就是说，如果你命中了 N 张表，那么就是改写 SQL 为 LIMIT X/N, Y，而后执行查询。</li><li>第二步，取第一步的所有的查询的最小值（min），与<strong>各个表</strong>的结果集中的最大值（max），构造一个 BETWEEN min, max 的查询，再次发到各个表上；</li><li>第三步，将第二步查询到的结果排序</li><li>第四步，计算最小值（min）在全局里面的偏移量。这个很好计算，也就是第二步查询的结果数量减去第一步查询出来的数量机上 OFFSET/N 的值，就是全局偏移量。</li></ul><p>我个人认为，这个算法并没有彻底解决全局方案中的性能问题，但是极大缓解了。不过它和第一种方案比起来，也并不是全方面的占优。在 X 还小的时候，第一种方案少了一次查询，反而更快。但是在 X 很大的时候，那么第二种方案就占优了。</p><p>不过在面试的时候，你还是需要回答这个方案的。很多面试官在这些地方缺乏思考，所以可能会认为这是一个非常好的解决方案，实际上并不是的。</p><h3 id="引入中间表" tabindex="-1">引入中间表 <a class="header-anchor" href="#引入中间表" aria-label="Permalink to &quot;引入中间表&quot;">​</a></h3><p>也就是在全局维护一个中间表，里面有数据的主键，以及排序列。而后你每次分页查询的时候，就先从这里查询。举个例子，假设说你现在的要找最长寿的人，那么就需要维护一个包含两个列的中间表（id, age），每次查询的时候先来这个中间表查询一下，拿到最长寿的人的 ID，再去用户表里面加载完整的数据。</p><p>当然，如果你的主键不是分库分表键，那么你就需要在这个中间表里面加上分库分表键。</p><h3 id="禁用跨页查询" tabindex="-1">禁用跨页查询 <a class="header-anchor" href="#禁用跨页查询" aria-label="Permalink to &quot;禁用跨页查询&quot;">​</a></h3><p>在全局方案里面，你应该注意到，会有性能问题的根源就在于 LIMIT X, Y 需要改写为 LIMIT 0, X+Y，那么不论 X 很大还是 Y 很大，都是要返回巨量数据。而 Y 本身是和业务相关的，因此这个方案的思路就是尝试降低 X。</p><p>于是我们想到，如果要是每次查询 X 都是 0，那么性能就很好了。而要控制 X 是 0，就需要控制住翻页，比如说不允许跨页。那么在连续翻页的情况下，我们可以带上前一页的最大值或者最小值，从而控制住 X。</p><p>举个例子来说，你现在要按照年龄对用户进行排序。假设现在你查询到了最长寿的 10 个人，其中最年轻的那个人是 120 岁，这种时候如果你要查询接下来第二长寿的 10 个人，那么就只需要查询 SELECT * FROM users WHERE age &lt; 120 LIMIT 0, Y。</p><p>如果你允许跨页的时候，你就难以构造出来的 WHERE 里面的 age &lt; 120 这个条件。</p><h3 id="总结" tabindex="-1">总结 <a class="header-anchor" href="#总结" aria-label="Permalink to &quot;总结&quot;">​</a></h3><ul><li>全局方案：XY变 X + Y，内存CPU居高不下，归并排序来优化</li><li>二次查询：X 变 X除N，BETWEEN随其后，额外数据定偏移</li><li>引入中间表</li><li>禁用跨页查询</li></ul><p>从面试的角度来说，对于初中级工程师来说，你能够随便回答出来一种就可以了。但是如果你追求的是高薪岗位，那么最好还是全部记一下。尤其是全局方案和二次查询，你至少要记一个。</p><p>并且，你在这个问题下可以用禁用跨页查询优化性能的案例来刷亮点。虽然全局方案里面提到归并排序也可以优化性能，但是一般分库分表中间件已经做好了。</p><blockquote><p>归并排序优化性能</p><p>XY变 X + Y，内存CPU居高不下，归并排序来优化；X 变 X除N，BETWEEN随其后，额外数据定偏移</p><p>亮点：禁用跨页查询优化性能</p></blockquote><p>简单来说，常见的思路有四种：</p><ul><li>全局方案：也就是将 LIMIT X,Y 改写为 LIMIT 0, X +Y 后，发给 WHERE 命中的表，再将所有的结果进行排序，取全局的 LIMIT X，Y。这个过程可以考虑用归并排序优化。这种解决方案性能比较差，因为不管是 X 大，还是 Y 大，都会产生很多数据，消耗大量 CPU、内存和网络带宽。</li><li>二次查询：也就是将 LIMIT X, Y 改写为 LIMIT X/N, Y，N 是 WHERE 条件命中的表。而后拿到所有返回结果的最小值，和各个表返回的最大值，构建一个 BETWEEN min, max 的查询，而后根据第二次查询比第一次查询多了多少数据，加上 X/N 的值，就是 min 的全局偏移量，再从 min 出发，拿到全局的 LIMIT X, Y。这种做法同样性能比较差，尤其是查询了两次，会放大数据库的查询流量。</li><li>引入中间表：将排序列、主键放一张表，在这张表里面查询出来全局的 LIMIT X,Y 的数据，再去对应的表里面加载详细数据。这种做法的缺陷就是需要一个额外的表，占用存储。并且在数据量极大的时候，中间表也装不下那么多数据。</li><li>禁用跨页查询：这种措施比较简单，也就是禁止跨页，每次翻页的时候，带上上一页的最大值或者最小值作为 WHERE 条件，这样可以确保 LIMIT X, Y 的时候，X 始终是 0。</li></ul><p>总体来说，分页查询在分库分表里面是比较难解决的。如果不想自己解决的话，也可以考虑换一个存储中间件，比如说换 ES 之类的。</p><blockquote><p>归并排序性能优化</p></blockquote><h2 id="分库分表聚合函数" tabindex="-1">分库分表聚合函数 <a class="header-anchor" href="#分库分表聚合函数" aria-label="Permalink to &quot;分库分表聚合函数&quot;">​</a></h2><p>首先是不带 GROUP BY 的情况。</p><p>第一个是计数 COUNT。注意 COUNT 里面的字段，以及 WHERE 部分都不影响整体算法；</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>// 原语句</span></span>
<span class="line"><span>SELECT COUNT(id) FROM users WHERE XXX;// 注意 WHERE 部分不影响</span></span>
<span class="line"><span></span></span>
<span class="line"><span>// 改写后的语句</span></span>
<span class="line"><span>SELECT COUNT(id) FROM users_0 WHERE XXX; // 假设结果是 cnt0</span></span>
<span class="line"><span>SELECT COUNT(id) FROM users_1 WHERE XXX; // 假设结果是 cnt1</span></span>
<span class="line"><span></span></span>
<span class="line"><span>// 那么最终结果就是 COUNT(id) = cnt0 + cnt1</span></span></code></pre></div><p>而后是求和：</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>SELECT SUM(age) FROM users WHERE XXX;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>// 改写后</span></span>
<span class="line"><span>SELECT SUM(age) FROM users_0 WHERE XXX; // 记为 sum0</span></span>
<span class="line"><span>SELECT SUM(age) FROM users_1 WHERE XXX; // 记为 sum1</span></span>
<span class="line"><span></span></span>
<span class="line"><span>// 最终结果 SUM(age) = sum0 + sum1</span></span></code></pre></div><p>求最大值：</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>SELECT MAX(age) FROM users WHERE XXX;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>// 改写后</span></span>
<span class="line"><span>SELECT MAX(age) FROM users_0 WHERE XXX; // 记为 max0</span></span>
<span class="line"><span>SELECT MAX(age) FROM users_1 WHERE XXX; // 记为 max1</span></span>
<span class="line"><span></span></span>
<span class="line"><span>// 那么最终结果就是 MAX(age) = max(max0, max1)，也就是说从 max0 和 max1 里面再挑一个最大值</span></span></code></pre></div><p>求最小值：</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>SELECT MIN(age) FROM users WHERE XXX;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>// 改写后</span></span>
<span class="line"><span>SELECT MIN(age) FROM users_0 WHERE XXX; // 记为 min0</span></span>
<span class="line"><span>SELECT MIN(age) FROM users_1 WHERE XXX; // 记为 min1</span></span>
<span class="line"><span></span></span>
<span class="line"><span>// 那么最终结果就是 Min(age) = min(min0, min1) 也就是从 min0 和 min1 里面再挑一个最小值</span></span></code></pre></div><p>而求平均值比较特殊，因为改写的时候要改写成为先求 SUM 和 COUNT，再求平均值。</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>SELECT AVG(age) FROM users_0 WHERE XXX; </span></span>
<span class="line"><span></span></span>
<span class="line"><span>// 改写后</span></span>
<span class="line"><span>SELECT SUM(age), COUNT(age) FROM users_0 WHERE XXX; // 记为 sum0, cnt0</span></span>
<span class="line"><span>SELECT SUM(age), COUNT(age) FROM users_1 WHERE XXX; // 记为 sum1, cnt1</span></span>
<span class="line"><span></span></span>
<span class="line"><span>// 最终结果是 (sum0 + sum1)/(cnt0 + cnt1)</span></span></code></pre></div><p>在有 GROUP BY 的情况下，计算方式也是类似的，只不过在改写 SQL 的时候要把 GROUP BY 的列放进去 SELECT 里面。例如说：</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>SELECT COUNT(id) FROM users WHERE XXX GROUP BY age;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>// 改写后</span></span>
<span class="line"><span>SELECT COUNT(id), age FROM users_0 WHERE XXX GROUP BY age; // 假设结果是 (10, 18), (12, 35)</span></span>
<span class="line"><span>SELECT COUNT(id), age FROM users_1 WHERE XXX GROUP BY age; // 假设结果是 (15, 18), (17, 20)</span></span>
<span class="line"><span></span></span>
<span class="line"><span>// 那么最终结果就是 (10 + 15 = 25, 18), (17, 20), (12, 35)</span></span></code></pre></div><p>注意在上面 dbproxy 收到汇总结果之后，再次手动分组（这就是为什么要把 age 加进去 SELECT 里面，因为我们要利用它来分组），而后求和得出最终的计数。</p><p>其它聚合函数也是类似的。</p><p>但是在一种情况下，是不需要做什么的，这种情况就是 GROUP BY 的列恰好是分库分表键。例如说假设 users 按照肤色来分库分表，那么聚合函数处理起来反而比较简单，以 MAX 为例：</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>SELECT MAX(age), color FROM users GROUP BY color;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>// 改写后</span></span>
<span class="line"><span>SELECT MAX(age), color FROM users_0 GROUP BY color; // 假设说这里只有白种人和黑人两条：(100, &#39;white),(110,&#39;black&#39;)</span></span>
<span class="line"><span>SELECT MAX(age), color FROM users_1 GROUP BY color; // 假设说这里只有黄种人：(35, &#39;yellow&#39;)</span></span>
<span class="line"><span></span></span>
<span class="line"><span>// 那么最终结果就是直接组合在一起的三条：(100, &#39;white),(110,&#39;black&#39;),(35, &#39;yellow&#39;)</span></span></code></pre></div><p>所以总结起来就是：COUNT、SUM 二次求和，MIN 、MAX 二次比较，AVG 转 SUM 和 COUNT，GOURP BY 带分库分表键，啥也不用干。</p><blockquote><p>COUNT、SUM 二次求和，MIN 、MAX 二次比较，AVG 转 SUM 和 COUNT；GROUP BY 普通列，SELECT 加列再分组；GROUP BY 分库分表键，啥也不用干</p></blockquote><p>聚合函数在分库分表里面是一个难点，总体来说可以分成求平均值和求非平均值。</p><p>对于 COUNT 和 SUM 来说，就是执行分库分表之后，将结果汇总之后再次求和；</p><p>对于 MIN 和 MAX 来说，就是结果汇总之后再次求最小值或者最大值；</p><p>对于平均值来说，要改写为求 SUM 和 COUNT，汇总之后再计算平均值；</p><p>当然，这里还要进一步结合 GROUP BY 来考虑。</p><p>如果 GROUP BY 的列就是普通的列，那么聚合函数的算法还是类似前面的算法，但是有两个不同点：</p><ul><li>SELECT 列里面要加上 GROUP BY 的列；</li><li>dbproxy 汇总结果之后，要按照 GROUP BY 的列再次分组，分组之后再次计算</li></ul><blockquote><p>二次分组，再次计算</p></blockquote><p>但是有一种最为特殊的情况，就是如果要是 GROUP BY 后面恰好是分库分表键，那么就汇总结果之后直接返回就可以，不需要再次计算了。</p><p>这种情况下性能极好。所以我们在很多时候都是不推荐跨库跨表查询，比如说在这里 GROUP BY 刚好是分库分表键，这意味我们不需要跨库跨表汇总结果之后再次计算，节省了大量的资源。</p><p>而作为对比，GROUP BY 后面不是分库分表键的时候，还要自己二次分组，再次计算结果，性能损耗很大。</p><h2 id="分库分表求平均值" tabindex="-1">分库分表求平均值 <a class="header-anchor" href="#分库分表求平均值" aria-label="Permalink to &quot;分库分表求平均值&quot;">​</a></h2><p>平均值在聚合函数里面是属于比较特殊的。在没有 GROUP BY 的情况下，直接将 AVG 改写为 SUM 和 COUNT，汇总之后再次计算平均值。</p><p>例如说 SELECT AVG(age) FROM users，那么就要变成 SELECT SUM(age), COUNT(age) FROM users，而后汇总全部目标表的结果之后，再利用 SUM 和 COUNT 来计算平均值。</p><p>在结合 GROUP BY 之后，如果 GROUP BY 后面是普通的列，那么就需要在 SELECT 里面加上 GROUP BY 的列，汇总之后再次分组计算平均值。</p><p>例如说 SELECT AVG(age) FROM users GROUP BY color（肤色），变成 SELECT SUM(age), COUNT(age), color FROM users_0..n GROUP BY color，汇总结果之后就需要手动进行一个二次分组，再计算平均值。</p><p>如果 GROUP BY 本身恰好是使用分库分表键，那么就不需要这么改写 SQL，只需要汇总一下数据就可以了。</p><p>例如说 SELECT AVG(age) FROM users GROUP BY color(肤色， 此时也是分库分表键)，那么直接分库分表之后执行 SELECT AVG(age) FROM users_0..n GROUP BY color 就可以了。</p><p>因此也再次印证了分库分表之后不推荐跨库跨表查询这个道理。在 GROUP BY 分库分表键的时候，可以确保同一个组的数据都在同一个表里面，那么 dbproxy 处理起来就很高效。</p></div></div></main><footer class="VPDocFooter" data-v-39a288b8 data-v-e257564d><!--[--><!--]--><!----><nav class="prev-next" aria-labelledby="doc-footer-aria-label" data-v-e257564d><span class="visually-hidden" id="doc-footer-aria-label" data-v-e257564d>Pager</span><div class="pager" data-v-e257564d><a class="VPLink link pager-link prev" href="/labnote/go/%E5%BE%AE%E6%9C%8D%E5%8A%A1.html" data-v-e257564d><!--[--><span class="desc" data-v-e257564d>Previous page</span><span class="title" data-v-e257564d>微服务</span><!--]--></a></div><div class="pager" data-v-e257564d><a class="VPLink link pager-link next" href="/labnote/go/%E5%88%86%E5%B8%83%E5%BC%8F%E4%BB%BB%E5%8A%A1%E8%B0%83%E5%BA%A6%E7%B3%BB%E7%BB%9F.html" data-v-e257564d><!--[--><span class="desc" data-v-e257564d>Next page</span><span class="title" data-v-e257564d>分布式任务调度系统</span><!--]--></a></div></nav></footer><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><!----><!--[--><!--]--></div></div>
    <script>window.__VP_HASH_MAP__=JSON.parse("{\"aboutme.md\":\"kYFORpmL\",\"algorithm_index.md\":\"DuT03Cf_\",\"algorithm_其他算法_二分.md\":\"D-FBG171\",\"algorithm_其他算法_扫描线.md\":\"dYPDHtZz\",\"algorithm_其他算法_莫队.md\":\"BY0zMvsW\",\"algorithm_动态规划_最长上升子序列.md\":\"B4bHhNwo\",\"algorithm_动态规划_状态压缩.md\":\"D0lw-pGk\",\"algorithm_动态规划_背包问题.md\":\"BmwLPOwJ\",\"algorithm_动态规划_记忆话搜索.md\":\"DQ1H8kI9\",\"algorithm_图论_二分图.md\":\"BuIBaZvQ\",\"algorithm_图论_最短路.md\":\"BqmJASWl\",\"algorithm_图论_网络流.md\":\"DT4fN2Vr\",\"algorithm_图论_连通图.md\":\"CI4jaW_r\",\"algorithm_字符串_automaton.md\":\"DFLAY01H\",\"algorithm_字符串_string.md\":\"CMjSyPae\",\"algorithm_搜索_ida_.md\":\"CCymPJ7w\",\"algorithm_搜索_回溯算法.md\":\"C5NY6Nu-\",\"algorithm_搜索_记忆话搜索.md\":\"ClRh7jUt\",\"algorithm_数学_index.md\":\"BfaAr3Ve\",\"algorithm_数学_因数.md\":\"CkN2KXG_\",\"algorithm_数学_快速幂.md\":\"Da2XUtGs\",\"algorithm_数学_欧拉函数.md\":\"DubVFget\",\"algorithm_数学_质数.md\":\"BgDpohso\",\"algorithm_数学_高精度.md\":\"CUuBEDrd\",\"algorithm_树_搜索树.md\":\"BYyVJbmH\",\"algorithm_树_最小生成树.md\":\"CzqV08wu\",\"algorithm_树_最近公共祖先.md\":\"C4zc1_Y8\",\"algorithm_树_线段树.md\":\"OiHLDAN_\",\"cpp_1984-01_p1194 买礼物.md\":\"D4rPE-rt\",\"cpp_1984-01_p1195 口袋的天空.md\":\"CC1Uq5iw\",\"cpp_1984-01_p1331 海战.md\":\"BdTUFFkJ\",\"cpp_1984-01_p1396 营救.md\":\"BbXsJVVW\",\"cpp_1984-01_p1629 邮递员送信.md\":\"DzfHpI63\",\"cpp_1984-01_p1656 炸铁路.md\":\"U7Rw2Sbz\",\"cpp_1984-01_p1744 采购特价商品.md\":\"BkkQew_u\",\"cpp_1984-01_p1875 佳佳的魔法药水.md\":\"CSjAJPVI\",\"cpp_1984-01_p2136 拉近距离.md\":\"Bo-Ygh6C\",\"cpp_1984-01_p2648 赚钱.md\":\"hZrSr_sM\",\"cpp_1984-01_p2656 采蘑菇.md\":\"D4v-FrFd\",\"cpp_1984-01_p2700 逐个击破.md\":\"mkXGLiNM\",\"cpp_1984-01_p3366 【模板】最小生成树.md\":\"BAK-mUYG\",\"cpp_1984-01_p3388 【模板】割点（割顶）.md\":\"MsKxsIlr\",\"cpp_1984-01_p3905 道路重建.md\":\"D72-3DT0\",\"cpp_1984-01_p4554 小明的游戏.md\":\"BOIyztx-\",\"cpp_1984-01_p4556.md\":\"CLoly17Z\",\"cpp_1984-01_p_1020_noip_1999_普及组_导弹拦截.md\":\"CLQCkbbz\",\"cpp_1984-01_p_1024_noip_2001_提高组_一元三次方程求解.md\":\"B1VDFlb_\",\"cpp_1984-01_p_1048_noip_2005_普及组_采药.md\":\"DhV2abC3\",\"cpp_1984-01_p_1049_noip_2001_普及组_装箱问题.md\":\"Ce2ecBgB\",\"cpp_1984-01_p_1102_a_b_数对.md\":\"4_xRSbos\",\"cpp_1984-01_p_1119_灾后重建.md\":\"Db7fcIq-\",\"cpp_1984-01_p_1120_小木棍.md\":\"DZrTrJdZ\",\"cpp_1984-01_p_1164_小a点菜.md\":\"CnSbWsJ6\",\"cpp_1984-01_p_1216_usaco_1_5_ioi_1994_数字三角形_number_triangles.md\":\"C_XwpHJZ\",\"cpp_1984-01_p_1314_noip_2011_提高组_聪明的质监员.md\":\"9e3coOc6\",\"cpp_1984-01_p_1357_花园.md\":\"CWvwg6BO\",\"cpp_1984-01_p_1379_八数码难题.md\":\"BkHwmaMn\",\"cpp_1984-01_p_1395_会议.md\":\"DouEMY8m\",\"cpp_1984-01_p_1434_shoi_2002_滑雪.md\":\"Bw7ZHP4I\",\"cpp_1984-01_p_1439_模板_最长公共子序列.md\":\"BSLtT8aw\",\"cpp_1984-01_p_1462_通往奥格瑞玛的道路.md\":\"Can4w_pr\",\"cpp_1984-01_p_1481_魔族密码.md\":\"DyKUiyju\",\"cpp_1984-01_p_1486_noi_2004_郁闷的出纳员.md\":\"DXoHp7s2\",\"cpp_1984-01_p_1719_最大加权矩形.md\":\"aQe0hJ0_\",\"cpp_1984-01_p_1725_琪露诺.md\":\"Z7GecHF9\",\"cpp_1984-01_p_1879_usaco_06_nov_corn_fields_g.md\":\"C2SS_yZJ\",\"cpp_1984-01_p_1886_滑动窗口_模板_单调队列.md\":\"YJniby9u\",\"cpp_1984-01_p_1896_scoi_2005_互不侵犯.md\":\"VWy_AknF\",\"cpp_1984-01_p_1908_逆序对.md\":\"C4TtmNin\",\"cpp_1984-01_p_1972_sdoi_2009_hh的项链.md\":\"BFX2mD1Z\",\"cpp_1984-01_p_2047_noi_2007_社交网络.md\":\"Dj2SLKnQ\",\"cpp_1984-01_p_2052_noi_2011_道路修建.md\":\"B3BSGrDv\",\"cpp_1984-01_p_2146_noi_2015_软件包管理器.md\":\"snUTH4P1\",\"cpp_1984-01_p_2285_hnoi_2004_打鼹鼠.md\":\"g79C2Kji\",\"cpp_1984-01_p_2324_scoi_2005_骑士精神.md\":\"DZS6QuEo\",\"cpp_1984-01_p_2580_于是他错误的点名开始了.md\":\"DA3kmd8S\",\"cpp_1984-01_p_2704_noi_2001_炮兵阵地.md\":\"DKVylWnM\",\"cpp_1984-01_p_2709_小b的询问.md\":\"OlbZKFjg\",\"cpp_1984-01_p_2758_编辑距离.md\":\"DWCfOfV1\",\"cpp_1984-01_p_2824_heoi_2016_tjoi_2016_排序.md\":\"CetNgsRH\",\"cpp_1984-01_p_2871_usaco_07_dec_charm_bracelet_s.md\":\"Bi8xsTgF\",\"cpp_1984-01_p_2888_usaco_07_nov_cow_hurdles_s.md\":\"DSNHzes1\",\"cpp_1984-01_p_3128_usaco_15_dec_max_flow_p.md\":\"vh05k_la\",\"cpp_1984-01_p_3178_haoi_2015_树上操作.md\":\"DWQroTkz\",\"cpp_1984-01_p_3369_模板_普通平衡树.md\":\"BLGT0mep\",\"cpp_1984-01_p_3372_模板_线段树_1.md\":\"CVOPF0PU\",\"cpp_1984-01_p_3373_模板_线段树_2.md\":\"CcZH3GuQ\",\"cpp_1984-01_p_3375_模板_kmp.md\":\"B5ibKYf_\",\"cpp_1984-01_p_3379_模板_最近公共祖先_lca.md\":\"BXTxQDpW\",\"cpp_1984-01_p_3380_模板_二逼平衡树_树套树.md\":\"DtoiHGRp\",\"cpp_1984-01_p_3391_模板_文艺平衡树.md\":\"Bnb7932f\",\"cpp_1984-01_p_3398_仓鼠找_sugar.md\":\"BV2iNhEU\",\"cpp_1984-01_p_3605_usaco_17_jan_promotion_counting_p.md\":\"dr94_ZLY\",\"cpp_1984-01_p_3709_大爷的字符串题.md\":\"pzeGu9VQ\",\"cpp_1984-01_p_3806_模板_点分治_1.md\":\"FINccob7\",\"cpp_1984-01_p_3901_数列找不同.md\":\"Dh9yGwse\",\"cpp_1984-01_p_3919_模板_可持久化线段树_1_可持久化数组.md\":\"b9iI9StU\",\"cpp_1984-01_p_3956_noip_2017_普及组_棋盘.md\":\"CN4tJiK-\",\"cpp_1984-01_p_4017_最大食物链计数.md\":\"B6yL9nZ8\",\"cpp_1984-01_p_4047_jsoi_2010_部落划分.md\":\"C8GGBm8_\",\"cpp_1984-01_p_4092_heoi_2016_tjoi_2016_树.md\":\"DCLdo1js\",\"cpp_1984-01_p_4114_qtree_1.md\":\"P6RlY1rX\",\"cpp_1984-01_p_4315_月下_毛景树.md\":\"CsIjlpBI\",\"cpp_1984-01_p_4391_boi_2009_radio_transmission_无线传输.md\":\"_ZSYGTkP\",\"cpp_1984-01_p_4427_bjoi_2018_求和.md\":\"BEq3YNcM\",\"cpp_1984-01_p_4551_最长异或路径.md\":\"B5IGFWqB\",\"cpp_1984-01_p_4556_vani有约会_雨天的尾巴_模板_线段树合并.md\":\"CZOr7TTh\",\"cpp_1984-01_p_4799_ceoi_2015_day_2_世界冰球锦标赛.md\":\"D4TVG50a\",\"cpp_1984-01_p_5494_模板_线段树分裂.md\":\"BfG0pXij\",\"cpp_1984-01_p_5507_机关.md\":\"73PhNOMw\",\"cpp_1984-01_p_5837_usaco_19_dec_milk_pumping_g.md\":\"gxDNqMqz\",\"cpp_1984-01_p_5908_猫猫和企鹅.md\":\"qNmVRv9L\",\"cpp_1984-01_p_6098_usaco_19_feb_cow_land_g.md\":\"DeLlJC5m\",\"cpp_1984-01_p_8218_深进_1_例_1_求区间和.md\":\"xnYZitUX\",\"cpp_1984-01_p_8772_蓝桥杯_2022_省_a_求和.md\":\"CrqOOBvk\",\"cpp_1984-01_p_9532_ysoi_2023_前缀和.md\":\"mN7x7-gR\",\"cpp_2024-03__defaut.md\":\"5gCIu4T5\",\"cpp_2024-03_p_1262_间谍网络.md\":\"bPmayC9u\",\"cpp_2024-03_p_1343_地震逃生.md\":\"DksPSbqH\",\"cpp_2024-03_p_1344_usaco_4_4_追查坏牛奶_pollutant_control.md\":\"qf2FqjWG\",\"cpp_2024-03_p_1345_usaco_5_4_奶牛的电信telecowmunication.md\":\"BOTejZZV\",\"cpp_2024-03_p_1361_小m的作物.md\":\"BsgKSH7T\",\"cpp_2024-03_p_1967_noip_2013_提高组_货车运输.md\":\"UkEn4rpz\",\"cpp_2024-03_p_2245_星际导航.md\":\"CKiQFUbm\",\"cpp_2024-03_p_2341_usaco_03_fall_haoi_2006_受欢迎的牛_g.md\":\"BVgmuIMD\",\"cpp_2024-03_p_2740_usaco_4_2_草地排水drainage_ditches.md\":\"BCTp_Eh0\",\"cpp_2024-03_p_2812_校园网络_usaco_network_of_schools加强版.md\":\"C1fqmQQl\",\"cpp_2024-03_p_2860_usaco_06_jan_redundant_paths_g.md\":\"F4imSWyP\",\"cpp_2024-03_p_2863_usaco_06_jan_the_cow_prom_s.md\":\"CGQeyX7t\",\"cpp_2024-03_p_2936_usaco_09_jan_total_flow_s.md\":\"COd-1N2O\",\"cpp_2024-03_p_3038_usaco_11_dec_grass_planting_g.md\":\"MkdMkoS8\",\"cpp_2024-03_p_3376_模板_网络最大流.md\":\"BqLcFi2f\",\"cpp_2024-03_p_3381_模板_最小费用最大流.md\":\"DFxdfZMo\",\"cpp_2024-03_p_3384_模板_重链剖分_树链剖分.md\":\"BKguJ-jR\",\"cpp_2024-03_p_3385_模板_负环.md\":\"Dmxy4B2x\",\"cpp_2024-03_p_3387_模板_缩点.md\":\"CKnAsOuQ\",\"cpp_2024-03_p_3388_模板_割点_割顶.md\":\"CwOcyOQS\",\"cpp_2024-03_p_3469_poi_2008_blo_blockade.md\":\"F39qZ34l\",\"cpp_2024-03_p_4568_jloi_2011_飞行路线.md\":\"OPq8_N4g\",\"cpp_2024-03_p_4779_模板_单源最短路径_标准版.md\":\"CXADw2HN\",\"cpp_2024-03_p_8435_模板_点双连通分量.md\":\"BrSQC4wL\",\"cpp_2024-03_shichikuji_and_power_grid.md\":\"B2n_ZjOH\",\"cpp_2024-03_we_need_more_bosses.md\":\"CHhFg4wJ\",\"cpp_2024-04__test.md\":\"DGhHtE2p\",\"cpp_2024-04_forgery.md\":\"BRSyfx5Z\",\"cpp_2024-04_p_1029_noip_2001_普及组_最大公约数和最小公倍数问题.md\":\"CXsivYvm\",\"cpp_2024-04_p_1045_noip_2003_普及组_麦森数.md\":\"BtlZaXBB\",\"cpp_2024-04_p_1141_01_迷宫.md\":\"CdgStZK-\",\"cpp_2024-04_p_1226_模板_快速幂.md\":\"TkEpqPHE\",\"cpp_2024-04_p_1451_求细胞数量.md\":\"DZgfqXmI\",\"cpp_2024-04_p_1494_国家集训队_小_z_的袜子.md\":\"DlbCQh_O\",\"cpp_2024-04_p_1706_全排列问题.md\":\"DGA3EnXV\",\"cpp_2024-04_p_1884_usaco_12_feb_overplanting_s.md\":\"BpefD8B8\",\"cpp_2024-04_p_1903_国家集训队_数颜色_维护队列.md\":\"BzRgrUvq\",\"cpp_2024-04_p_1955_noi_2015_程序自动分析.md\":\"DMTrKKAr\",\"cpp_2024-04_p_1962_斐波那契数列.md\":\"DUDYLe2a\",\"cpp_2024-04_p_2043_质因子分解.md\":\"DJksq0ZA\",\"cpp_2024-04_p_3383_模板_线性筛素数.md\":\"BfENDuMn\",\"cpp_2024-04_p_3390_模板_矩阵快速幂.md\":\"C2VN-Vwc\",\"cpp_2024-04_p_4074_wc_2013_糖果公园.md\":\"CGkXtZEg\",\"cpp_2024-04_p_4942_小凯的数字.md\":\"CDKvdK_Q\",\"cpp_2024-04_p_5736_深基_7_例_2_质数筛.md\":\"B_pgflBl\",\"cpp_2024-04_歴史の研究.md\":\"BmoVxyXA\",\"cpp_2024-05_p_10045_ccpc_2023_北京市赛_线段树.md\":\"CNiTj3J4\",\"cpp_2024-05_p_10048_ccpc_2023_北京市赛_图.md\":\"CvS4hV3W\",\"cpp_2024-05_p_3386_模板_二分图最大匹配.md\":\"C9OpVZY1\",\"cpp_2024-05_p_4254_jsoi_2008_blue_mary_开公司.md\":\"BxnRuGXc\",\"cpp_2024-05_p_6577_模板_二分图最大权完美匹配.md\":\"KoThmbrb\",\"cpp_2024-05_xor_on_segment.md\":\"B-LhZ3Qv\",\"cpp_index.md\":\"BVlIt18n\",\"index.md\":\"Ck8lwQ42\",\"labnote_go_cache.md\":\"nMgBhLV0\",\"labnote_go_ds.md\":\"DiDOmmdC\",\"labnote_go_kafka.md\":\"CBQyWnJr\",\"labnote_go_redis.md\":\"ByWvsJ8O\",\"labnote_go_不停机数据迁移.md\":\"DfjOtKeH\",\"labnote_go_分布式任务调度系统.md\":\"Cw24wLrM\",\"labnote_go_分库分表.md\":\"iz_u_R3R\",\"labnote_go_微服务.md\":\"DGp64VQZ\",\"labnote_go_支付系统.md\":\"C-0Pdolu\",\"labnote_go_数据库理论知识.md\":\"DRokHM7_\",\"labnote_go_服务治理.md\":\"Dr1_MhNm\",\"labnote_go_服务注册与发现.md\":\"CEN-Pajr\",\"labnote_go_负载均衡.md\":\"FIq6DUtJ\",\"labnote_index.md\":\"DR6egeCU\",\"labnote_vue_tools.md\":\"BSgOv0ow\",\"resume.md\":\"6femQkjA\",\"start.md\":\"Dp6pRd8k\",\"system_ai_ann.md\":\"DS_LhDiF\",\"system_ai_attentionmechanism.md\":\"DiYZJY51\",\"system_ai_embeddings.md\":\"CkRmmXrs\",\"system_ai_langchain.md\":\"r2VI-fx3\",\"system_ai_machinelearning.md\":\"BTL2MxyI\",\"system_ai_transformer.md\":\"DvDQuxv_\",\"system_compiler_antlr.md\":\"BbceIYzj\",\"system_compiler_automaton.md\":\"B3_nvVqw\",\"system_compiler_cfg.md\":\"Ctfl44C-\",\"system_dbproxy_bufferpool.md\":\"Bp6fMh5h\",\"system_dbproxy_hint.md\":\"xR4JazcV\",\"system_dbproxy_mysql.md\":\"CfKZULt_\",\"system_dbproxy_sharding.md\":\"CQhDdbNl\",\"system_dbproxy_sidecar.md\":\"DJWf-wQe\",\"system_dbproxy_splitting.md\":\"bmPqrgup\",\"system_ds_aurora.md\":\"yzJiakrm\",\"system_ds_distributed transaction.md\":\"CeJ1UKKZ\",\"system_ds_frangipani.md\":\"BEdgNlgd\",\"system_ds_gfs.md\":\"Cp2L0y8b\",\"system_ds_mapreduce.md\":\"Cfpa-9C7\",\"system_ds_raft.md\":\"CpX-PeCm\",\"system_ds_vmware ft.md\":\"DaSxwFZH\",\"system_ds_zookeeper.md\":\"CE_Up5fK\",\"system_index.md\":\"a4DX61Rw\",\"system_mit6.824_lab1.md\":\"Be8kh8ac\",\"system_mit6.824_lab2a.md\":\"EvhFHySE\",\"system_os_01.md\":\"CNuj26dv\",\"system_os_crepl.md\":\"Bu1cu5Wn\",\"system_os_frecov.md\":\"C4WvTc3_\",\"system_os_libco.md\":\"CrMSym60\",\"system_os_processtree.md\":\"xGGKzh88\",\"system_os_sperf.md\":\"BNTPW11E\",\"system_tcp_active-queue-management.md\":\"CMcW9irq\",\"system_tcp_avoidance-based.md\":\"BHgVG1mQ\",\"system_tcp_control-based.md\":\"09WDgd9Y\",\"system_tcp_design-space.md\":\"47ejxnkx\",\"system_tcp_other.md\":\"BpmG_vMT\",\"system_tcp_overview.md\":\"DquNCQYf\",\"system_tcp_tcp.md\":\"DwvyA0Ec\",\"test.md\":\"D1k-MXjo\"}");window.__VP_SITE_DATA__=JSON.parse("{\"lang\":\"en-US\",\"dir\":\"ltr\",\"title\":\"hjywiki\",\"description\":\"编程笔记\",\"base\":\"/\",\"head\":[],\"router\":{\"prefetchLinks\":true},\"appearance\":true,\"themeConfig\":{\"nav\":[{\"text\":\"系统知识\",\"link\":\"/system/index\"},{\"text\":\"学习笔记\",\"link\":\"/labnote/index\"},{\"text\":\"算法\",\"link\":\"/algorithm/index\"},{\"text\":\"算法题解\",\"link\":\"/cpp/index\"}],\"socialLinks\":[{\"icon\":\"github\",\"link\":\"https://github.com/DaHuangQwQ\"}],\"search\":{\"provider\":\"local\"},\"sidebar\":{\"/test.md/\":[],\"/start.md/\":[],\"/resume.md/\":[],\"/index.md/\":[],\"/aboutme.md/\":[],\"/system/\":[{\"text\":\"主页\",\"link\":\"/system/index.md\"},{\"text\":\"tcp\",\"collapsed\":false,\"items\":[{\"text\":\"02 TCP\",\"link\":\"/system/tcp/tcp.md\"},{\"text\":\"01 overview\",\"link\":\"/system/tcp/overview.md\"},{\"text\":\"07 other-based\",\"link\":\"/system/tcp/other.md\"},{\"text\":\"03 How Design Space\",\"link\":\"/system/tcp/design-space.md\"},{\"text\":\"04 Control-Based\",\"link\":\"/system/tcp/control-based.md\"},{\"text\":\"05 Avoidance-Based\",\"link\":\"/system/tcp/avoidance-based.md\"},{\"text\":\"06 Active Queue Management\",\"link\":\"/system/tcp/active-queue-management.md\"}]},{\"text\":\"os\",\"collapsed\":false,\"items\":[{\"text\":\"sperf\",\"link\":\"/system/os/sperf.md\"},{\"text\":\"pstree\",\"link\":\"/system/os/processTree.md\"},{\"text\":\"libco\",\"link\":\"/system/os/libco.md\"},{\"text\":\"frecov\",\"link\":\"/system/os/frecov.md\"},{\"text\":\"crepl\",\"link\":\"/system/os/crepl.md\"},{\"text\":\"\",\"link\":\"/system/os/01.md\"}]},{\"text\":\"mit6.824\",\"collapsed\":false,\"items\":[{\"text\":\"lab2A\",\"link\":\"/system/mit6.824/lab2A.md\"},{\"text\":\"lab1\",\"link\":\"/system/mit6.824/lab1.md\"}]},{\"text\":\"ds\",\"collapsed\":false,\"items\":[{\"text\":\"Zookeeper\",\"link\":\"/system/ds/Zookeeper.md\"},{\"text\":\"VMware FT\",\"link\":\"/system/ds/VMware FT.md\"},{\"text\":\"Raft\",\"link\":\"/system/ds/Raft.md\"},{\"text\":\"MapReduce\",\"link\":\"/system/ds/MapReduce.md\"},{\"text\":\"GFS\",\"link\":\"/system/ds/GFS.md\"},{\"text\":\"Frangipani\",\"link\":\"/system/ds/Frangipani.md\"},{\"text\":\"Distributed Transaction\",\"link\":\"/system/ds/Distributed Transaction.md\"},{\"text\":\"Aurora\",\"link\":\"/system/ds/Aurora.md\"}]},{\"text\":\"dbproxy\",\"collapsed\":false,\"items\":[{\"text\":\"读写分离\",\"link\":\"/system/dbproxy/splitting.md\"},{\"text\":\"sidecar\",\"link\":\"/system/dbproxy/sidecar.md\"},{\"text\":\"sharding\",\"link\":\"/system/dbproxy/sharding.md\"},{\"text\":\"Mysql 协议\",\"link\":\"/system/dbproxy/mysql.md\"},{\"text\":\"链路数据传递和 HINT 机制\",\"link\":\"/system/dbproxy/hint.md\"},{\"text\":\"Buffer Pool\",\"link\":\"/system/dbproxy/bufferpool.md\"}]},{\"text\":\"compiler\",\"collapsed\":false,\"items\":[{\"text\":\"Context-Free Grammar\",\"link\":\"/system/compiler/cfg.md\"},{\"text\":\"Automaton\",\"link\":\"/system/compiler/automaton.md\"},{\"text\":\"antlr\",\"link\":\"/system/compiler/antlr.md\"}]},{\"text\":\"ai\",\"collapsed\":false,\"items\":[{\"text\":\"Transformer\",\"link\":\"/system/ai/Transformer.md\"},{\"text\":\"Machine Learning\",\"link\":\"/system/ai/MachineLearning.md\"},{\"text\":\"LangChain\",\"link\":\"/system/ai/LangChain.md\"},{\"text\":\"Embeddings\",\"link\":\"/system/ai/Embeddings.md\"},{\"text\":\"注意力机制\",\"link\":\"/system/ai/AttentionMechanism.md\"},{\"text\":\"## 前言\",\"link\":\"/system/ai/ANN.md\"}]}],\"/labnote/\":[{\"text\":\"转 go 语言的学习之路\",\"link\":\"/labnote/index.md\"},{\"text\":\"vue\",\"collapsed\":false,\"items\":[{\"text\":\"tools\",\"link\":\"/labnote/vue/tools.md\"}]},{\"text\":\"go\",\"collapsed\":false,\"items\":[{\"text\":\"负载均衡\",\"link\":\"/labnote/go/负载均衡.md\"},{\"text\":\"服务注册与发现\",\"link\":\"/labnote/go/服务注册与发现.md\"},{\"text\":\"服务治理\",\"link\":\"/labnote/go/服务治理.md\"},{\"text\":\"数据库理论知识\",\"link\":\"/labnote/go/数据库理论知识.md\"},{\"text\":\"支付系统\",\"link\":\"/labnote/go/支付系统.md\"},{\"text\":\"微服务\",\"link\":\"/labnote/go/微服务.md\"},{\"text\":\"分库分表\",\"link\":\"/labnote/go/分库分表.md\"},{\"text\":\"分布式任务调度系统\",\"link\":\"/labnote/go/分布式任务调度系统.md\"},{\"text\":\"不停机数据迁移\",\"link\":\"/labnote/go/不停机数据迁移.md\"},{\"text\":\"redis\",\"link\":\"/labnote/go/redis.md\"},{\"text\":\"kafka\",\"link\":\"/labnote/go/kafka.md\"},{\"text\":\"分布式系统\",\"link\":\"/labnote/go/ds.md\"},{\"text\":\"缓存\",\"link\":\"/labnote/go/cache.md\"}]}],\"/cpp/\":[{\"text\":\"index\",\"link\":\"/cpp/index.md\"},{\"text\":\"2024-05\",\"collapsed\":false,\"items\":[{\"text\":\"XOR_on_Segment\",\"link\":\"/cpp/2024-05/XOR_on_Segment.md\"},{\"text\":\"P_6577_模板_二分图最大权完美匹配\",\"link\":\"/cpp/2024-05/P_6577_模板_二分图最大权完美匹配.md\"},{\"text\":\"P_4254_JSOI_2008_Blue_Mary_开公司\",\"link\":\"/cpp/2024-05/P_4254_JSOI_2008_Blue_Mary_开公司.md\"},{\"text\":\"P_3386_模板_二分图最大匹配\",\"link\":\"/cpp/2024-05/P_3386_模板_二分图最大匹配.md\"},{\"text\":\"P_10048_CCPC_2023_北京市赛_图\",\"link\":\"/cpp/2024-05/P_10048_CCPC_2023_北京市赛_图.md\"},{\"text\":\"P_10045_CCPC_2023_北京市赛_线段树\",\"link\":\"/cpp/2024-05/P_10045_CCPC_2023_北京市赛_线段树.md\"}]},{\"text\":\"2024-04\",\"collapsed\":false,\"items\":[{\"text\":\"歴史の研究\",\"link\":\"/cpp/2024-04/歴史の研究.md\"},{\"text\":\"_test\",\"link\":\"/cpp/2024-04/_test.md\"},{\"text\":\"P_5736_深基_7_例_2_质数筛\",\"link\":\"/cpp/2024-04/P_5736_深基_7_例_2_质数筛.md\"},{\"text\":\"P_4942_小凯的数字\",\"link\":\"/cpp/2024-04/P_4942_小凯的数字.md\"},{\"text\":\"P_4074_WC_2013_糖果公园\",\"link\":\"/cpp/2024-04/P_4074_WC_2013_糖果公园.md\"},{\"text\":\"P_3390_模板_矩阵快速幂\",\"link\":\"/cpp/2024-04/P_3390_模板_矩阵快速幂.md\"},{\"text\":\"P_3383_模板_线性筛素数\",\"link\":\"/cpp/2024-04/P_3383_模板_线性筛素数.md\"},{\"text\":\"P_2043_质因子分解\",\"link\":\"/cpp/2024-04/P_2043_质因子分解.md\"},{\"text\":\"P_1962_斐波那契数列\",\"link\":\"/cpp/2024-04/P_1962_斐波那契数列.md\"},{\"text\":\"P_1955_NOI_2015_程序自动分析\",\"link\":\"/cpp/2024-04/P_1955_NOI_2015_程序自动分析.md\"},{\"text\":\"P_1903_国家集训队_数颜色_维护队列\",\"link\":\"/cpp/2024-04/P_1903_国家集训队_数颜色_维护队列.md\"},{\"text\":\"P_1884_USACO_12_FEB_Overplanting_S\",\"link\":\"/cpp/2024-04/P_1884_USACO_12_FEB_Overplanting_S.md\"},{\"text\":\"P_1706_全排列问题\",\"link\":\"/cpp/2024-04/P_1706_全排列问题.md\"},{\"text\":\"P_1494_国家集训队_小_Z_的袜子\",\"link\":\"/cpp/2024-04/P_1494_国家集训队_小_Z_的袜子.md\"},{\"text\":\"P_1451_求细胞数量\",\"link\":\"/cpp/2024-04/P_1451_求细胞数量.md\"},{\"text\":\"P_1226_模板_快速幂\",\"link\":\"/cpp/2024-04/P_1226_模板_快速幂.md\"},{\"text\":\"P_1141_01_迷宫\",\"link\":\"/cpp/2024-04/P_1141_01_迷宫.md\"},{\"text\":\"P_1045_NOIP_2003_普及组_麦森数\",\"link\":\"/cpp/2024-04/P_1045_NOIP_2003_普及组_麦森数.md\"},{\"text\":\"P_1029_NOIP_2001_普及组_最大公约数和最小公倍数问题\",\"link\":\"/cpp/2024-04/P_1029_NOIP_2001_普及组_最大公约数和最小公倍数问题.md\"},{\"text\":\"Forgery\",\"link\":\"/cpp/2024-04/Forgery.md\"}]},{\"text\":\"2024-03\",\"collapsed\":false,\"items\":[{\"text\":\"_defaut\",\"link\":\"/cpp/2024-03/_defaut.md\"},{\"text\":\"We_Need_More_Bosses\",\"link\":\"/cpp/2024-03/We_Need_More_Bosses.md\"},{\"text\":\"Shichikuji_and_Power_Grid\",\"link\":\"/cpp/2024-03/Shichikuji_and_Power_Grid.md\"},{\"text\":\"P_8435_模板_点双连通分量\",\"link\":\"/cpp/2024-03/P_8435_模板_点双连通分量.md\"},{\"text\":\"P_4779_模板_单源最短路径_标准版\",\"link\":\"/cpp/2024-03/P_4779_模板_单源最短路径_标准版.md\"},{\"text\":\"P_4568_JLOI_2011_飞行路线\",\"link\":\"/cpp/2024-03/P_4568_JLOI_2011_飞行路线.md\"},{\"text\":\"P_3469_POI_2008_BLO_Blockade\",\"link\":\"/cpp/2024-03/P_3469_POI_2008_BLO_Blockade.md\"},{\"text\":\"P_3388_模板_割点_割顶\",\"link\":\"/cpp/2024-03/P_3388_模板_割点_割顶.md\"},{\"text\":\"P_3387_模板_缩点\",\"link\":\"/cpp/2024-03/P_3387_模板_缩点.md\"},{\"text\":\"P_3385_模板_负环\",\"link\":\"/cpp/2024-03/P_3385_模板_负环.md\"},{\"text\":\"P_3384_模板_重链剖分_树链剖分\",\"link\":\"/cpp/2024-03/P_3384_模板_重链剖分_树链剖分.md\"},{\"text\":\"P_3381_模板_最小费用最大流\",\"link\":\"/cpp/2024-03/P_3381_模板_最小费用最大流.md\"},{\"text\":\"P_3376_模板_网络最大流\",\"link\":\"/cpp/2024-03/P_3376_模板_网络最大流.md\"},{\"text\":\"P_3038_USACO_11_DEC_Grass_Planting_G\",\"link\":\"/cpp/2024-03/P_3038_USACO_11_DEC_Grass_Planting_G.md\"},{\"text\":\"P_2936_USACO_09_JAN_Total_Flow_S\",\"link\":\"/cpp/2024-03/P_2936_USACO_09_JAN_Total_Flow_S.md\"},{\"text\":\"P_2863_USACO_06_JAN_The_Cow_Prom_S\",\"link\":\"/cpp/2024-03/P_2863_USACO_06_JAN_The_Cow_Prom_S.md\"},{\"text\":\"P_2860_USACO_06_JAN_Redundant_Paths_G\",\"link\":\"/cpp/2024-03/P_2860_USACO_06_JAN_Redundant_Paths_G.md\"},{\"text\":\"P_2812_校园网络_USACO_Network_of_Schools加强版\",\"link\":\"/cpp/2024-03/P_2812_校园网络_USACO_Network_of_Schools加强版.md\"},{\"text\":\"P_2740_USACO_4_2_草地排水Drainage_Ditches\",\"link\":\"/cpp/2024-03/P_2740_USACO_4_2_草地排水Drainage_Ditches.md\"},{\"text\":\"P_2341_USACO_03_FALL_HAOI_2006_受欢迎的牛_G\",\"link\":\"/cpp/2024-03/P_2341_USACO_03_FALL_HAOI_2006_受欢迎的牛_G.md\"},{\"text\":\"P_2245_星际导航\",\"link\":\"/cpp/2024-03/P_2245_星际导航.md\"},{\"text\":\"P_1967_NOIP_2013_提高组_货车运输\",\"link\":\"/cpp/2024-03/P_1967_NOIP_2013_提高组_货车运输.md\"},{\"text\":\"P_1361_小M的作物\",\"link\":\"/cpp/2024-03/P_1361_小M的作物.md\"},{\"text\":\"P_1345_USACO_5_4_奶牛的电信Telecowmunication\",\"link\":\"/cpp/2024-03/P_1345_USACO_5_4_奶牛的电信Telecowmunication.md\"},{\"text\":\"P_1344_USACO_4_4_追查坏牛奶_Pollutant_Control\",\"link\":\"/cpp/2024-03/P_1344_USACO_4_4_追查坏牛奶_Pollutant_Control.md\"},{\"text\":\"P_1343_地震逃生\",\"link\":\"/cpp/2024-03/P_1343_地震逃生.md\"},{\"text\":\"P_1262_间谍网络\",\"link\":\"/cpp/2024-03/P_1262_间谍网络.md\"}]},{\"text\":\"1984-01\",\"collapsed\":false,\"items\":[{\"text\":\"P_9532_YsOI_2023_前缀和\",\"link\":\"/cpp/1984-01/P_9532_YsOI_2023_前缀和.md\"},{\"text\":\"P_8772_蓝桥杯_2022_省_A_求和\",\"link\":\"/cpp/1984-01/P_8772_蓝桥杯_2022_省_A_求和.md\"},{\"text\":\"P_8218_深进_1_例_1_求区间和\",\"link\":\"/cpp/1984-01/P_8218_深进_1_例_1_求区间和.md\"},{\"text\":\"P_6098_USACO_19_FEB_Cow_Land_G\",\"link\":\"/cpp/1984-01/P_6098_USACO_19_FEB_Cow_Land_G.md\"},{\"text\":\"P_5908_猫猫和企鹅\",\"link\":\"/cpp/1984-01/P_5908_猫猫和企鹅.md\"},{\"text\":\"P_5837_USACO_19_DEC_Milk_Pumping_G\",\"link\":\"/cpp/1984-01/P_5837_USACO_19_DEC_Milk_Pumping_G.md\"},{\"text\":\"P_5507_机关\",\"link\":\"/cpp/1984-01/P_5507_机关.md\"},{\"text\":\"P_5494_模板_线段树分裂\",\"link\":\"/cpp/1984-01/P_5494_模板_线段树分裂.md\"},{\"text\":\"P_4799_CEOI_2015_Day_2_世界冰球锦标赛\",\"link\":\"/cpp/1984-01/P_4799_CEOI_2015_Day_2_世界冰球锦标赛.md\"},{\"text\":\"P_4556_Vani有约会_雨天的尾巴_模板_线段树合并\",\"link\":\"/cpp/1984-01/P_4556_Vani有约会_雨天的尾巴_模板_线段树合并.md\"},{\"text\":\"P_4551_最长异或路径\",\"link\":\"/cpp/1984-01/P_4551_最长异或路径.md\"},{\"text\":\"P_4427_BJOI_2018_求和\",\"link\":\"/cpp/1984-01/P_4427_BJOI_2018_求和.md\"},{\"text\":\"P_4391_BOI_2009_Radio_Transmission_无线传输\",\"link\":\"/cpp/1984-01/P_4391_BOI_2009_Radio_Transmission_无线传输.md\"},{\"text\":\"P_4315_月下_毛景树\",\"link\":\"/cpp/1984-01/P_4315_月下_毛景树.md\"},{\"text\":\"P_4114_Qtree_1\",\"link\":\"/cpp/1984-01/P_4114_Qtree_1.md\"},{\"text\":\"P_4092_HEOI_2016_TJOI_2016_树\",\"link\":\"/cpp/1984-01/P_4092_HEOI_2016_TJOI_2016_树.md\"},{\"text\":\"P_4047_JSOI_2010_部落划分\",\"link\":\"/cpp/1984-01/P_4047_JSOI_2010_部落划分.md\"},{\"text\":\"P_4017_最大食物链计数\",\"link\":\"/cpp/1984-01/P_4017_最大食物链计数.md\"},{\"text\":\"P_3956_NOIP_2017_普及组_棋盘\",\"link\":\"/cpp/1984-01/P_3956_NOIP_2017_普及组_棋盘.md\"},{\"text\":\"P_3919_模板_可持久化线段树_1_可持久化数组\",\"link\":\"/cpp/1984-01/P_3919_模板_可持久化线段树_1_可持久化数组.md\"},{\"text\":\"P_3901_数列找不同\",\"link\":\"/cpp/1984-01/P_3901_数列找不同.md\"},{\"text\":\"P_3806_模板_点分治_1\",\"link\":\"/cpp/1984-01/P_3806_模板_点分治_1.md\"},{\"text\":\"P_3709_大爷的字符串题\",\"link\":\"/cpp/1984-01/P_3709_大爷的字符串题.md\"},{\"text\":\"P_3605_USACO_17_JAN_Promotion_Counting_P\",\"link\":\"/cpp/1984-01/P_3605_USACO_17_JAN_Promotion_Counting_P.md\"},{\"text\":\"P_3398_仓鼠找_sugar\",\"link\":\"/cpp/1984-01/P_3398_仓鼠找_sugar.md\"},{\"text\":\"P_3391_模板_文艺平衡树\",\"link\":\"/cpp/1984-01/P_3391_模板_文艺平衡树.md\"},{\"text\":\"P_3380_模板_二逼平衡树_树套树\",\"link\":\"/cpp/1984-01/P_3380_模板_二逼平衡树_树套树.md\"},{\"text\":\"P_3379_模板_最近公共祖先_LCA\",\"link\":\"/cpp/1984-01/P_3379_模板_最近公共祖先_LCA.md\"},{\"text\":\"P_3375_模板_KMP\",\"link\":\"/cpp/1984-01/P_3375_模板_KMP.md\"},{\"text\":\"P_3373_模板_线段树_2\",\"link\":\"/cpp/1984-01/P_3373_模板_线段树_2.md\"},{\"text\":\"P_3372_模板_线段树_1\",\"link\":\"/cpp/1984-01/P_3372_模板_线段树_1.md\"},{\"text\":\"P_3369_模板_普通平衡树\",\"link\":\"/cpp/1984-01/P_3369_模板_普通平衡树.md\"},{\"text\":\"P_3178_HAOI_2015_树上操作\",\"link\":\"/cpp/1984-01/P_3178_HAOI_2015_树上操作.md\"},{\"text\":\"P_3128_USACO_15_DEC_Max_Flow_P\",\"link\":\"/cpp/1984-01/P_3128_USACO_15_DEC_Max_Flow_P.md\"},{\"text\":\"P_2888_USACO_07_NOV_Cow_Hurdles_S\",\"link\":\"/cpp/1984-01/P_2888_USACO_07_NOV_Cow_Hurdles_S.md\"},{\"text\":\"P_2871_USACO_07_DEC_Charm_Bracelet_S\",\"link\":\"/cpp/1984-01/P_2871_USACO_07_DEC_Charm_Bracelet_S.md\"},{\"text\":\"P_2824_HEOI_2016_TJOI_2016_排序\",\"link\":\"/cpp/1984-01/P_2824_HEOI_2016_TJOI_2016_排序.md\"},{\"text\":\"P_2758_编辑距离\",\"link\":\"/cpp/1984-01/P_2758_编辑距离.md\"},{\"text\":\"P_2709_小B的询问\",\"link\":\"/cpp/1984-01/P_2709_小B的询问.md\"},{\"text\":\"P_2704_NOI_2001_炮兵阵地\",\"link\":\"/cpp/1984-01/P_2704_NOI_2001_炮兵阵地.md\"},{\"text\":\"P_2580_于是他错误的点名开始了\",\"link\":\"/cpp/1984-01/P_2580_于是他错误的点名开始了.md\"},{\"text\":\"P_2324_SCOI_2005_骑士精神\",\"link\":\"/cpp/1984-01/P_2324_SCOI_2005_骑士精神.md\"},{\"text\":\"P_2285_HNOI_2004_打鼹鼠\",\"link\":\"/cpp/1984-01/P_2285_HNOI_2004_打鼹鼠.md\"},{\"text\":\"P_2146_NOI_2015_软件包管理器\",\"link\":\"/cpp/1984-01/P_2146_NOI_2015_软件包管理器.md\"},{\"text\":\"P_2052_NOI_2011_道路修建\",\"link\":\"/cpp/1984-01/P_2052_NOI_2011_道路修建.md\"},{\"text\":\"P_2047_NOI_2007_社交网络\",\"link\":\"/cpp/1984-01/P_2047_NOI_2007_社交网络.md\"},{\"text\":\"P_1972_SDOI_2009_HH的项链\",\"link\":\"/cpp/1984-01/P_1972_SDOI_2009_HH的项链.md\"},{\"text\":\"P_1908_逆序对\",\"link\":\"/cpp/1984-01/P_1908_逆序对.md\"},{\"text\":\"P_1896_SCOI_2005_互不侵犯\",\"link\":\"/cpp/1984-01/P_1896_SCOI_2005_互不侵犯.md\"},{\"text\":\"P_1886_滑动窗口_模板_单调队列\",\"link\":\"/cpp/1984-01/P_1886_滑动窗口_模板_单调队列.md\"},{\"text\":\"P_1879_USACO_06_NOV_Corn_Fields_G\",\"link\":\"/cpp/1984-01/P_1879_USACO_06_NOV_Corn_Fields_G.md\"},{\"text\":\"P_1725_琪露诺\",\"link\":\"/cpp/1984-01/P_1725_琪露诺.md\"},{\"text\":\"P_1719_最大加权矩形\",\"link\":\"/cpp/1984-01/P_1719_最大加权矩形.md\"},{\"text\":\"P_1486_NOI_2004_郁闷的出纳员\",\"link\":\"/cpp/1984-01/P_1486_NOI_2004_郁闷的出纳员.md\"},{\"text\":\"P_1481_魔族密码\",\"link\":\"/cpp/1984-01/P_1481_魔族密码.md\"},{\"text\":\"P_1462_通往奥格瑞玛的道路\",\"link\":\"/cpp/1984-01/P_1462_通往奥格瑞玛的道路.md\"},{\"text\":\"P_1439_模板_最长公共子序列\",\"link\":\"/cpp/1984-01/P_1439_模板_最长公共子序列.md\"},{\"text\":\"P_1434_SHOI_2002_滑雪\",\"link\":\"/cpp/1984-01/P_1434_SHOI_2002_滑雪.md\"},{\"text\":\"P_1395_会议\",\"link\":\"/cpp/1984-01/P_1395_会议.md\"},{\"text\":\"P_1379_八数码难题\",\"link\":\"/cpp/1984-01/P_1379_八数码难题.md\"},{\"text\":\"P_1357_花园\",\"link\":\"/cpp/1984-01/P_1357_花园.md\"},{\"text\":\"P_1314_NOIP_2011_提高组_聪明的质监员\",\"link\":\"/cpp/1984-01/P_1314_NOIP_2011_提高组_聪明的质监员.md\"},{\"text\":\"P_1216_USACO_1_5_IOI_1994_数字三角形_Number_Triangles\",\"link\":\"/cpp/1984-01/P_1216_USACO_1_5_IOI_1994_数字三角形_Number_Triangles.md\"},{\"text\":\"P_1164_小A点菜\",\"link\":\"/cpp/1984-01/P_1164_小A点菜.md\"},{\"text\":\"P_1120_小木棍\",\"link\":\"/cpp/1984-01/P_1120_小木棍.md\"},{\"text\":\"P_1119_灾后重建\",\"link\":\"/cpp/1984-01/P_1119_灾后重建.md\"},{\"text\":\"P_1102_A_B_数对\",\"link\":\"/cpp/1984-01/P_1102_A_B_数对.md\"},{\"text\":\"P_1049_NOIP_2001_普及组_装箱问题\",\"link\":\"/cpp/1984-01/P_1049_NOIP_2001_普及组_装箱问题.md\"},{\"text\":\"P_1048_NOIP_2005_普及组_采药\",\"link\":\"/cpp/1984-01/P_1048_NOIP_2005_普及组_采药.md\"},{\"text\":\"P_1024_NOIP_2001_提高组_一元三次方程求解\",\"link\":\"/cpp/1984-01/P_1024_NOIP_2001_提高组_一元三次方程求解.md\"},{\"text\":\"P_1020_NOIP_1999_普及组_导弹拦截\",\"link\":\"/cpp/1984-01/P_1020_NOIP_1999_普及组_导弹拦截.md\"},{\"text\":\"P4556\",\"link\":\"/cpp/1984-01/P4556.md\"},{\"text\":\"P4554 小明的游戏\",\"link\":\"/cpp/1984-01/P4554 小明的游戏.md\"},{\"text\":\"P3905 道路重建\",\"link\":\"/cpp/1984-01/P3905 道路重建.md\"},{\"text\":\"P3388 【模板】割点（割顶）\",\"link\":\"/cpp/1984-01/P3388 【模板】割点（割顶）.md\"},{\"text\":\"P3366 【模板】最小生成树\",\"link\":\"/cpp/1984-01/P3366 【模板】最小生成树.md\"},{\"text\":\"P2700 逐个击破\",\"link\":\"/cpp/1984-01/P2700 逐个击破.md\"},{\"text\":\"P2656 采蘑菇\",\"link\":\"/cpp/1984-01/P2656 采蘑菇.md\"},{\"text\":\"P2648 赚钱\",\"link\":\"/cpp/1984-01/P2648 赚钱.md\"},{\"text\":\"P2136 拉近距离\",\"link\":\"/cpp/1984-01/P2136 拉近距离.md\"},{\"text\":\"P1875 佳佳的魔法药水\",\"link\":\"/cpp/1984-01/P1875 佳佳的魔法药水.md\"},{\"text\":\"P1744 采购特价商品\",\"link\":\"/cpp/1984-01/P1744 采购特价商品.md\"},{\"text\":\"P1656 炸铁路\",\"link\":\"/cpp/1984-01/P1656 炸铁路.md\"},{\"text\":\"P1629 邮递员送信\",\"link\":\"/cpp/1984-01/P1629 邮递员送信.md\"},{\"text\":\"P1396 营救\",\"link\":\"/cpp/1984-01/P1396 营救.md\"},{\"text\":\"P1331 海战\",\"link\":\"/cpp/1984-01/P1331 海战.md\"},{\"text\":\"P1195 口袋的天空\",\"link\":\"/cpp/1984-01/P1195 口袋的天空.md\"},{\"text\":\"P1194 买礼物\",\"link\":\"/cpp/1984-01/P1194 买礼物.md\"}]}],\"/algorithm/\":[{\"text\":\"算法\",\"link\":\"/algorithm/index.md\"},{\"text\":\"树\",\"collapsed\":false,\"items\":[{\"text\":\"线段树\",\"link\":\"/algorithm/树/线段树.md\"},{\"text\":\"最近公共祖先\",\"link\":\"/algorithm/树/最近公共祖先.md\"},{\"text\":\"最小生成树\",\"link\":\"/algorithm/树/最小生成树.md\"},{\"text\":\"搜索树\",\"link\":\"/algorithm/树/搜索树.md\"}]},{\"text\":\"数学\",\"collapsed\":false,\"items\":[{\"text\":\"高精度\",\"link\":\"/algorithm/数学/高精度.md\"},{\"text\":\"质数\",\"link\":\"/algorithm/数学/质数.md\"},{\"text\":\"欧拉函数\",\"link\":\"/algorithm/数学/欧拉函数.md\"},{\"text\":\"快速幂\",\"link\":\"/algorithm/数学/快速幂.md\"},{\"text\":\"# 因数\",\"link\":\"/algorithm/数学/因数.md\"},{\"text\":\"home\",\"link\":\"/algorithm/数学/index.md\"}]},{\"text\":\"搜索\",\"collapsed\":false,\"items\":[{\"text\":\"记忆话搜索\",\"link\":\"/algorithm/搜索/记忆话搜索.md\"},{\"text\":\"回溯算法\",\"link\":\"/algorithm/搜索/回溯算法.md\"},{\"text\":\"IDA*\",\"link\":\"/algorithm/搜索/IDA*.md\"}]},{\"text\":\"字符串\",\"collapsed\":false,\"items\":[{\"text\":\"字符串\",\"link\":\"/algorithm/字符串/string.md\"},{\"text\":\"automaton\",\"link\":\"/algorithm/字符串/automaton.md\"}]},{\"text\":\"图论\",\"collapsed\":false,\"items\":[{\"text\":\"tarjan 连通图\",\"link\":\"/algorithm/图论/连通图.md\"},{\"text\":\"网络流\",\"link\":\"/algorithm/图论/网络流.md\"},{\"text\":\"最短路\",\"link\":\"/algorithm/图论/最短路.md\"},{\"text\":\"二分图\",\"link\":\"/algorithm/图论/二分图.md\"}]},{\"text\":\"动态规划\",\"collapsed\":false,\"items\":[{\"text\":\"记忆话搜索\",\"link\":\"/algorithm/动态规划/记忆话搜索.md\"},{\"text\":\"背包问题\",\"link\":\"/algorithm/动态规划/背包问题.md\"},{\"text\":\"状态压缩\",\"link\":\"/algorithm/动态规划/状态压缩.md\"},{\"text\":\"最长上升子序列\",\"link\":\"/algorithm/动态规划/最长上升子序列.md\"}]},{\"text\":\"其他算法\",\"collapsed\":false,\"items\":[{\"text\":\"莫队\",\"link\":\"/algorithm/其他算法/莫队.md\"},{\"text\":\"扫描线\",\"link\":\"/algorithm/其他算法/扫描线.md\"},{\"text\":\"二分\",\"link\":\"/algorithm/其他算法/二分.md\"}]}]}},\"locales\":{},\"scrollOffset\":134,\"cleanUrls\":false}");</script>
    
  </body>
</html>